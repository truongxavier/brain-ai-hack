import*as c from"vis-data/peer/umd/vis-data.js";var f=c;try{"default"in c&&(f=c.default)}catch(c){}var b=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:global;var w={};
/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 9.1.9
 * @date    2023-11-03T01:42:27.418Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */!function(c,b){b(w,f)}(0,(function(c,f){var w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof b?b:"undefined"!=typeof self?self:{};function o(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var n=function(c){return c&&c.Math===Math&&c},x=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof w&&w)||function(){return this||b}()||w||Function("return this")(),s=function(c){try{return!!c()}catch(c){return!0}},_=!s((function(){var c=function(){}.bind();return"function"!=typeof c||c.hasOwnProperty("prototype")})),O=_,C=Function.prototype,T=C.apply,S=C.call,M="object"==typeof Reflect&&Reflect.apply||(O?S.bind(T):function(){return S.apply(T,arguments)}),P=_,D=Function.prototype,I=D.call,B=P&&D.bind.bind(I,I),F=P?B:function(c){return function(){return I.apply(c,arguments)}},z=F,N=z({}.toString),A=z("".slice),k=function(c){return A(N(c),8,-1)},R=k,j=F,E=function(c){if("Function"===R(c))return j(c)},H="object"==typeof document&&document.all,W={all:H,IS_HTMLDDA:void 0===H&&void 0!==H},V=W.all,q=W.IS_HTMLDDA?function(c){return"function"==typeof c||c===V}:function(c){return"function"==typeof c},U={},X=!s((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),K=_,Z=Function.prototype.call,$=K?Z.bind(Z):function(){return Z.apply(Z,arguments)},J={},tt={}.propertyIsEnumerable,et=Object.getOwnPropertyDescriptor,it=et&&!tt.call({1:2},1);J.f=it?function(c){var f=et(this||b,c);return!!f&&f.enumerable}:tt;var ot,nt,L=function(c,f){return{enumerable:!(1&c),configurable:!(2&c),writable:!(4&c),value:f}},rt=s,ht=k,dt=Object,lt=F("".split),ct=rt((function(){return!dt("z").propertyIsEnumerable(0)}))?function(c){return"String"===ht(c)?lt(c,""):dt(c)}:dt,Y=function(c){return null==c},ut=Y,ft=TypeError,G=function(c){if(ut(c))throw new ft("Can't call method on "+c);return c},pt=ct,vt=G,Q=function(c){return pt(vt(c))},gt=q,yt=W.all,mt=W.IS_HTMLDDA?function(c){return"object"==typeof c?null!==c:gt(c)||c===yt}:function(c){return"object"==typeof c?null!==c:gt(c)},bt={},wt=bt,kt=x,xt=q,st=function(c){return xt(c)?c:void 0},at=function(c,f){return arguments.length<2?st(wt[c])||st(kt[c]):wt[c]&&wt[c][f]||kt[c]&&kt[c][f]},_t=F({}.isPrototypeOf),Et="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Ot=x,Ct=Et,St=Ot.process,Mt=Ot.Deno,Pt=St&&St.versions||Mt&&Mt.version,Dt=Pt&&Pt.v8;Dt&&(nt=(ot=Dt.split("."))[0]>0&&ot[0]<4?1:+(ot[0]+ot[1])),!nt&&Ct&&(!(ot=Ct.match(/Edge\/(\d+)/))||ot[1]>=74)&&(ot=Ct.match(/Chrome\/(\d+)/))&&(nt=+ot[1]);var Bt=nt,Ft=Bt,Nt=s,At=x.String,Rt=!!Object.getOwnPropertySymbols&&!Nt((function(){var c=Symbol("symbol detection");return!At(c)||!(Object(c)instanceof Symbol)||!Symbol.sham&&Ft&&Ft<41})),jt=Rt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Lt=at,Ht=q,Wt=_t,qt=Object,Ut=jt?function(c){return"symbol"==typeof c}:function(c){var f=Lt("Symbol");return Ht(f)&&Wt(f.prototype,qt(c))},Yt=String,Tt=function(c){try{return Yt(c)}catch(c){return"Object"}},Xt=q,Kt=Tt,Gt=TypeError,It=function(c){if(Xt(c))return c;throw new Gt(Kt(c)+" is not a function")},Zt=It,Qt=Y,zt=function(c,f){var b=c[f];return Qt(b)?void 0:Zt(b)},Jt=$,te=q,ee=mt,ie=TypeError,oe={exports:{}},re=x,se=Object.defineProperty,Vt=function(c,f){try{se(re,c,{value:f,configurable:!0,writable:!0})}catch(b){re[c]=f}return f},ae="__core-js_shared__",he=x[ae]||Vt(ae,{}),de=he;(oe.exports=function(c,f){return de[c]||(de[c]=void 0!==f?f:{})})("versions",[]).push({version:"3.33.0",mode:"pure",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"});var le=oe.exports,ce=G,ue=Object,$t=function(c){return ue(ce(c))},pe=$t,ve=F({}.hasOwnProperty),ge=Object.hasOwn||function(c,f){return ve(pe(c),f)},ye=F,be=0,we=Math.random(),_e=ye(1..toString),ne=function(c){return"Symbol("+(void 0===c?"":c)+")_"+_e(++be+we,36)},Ee=le,Oe=ge,Ce=ne,Te=Rt,Me=jt,Pe=x.Symbol,De=Ee("wks"),Ie=Me?Pe.for||Pe:Pe&&Pe.withoutSetter||Ce,fe=function(c){return Oe(De,c)||(De[c]=Te&&Oe(Pe,c)?Pe[c]:Ie("Symbol."+c)),De[c]},Be=$,Fe=mt,ze=Ut,Ne=zt,me=function(c,f){var b,w;if("string"===f&&te(b=c.toString)&&!ee(w=Jt(b,c)))return w;if(te(b=c.valueOf)&&!ee(w=Jt(b,c)))return w;if("string"!==f&&te(b=c.toString)&&!ee(w=Jt(b,c)))return w;throw new ie("Can't convert object to primitive value")},Ae=TypeError,Re=fe("toPrimitive"),ke=function(c,f){if(!Fe(c)||ze(c))return c;var b,w=Ne(c,Re);if(w){if(void 0===f&&(f="default"),b=Be(w,c,f),!Fe(b)||ze(b))return b;throw new Ae("Can't convert object to primitive value")}return void 0===f&&(f="number"),me(c,f)},je=Ut,xe=function(c){var f=ke(c,"string");return je(f)?f:f+""},Le=mt,He=x.document,Ve=Le(He)&&Le(He.createElement),Se=function(c){return Ve?He.createElement(c):{}},qe=Se,Ue=!X&&!s((function(){return 7!==Object.defineProperty(qe("div"),"a",{get:function(){return 7}}).a})),Ye=X,Xe=$,Ke=J,Ge=L,Qe=Q,$e=xe,Je=ge,ti=Ue,ei=Object.getOwnPropertyDescriptor;U.f=Ye?ei:function(c,f){if(c=Qe(c),f=$e(f),ti)try{return ei(c,f)}catch(c){}if(Je(c,f))return Ge(!Xe(Ke.f,c,f),c[f])};var ii=s,ni=q,ri=/#|\.prototype\./,We=function(c,f){var b=ai[si(c)];return b===di||b!==hi&&(ni(f)?ii(f):!!f)},si=We.normalize=function(c){return String(c).replace(ri,".").toLowerCase()},ai=We.data={},hi=We.NATIVE="N",di=We.POLYFILL="P",li=We,ci=It,ui=_,fi=E(E.bind),Ze=function(c,f){return ci(c),void 0===f?c:ui?fi(c,f):function(){return c.apply(f,arguments)}},pi={},vi=X&&s((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),gi=mt,yi=String,mi=TypeError,oi=function(c){if(gi(c))return c;throw new mi(yi(c)+" is not an object")},bi=X,wi=Ue,ki=vi,xi=oi,_i=xe,Ei=TypeError,Oi=Object.defineProperty,Ci=Object.getOwnPropertyDescriptor,Si="enumerable",Pi="configurable",Di="writable";pi.f=bi?ki?function(c,f,b){if(xi(c),f=_i(f),xi(b),"function"==typeof c&&"prototype"===f&&"value"in b&&Di in b&&!b[Di]){var w=Ci(c,f);w&&w[Di]&&(c[f]=b.value,b={configurable:Pi in b?b[Pi]:w[Pi],enumerable:Si in b?b[Si]:w[Si],writable:!1})}return Oi(c,f,b)}:Oi:function(c,f,b){if(xi(c),f=_i(f),xi(b),wi)try{return Oi(c,f,b)}catch(c){}if("get"in b||"set"in b)throw new Ei("Accessors not supported");return"value"in b&&(c[f]=b.value),c};var Ii=pi,Fi=L,zi=X?function(c,f,b){return Ii.f(c,f,Fi(1,b))}:function(c,f,b){return c[f]=b,c},Ni=x,Ri=M,ji=E,Wi=q,Vi=U.f,qi=li,Yi=bt,Xi=Ze,Ki=zi,Gi=ge,Ti=function(c){var e=function(f,w,x){if((this||b)instanceof e){switch(arguments.length){case 0:return new c;case 1:return new c(f);case 2:return new c(f,w)}return new c(f,w,x)}return Ri(c,this||b,arguments)};return e.prototype=c.prototype,e},Mi=function(c,f){var b,w,x,_,O,C,T,S,M,P=c.target,D=c.global,I=c.stat,B=c.proto,F=D?Ni:I?Ni[P]:(Ni[P]||{}).prototype,z=D?Yi:Yi[P]||Ki(Yi,P,{})[P],N=z.prototype;for(_ in f)w=!(b=qi(D?_:P+(I?".":"#")+_,c.forced))&&F&&Gi(F,_),C=z[_],w&&(T=c.dontCallGetSet?(M=Vi(F,_))&&M.value:F[_]),O=w&&T?T:f[_],w&&typeof C==typeof O||(S=c.bind&&w?Xi(O,Ni):c.wrap&&w?Ti(O):B&&Wi(O)?ji(O):O,(c.sham||O&&O.sham||C&&C.sham)&&Ki(S,"sham",!0),Ki(z,_,S),B&&(Gi(Yi,x=P+"Prototype")||Ki(Yi,x,{}),Ki(Yi[x],_,O),c.real&&N&&(b||!N[_])&&Ki(N,_,O)))},Zi=Math.ceil,Qi=Math.floor,$i=Math.trunc||function(c){var f=+c;return(f>0?Qi:Zi)(f)},Bi=function(c){var f=+c;return f!=f||0===f?0:$i(f)},to=Bi,eo=Math.max,io=Math.min,Ai=function(c,f){var b=to(c);return b<0?eo(b+f,0):io(b,f)},oo=Bi,no=Math.min,Li=function(c){return c>0?no(oo(c),9007199254740991):0},Hi=function(c){return Li(c.length)},ro=Q,so=Ai,ao=Hi,Ui=function(c){return function(f,b,w){var x,_=ro(f),O=ao(_),C=so(w,O);if(c&&b!=b){for(;O>C;)if((x=_[C++])!=x)return!0}else for(;O>C;C++)if((c||C in _)&&_[C]===b)return c||C||0;return!c&&-1}},ho={includes:Ui(!0),indexOf:Ui(!1)},lo={},co=ge,uo=Q,fo=ho.indexOf,po=lo,vo=F([].push),Ji=function(c,f){var b,w=uo(c),x=0,_=[];for(b in w)!co(po,b)&&co(w,b)&&vo(_,b);for(;f.length>x;)co(w,b=f[x++])&&(~fo(_,b)||vo(_,b));return _},go=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],yo=Ji,mo=go,bo=Object.keys||function(c){return yo(c,mo)},wo={};wo.f=Object.getOwnPropertySymbols;var ko=X,xo=F,_o=$,Eo=s,Oo=bo,Co=wo,To=J,So=$t,Mo=ct,Po=Object.assign,Do=Object.defineProperty,Io=xo([].concat),Bo=!Po||Eo((function(){if(ko&&1!==Po({b:1},Po(Do({},"a",{enumerable:!0,get:function(){Do(this||b,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var c={},f={},w=Symbol("assign detection"),x="abcdefghijklmnopqrst";return c[w]=7,x.split("").forEach((function(c){f[c]=c})),7!==Po({},c)[w]||Oo(Po({},f)).join("")!==x}))?function(c,f){for(var b=So(c),w=arguments.length,x=1,_=Co.f,O=To.f;w>x;)for(var C,T=Mo(arguments[x++]),S=_?Io(Oo(T),_(T)):Oo(T),M=S.length,P=0;M>P;)C=S[P++],ko&&!_o(O,T,C)||(b[C]=T[C]);return b}:Po,Fo=Bo;Mi({target:"Object",stat:!0,arity:2,forced:Object.assign!==Fo},{assign:Fo});var No=o(bt.Object.assign),Ao=F([].slice),Ro=F,jo=It,Ho=mt,Wo=ge,Ko=Ao,Go=_,Zo=Function,Qo=Ro([].concat),$o=Ro([].join),Jo={},tn=Go?Zo.bind:function(c){var f=jo(this||b),w=f.prototype,x=Ko(arguments,1),n=function(){var w=Qo(x,Ko(arguments));return(this||b)instanceof n?function(c,f,b){if(!Wo(Jo,f)){for(var w=[],x=0;x<f;x++)w[x]="a["+x+"]";Jo[f]=Zo("C,a","return new C("+$o(w,",")+")")}return Jo[f](c,b)}(f,w.length,w):f.apply(c,w)};return Ho(w)&&(n.prototype=w),n},en=tn;Mi({target:"Function",proto:!0,forced:Function.bind!==en},{bind:en});var on=bt,zo=function(c){return on[c+"Prototype"]},nn=zo("Function").bind,rn=_t,sn=nn,an=Function.prototype,Lo=function(c){var f=c.bind;return c===an||rn(an,c)&&f===an.bind?sn:f},hn=Lo,dn=o(hn);function Vo(c,f,b,w){c.beginPath(),c.arc(f,b,w,0,2*Math.PI,!1),c.closePath()}function qo(c,f,b,w,x,_){var O=Math.PI/180;w-2*_<0&&(_=w/2),x-2*_<0&&(_=x/2),c.beginPath(),c.moveTo(f+_,b),c.lineTo(f+w-_,b),c.arc(f+w-_,b+_,_,270*O,360*O,!1),c.lineTo(f+w,b+x-_),c.arc(f+w-_,b+x-_,_,0,90*O,!1),c.lineTo(f+_,b+x),c.arc(f+_,b+x-_,_,90*O,180*O,!1),c.lineTo(f,b+_),c.arc(f+_,b+_,_,180*O,270*O,!1),c.closePath()}function Uo(c,f,b,w,x){var _=.5522848,O=w/2*_,C=x/2*_,T=f+w,S=b+x,M=f+w/2,P=b+x/2;c.beginPath(),c.moveTo(f,P),c.bezierCurveTo(f,P-C,M-O,b,M,b),c.bezierCurveTo(M+O,b,T,P-C,T,P),c.bezierCurveTo(T,P+C,M+O,S,M,S),c.bezierCurveTo(M-O,S,f,P+C,f,P),c.closePath()}function Yo(c,f,b,w,x){var _=x*(1/3),O=.5522848,C=w/2*O,T=_/2*O,S=f+w,M=b+_,P=f+w/2,D=b+_/2,I=b+(x-_/2),B=b+x;c.beginPath(),c.moveTo(S,D),c.bezierCurveTo(S,D+T,P+C,M,P,M),c.bezierCurveTo(P-C,M,f,D+T,f,D),c.bezierCurveTo(f,D-T,P-C,b,P,b),c.bezierCurveTo(P+C,b,S,D-T,S,D),c.lineTo(S,I),c.bezierCurveTo(S,I+T,P+C,B,P,B),c.bezierCurveTo(P-C,B,f,I+T,f,I),c.lineTo(f,D)}function Xo(c,f,b,w,x,_){c.beginPath(),c.moveTo(f,b);for(var O=_.length,C=w-f,T=x-b,S=T/C,M=Math.sqrt(C*C+T*T),P=0,D=!0,I=0,B=+_[0];M>=.1;)(B=+_[P++%O])>M&&(B=M),I=Math.sqrt(B*B/(1+S*S)),f+=I=C<0?-I:I,b+=S*I,!0===D?c.lineTo(f,b):c.moveTo(f,b),M-=B,D=!D}var ln={circle:Vo,dashedLine:Xo,database:Yo,diamond:function(c,f,b,w){c.beginPath(),c.lineTo(f,b+w),c.lineTo(f+w,b),c.lineTo(f,b-w),c.lineTo(f-w,b),c.closePath()},ellipse:Uo,ellipse_vis:Uo,hexagon:function(c,f,b,w){c.beginPath();var x=2*Math.PI/6;c.moveTo(f+w,b);for(var _=1;_<6;_++)c.lineTo(f+w*Math.cos(x*_),b+w*Math.sin(x*_));c.closePath()},roundRect:qo,square:function(c,f,b,w){c.beginPath(),c.rect(f-w,b-w,2*w,2*w),c.closePath()},star:function(c,f,b,w){c.beginPath(),b+=.1*(w*=.82);for(var x=0;x<10;x++){var _=x%2==0?1.3*w:.5*w;c.lineTo(f+_*Math.sin(2*x*Math.PI/10),b-_*Math.cos(2*x*Math.PI/10))}c.closePath()},triangle:function(c,f,b,w){c.beginPath(),b+=.275*(w*=1.15);var x=2*w,_=x/2,O=Math.sqrt(3)/6*x,C=Math.sqrt(x*x-_*_);c.moveTo(f,b-(C-O)),c.lineTo(f+_,b+O),c.lineTo(f-_,b+O),c.lineTo(f,b-(C-O)),c.closePath()},triangleDown:function(c,f,b,w){c.beginPath(),b-=.275*(w*=1.15);var x=2*w,_=x/2,O=Math.sqrt(3)/6*x,C=Math.sqrt(x*x-_*_);c.moveTo(f,b+(C-O)),c.lineTo(f+_,b-O),c.lineTo(f-_,b-O),c.lineTo(f,b+(C-O)),c.closePath()}};var cn={exports:{}};!function(c){function e(c){if(c)return function(c){for(var f in e.prototype)c[f]=e.prototype[f];return c}(c)}c.exports=e,e.prototype.on=e.prototype.addEventListener=function(c,f){return(this||b)._callbacks=(this||b)._callbacks||{},((this||b)._callbacks["$"+c]=(this||b)._callbacks["$"+c]||[]).push(f),this||b},e.prototype.once=function(c,f){function i(){this.off(c,i),f.apply(this||b,arguments)}return i.fn=f,this.on(c,i),this||b},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(c,f){if((this||b)._callbacks=(this||b)._callbacks||{},0==arguments.length)return(this||b)._callbacks={},this||b;var w,x=(this||b)._callbacks["$"+c];if(!x)return this||b;if(1==arguments.length)return delete(this||b)._callbacks["$"+c],this||b;for(var _=0;_<x.length;_++)if((w=x[_])===f||w.fn===f){x.splice(_,1);break}return 0===x.length&&delete(this||b)._callbacks["$"+c],this||b},e.prototype.emit=function(c){(this||b)._callbacks=(this||b)._callbacks||{};for(var f=new Array(arguments.length-1),w=(this||b)._callbacks["$"+c],x=1;x<arguments.length;x++)f[x-1]=arguments[x];if(w){x=0;for(var _=(w=w.slice(0)).length;x<_;++x)w[x].apply(this||b,f)}return this||b},e.prototype.listeners=function(c){return(this||b)._callbacks=(this||b)._callbacks||{},(this||b)._callbacks["$"+c]||[]},e.prototype.hasListeners=function(c){return!!this.listeners(c).length}}(cn);var fn=o(cn.exports),pn={};pn[fe("toStringTag")]="z";var vn,gn,yn,mn="[object z]"===String(pn),bn=mn,kn=q,xn=k,_n=fe("toStringTag"),En=Object,On="Arguments"===xn(function(){return arguments}()),Cn=bn?xn:function(c){var f,b,w;return void 0===c?"Undefined":null===c?"Null":"string"==typeof(b=function(c,f){try{return c[f]}catch(c){}}(f=En(c),_n))?b:On?xn(f):"Object"===(w=xn(f))&&kn(f.callee)?"Arguments":w},Tn=Cn,Mn=String,un=function(c){if("Symbol"===Tn(c))throw new TypeError("Cannot convert a Symbol value to a string");return Mn(c)},Pn=F,Dn=Bi,In=un,Bn=G,Fn=Pn("".charAt),zn=Pn("".charCodeAt),Nn=Pn("".slice),wn=function(c){return function(f,b){var w,x,_=In(Bn(f)),O=Dn(b),C=_.length;return O<0||O>=C?c?"":void 0:(w=zn(_,O))<55296||w>56319||O+1===C||(x=zn(_,O+1))<56320||x>57343?c?Fn(_,O):w:c?Nn(_,O,O+2):x-56320+(w-55296<<10)+65536}},An={codeAt:wn(!1),charAt:wn(!0)},Rn=q,jn=x.WeakMap,Ln=Rn(jn)&&/native code/.test(String(jn)),Hn=ne,Wn=le("keys"),Sn=function(c){return Wn[c]||(Wn[c]=Hn(c))},Vn=Ln,qn=x,Un=mt,Yn=zi,Xn=ge,Kn=he,Gn=Sn,Zn=lo,Qn="Object already initialized",$n=qn.TypeError,Jn=qn.WeakMap;if(Vn||Kn.state){var tr=Kn.state||(Kn.state=new Jn);tr.get=tr.get,tr.has=tr.has,tr.set=tr.set,vn=function(c,f){if(tr.has(c))throw new $n(Qn);return f.facade=c,tr.set(c,f),f},gn=function(c){return tr.get(c)||{}},yn=function(c){return tr.has(c)}}else{var er=Gn("state");Zn[er]=!0,vn=function(c,f){if(Xn(c,er))throw new $n(Qn);return f.facade=c,Yn(c,er,f),f},gn=function(c){return Xn(c,er)?c[er]:{}},yn=function(c){return Xn(c,er)}}var ir={set:vn,get:gn,has:yn,enforce:function(c){return yn(c)?gn(c):vn(c,{})},getterFor:function(c){return function(f){var b;if(!Un(f)||(b=gn(f)).type!==c)throw new $n("Incompatible receiver, "+c+" required");return b}}},or=X,nr=ge,rr=Function.prototype,sr=or&&Object.getOwnPropertyDescriptor,ar=nr(rr,"name"),hr={EXISTS:ar,PROPER:ar&&"something"===function(){}.name,CONFIGURABLE:ar&&(!or||or&&sr(rr,"name").configurable)},dr={},lr=X,cr=vi,gr=pi,yr=oi,mr=Q,br=bo;dr.f=lr&&!cr?Object.defineProperties:function(c,f){yr(c);for(var b,w=mr(f),x=br(f),_=x.length,O=0;_>O;)gr.f(c,b=x[O++],w[b]);return c};var wr,kr=at("document","documentElement"),xr=oi,_r=dr,Er=go,Or=lo,Cr=kr,Tr=Se,Sr="prototype",Mr="script",Dr=Sn("IE_PROTO"),ur=function(){},fr=function(c){return"<"+Mr+">"+c+"</"+Mr+">"},pr=function(c){c.write(fr("")),c.close();var f=c.parentWindow.Object;return c=null,f},vr=function(){try{wr=new ActiveXObject("htmlfile")}catch(c){}var c,f,b;vr="undefined"!=typeof document?document.domain&&wr?pr(wr):(f=Tr("iframe"),b="java"+Mr+":",f.style.display="none",Cr.appendChild(f),f.src=String(b),(c=f.contentWindow.document).open(),c.write(fr("document.F=Object")),c.close(),c.F):pr(wr);for(var w=Er.length;w--;)delete vr[Sr][Er[w]];return vr()};Or[Dr]=!0;var Ir,Br,Fr,zr=Object.create||function(c,f){var b;return null!==c?(ur[Sr]=xr(c),b=new ur,ur[Sr]=null,b[Dr]=c):b=vr(),void 0===f?b:_r.f(b,f)},Nr=!s((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ar=ge,Rr=q,jr=$t,Lr=Nr,Hr=Sn("IE_PROTO"),Wr=Object,Vr=Wr.prototype,qr=Lr?Wr.getPrototypeOf:function(c){var f=jr(c);if(Ar(f,Hr))return f[Hr];var b=f.constructor;return Rr(b)&&f instanceof b?b.prototype:f instanceof Wr?Vr:null},Ur=zi,Pr=function(c,f,b,w){return w&&w.enumerable?c[f]=b:Ur(c,f,b),c},Yr=s,Xr=q,Kr=mt,Zr=zr,Qr=qr,$r=Pr,Jr=fe("iterator"),ts=!1;[].keys&&("next"in(Fr=[].keys())?(Br=Qr(Qr(Fr)))!==Object.prototype&&(Ir=Br):ts=!0);var es=!Kr(Ir)||Yr((function(){var c={};return Ir[Jr].call(c)!==c}));Xr((Ir=es?{}:Zr(Ir))[Jr])||$r(Ir,Jr,(function(){return this||b}));var os={IteratorPrototype:Ir,BUGGY_SAFARI_ITERATORS:ts},ns=Cn,rs=mn?{}.toString:function(){return"[object "+ns(this||b)+"]"},ss=mn,as=pi.f,ds=zi,cs=ge,us=rs,fs=fe("toStringTag"),Gr=function(c,f,b,w){if(c){var x=b?c:c.prototype;cs(x,fs)||as(x,fs,{configurable:!0,value:f}),w&&!ss&&ds(x,"toString",us)}},ps={},gs=os.IteratorPrototype,ys=zr,ms=L,bs=Gr,ws=ps,is=function(){return this||b},ks=F,xs=It,_s=q,Es=String,Os=TypeError,hs=function(c,f,b){try{return ks(xs(Object.getOwnPropertyDescriptor(c,f)[b]))}catch(c){}},Cs=oi,ls=function(c){if("object"==typeof c||_s(c))return c;throw new Os("Can't set "+Es(c)+" as a prototype")},Ps=Object.setPrototypeOf||("__proto__"in{}?function(){var c,f=!1,b={};try{(c=hs(Object.prototype,"__proto__","set"))(b,[]),f=b instanceof Array}catch(c){}return function(b,w){return Cs(b),ls(w),f?c(b,w):b.__proto__=w,b}}():void 0),Ds=Mi,Is=$,Bs=hr,vs=function(c,f,b,w){var x=f+" Iterator";return c.prototype=ys(gs,{next:ms(+!w,b)}),bs(c,x,!1,!0),ws[x]=is,c},Fs=qr,zs=Gr,Ns=Pr,As=ps,Rs=os,js=Bs.PROPER,Ls=Rs.BUGGY_SAFARI_ITERATORS,Ws=fe("iterator"),Vs="keys",qs="values",Us="entries",Ss=function(){return this||b},Ts=function(c,f,w,x,_,O,C){vs(w,f,x);var T,S,M,l=function(c){if(c===_&&F)return F;if(!Ls&&c&&c in I)return I[c];switch(c){case Vs:case qs:case Us:return function(){return new w(this||b,c)}}return function(){return new w(this||b)}},P=f+" Iterator",D=!1,I=c.prototype,B=I[Ws]||I["@@iterator"]||_&&I[_],F=!Ls&&B||l(_),z="Array"===f&&I.entries||B;if(z&&(T=Fs(z.call(new c)))!==Object.prototype&&T.next&&(zs(T,P,!0,!0),As[P]=Ss),js&&_===qs&&B&&B.name!==qs&&(D=!0,F=function(){return Is(B,this||b)}),_)if(S={values:l(qs),keys:O?F:l(Vs),entries:l(Us)},C)for(M in S)(Ls||D||!(M in I))&&Ns(I,M,S[M]);else Ds({target:f,proto:!0,forced:Ls||D},S);return C&&I[Ws]!==F&&Ns(I,Ws,F,{name:_}),As[f]=F,S},Ms=function(c,f){return{value:c,done:f}},Ys=An.charAt,Ks=un,Gs=ir,Zs=Ts,Qs=Ms,$s="String Iterator",Js=Gs.set,ta=Gs.getterFor($s);Zs(String,"String",(function(c){Js(this||b,{type:$s,string:Ks(c),index:0})}),(function(){var c,f=ta(this||b),w=f.string,x=f.index;return x>=w.length?Qs(void 0,!0):(c=Ys(w,x),f.index+=c.length,Qs(c,!1))}));var ea=$,ia=oi,na=zt,Hs=function(c,f,b){var w,x;ia(c);try{if(!(w=na(c,"return"))){if("throw"===f)throw b;return b}w=ea(w,c)}catch(c){x=!0,w=c}if("throw"===f)throw b;if(x)throw w;return ia(w),b},ra=oi,sa=Hs,aa=ps,ha=fe("iterator"),ca=Array.prototype,Xs=function(c){return void 0!==c&&(aa.Array===c||ca[ha]===c)},ua=q,fa=he,pa=F(Function.toString);ua(fa.inspectSource)||(fa.inspectSource=function(c){return pa(c)});var ga=fa.inspectSource,ya=F,ma=s,ba=q,wa=Cn,xa=ga,oa=function(){},_a=[],Ea=at("Reflect","construct"),Oa=/^\s*(?:class|function)\b/,Ca=ya(Oa.exec),Sa=!Oa.test(oa),da=function(c){if(!ba(c))return!1;try{return Ea(oa,_a,c),!0}catch(c){return!1}},la=function(c){if(!ba(c))return!1;switch(wa(c)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Sa||!!Ca(Oa,xa(c))}catch(c){return!0}};la.sham=!0;var Ma=!Ea||ma((function(){var c;return da(da.call)||!da(Object)||!da((function(){c=!0}))||c}))?la:da,Pa=xe,Da=pi,Ba=L,va=function(c,f,b){var w=Pa(f);w in c?Da.f(c,w,Ba(0,b)):c[w]=b},Fa=Cn,za=zt,Na=Y,Aa=ps,Ra=fe("iterator"),ka=function(c){if(!Na(c))return za(c,Ra)||za(c,"@@iterator")||Aa[Fa(c)]},ja=$,La=It,Ha=oi,Wa=Tt,Va=ka,Ya=TypeError,Ta=function(c,f){var b=arguments.length<2?Va(c):f;if(La(b))return Ha(ja(b,c));throw new Ya(Wa(c)+" is not iterable")},Xa=Ze,Ka=$,Ga=$t,Ia=function(c,f,b,w){try{return w?f(ra(b)[0],b[1]):f(b)}catch(f){sa(c,"throw",f)}},Za=Xs,Qa=Ma,$a=Hi,Ja=va,th=Ta,eh=ka,ih=Array,oh=fe("iterator"),nh=!1;try{var rh=0,sh={next:function(){return{done:!!rh++}},return:function(){nh=!0}};sh[oh]=function(){return this||b},Array.from(sh,(function(){throw 2}))}catch(c){}var qa=function(c){var f=Ga(c),w=Qa(this||b),x=arguments.length,_=x>1?arguments[1]:void 0,O=void 0!==_;O&&(_=Xa(_,x>2?arguments[2]:void 0));var C,T,S,M,P,D,I=eh(f),B=0;if(!I||(this||b)===ih&&Za(I))for(C=$a(f),T=w?new(this||b)(C):ih(C);C>B;B++)D=O?_(f[B],B):f[B],Ja(T,B,D);else for(P=(M=th(f,I)).next,T=w?new(this||b):[];!(S=Ka(P,M)).done;B++)D=O?Ia(M,_,[S.value,B],!0):S.value,Ja(T,B,D);return T.length=B,T},Ua=function(c,f){try{if(!f&&!nh)return!1}catch(c){return!1}var b=!1;try{var w={};w[oh]=function(){return{next:function(){return{done:b=!0}}}},c(w)}catch(c){}return b};Mi({target:"Array",stat:!0,forced:!Ua((function(c){Array.from(c)}))},{from:qa});var ah=bt.Array.from,hh=o(ah),dh=Q,lh=ps,ch=ir;pi.f;var uh=Ts,fh=Ms,ph="Array Iterator",gh=ch.set,yh=ch.getterFor(ph);uh(Array,"Array",(function(c,f){gh(this||b,{type:ph,target:dh(c),index:0,kind:f})}),(function(){var c=yh(this||b),f=c.target,w=c.kind,x=c.index++;if(!f||x>=f.length)return c.target=void 0,fh(void 0,!0);switch(w){case"keys":return fh(x,!1);case"values":return fh(f[x],!1)}return fh([x,f[x]],!1)}),"values"),lh.Arguments=lh.Array;var mh=ka,bh={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},wh=x,kh=Cn,xh=zi,_h=ps,Eh=fe("toStringTag");for(var Oh in bh){var Ch=wh[Oh],Th=Ch&&Ch.prototype;Th&&kh(Th)!==Eh&&xh(Th,Eh,Oh),_h[Oh]=_h.Array}var Mh=mh,Ph=o(Mh),Dh=o(Mh);function vh(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}var Ih={exports:{}},zh=Mi,Nh=X,Ah=pi.f;zh({target:"Object",stat:!0,forced:Object.defineProperty!==Ah,sham:!Nh},{defineProperty:Ah});var jh=bt.Object,Lh=Ih.exports=function(c,f,b){return jh.defineProperty(c,f,b)};jh.defineProperty.sham&&(Lh.sham=!0);var Hh=Ih.exports,Wh=o(Hh),Vh=k,qh=Array.isArray||function(c){return"Array"===Vh(c)},Uh=TypeError,Sh=function(c){if(c>9007199254740991)throw Uh("Maximum allowed index exceeded");return c},Yh=qh,Xh=Ma,Kh=mt,Gh=fe("species"),Zh=Array,Bh=function(c){var f;return Yh(c)&&(f=c.constructor,(Xh(f)&&(f===Zh||Yh(f.prototype))||Kh(f)&&null===(f=f[Gh]))&&(f=void 0)),void 0===f?Zh:f},Fh=function(c,f){return new(Bh(c))(0===f?0:f)},$h=s,Jh=Bt,td=fe("species"),Rh=function(c){return Jh>=51||!$h((function(){var f=[];return(f.constructor={})[td]=function(){return{foo:1}},1!==f[c](Boolean).foo}))},ed=Mi,id=s,od=qh,nd=mt,rd=$t,sd=Hi,ad=Sh,dd=va,ld=Fh,cd=Rh,ud=Bt,fd=fe("isConcatSpreadable"),pd=ud>=51||!id((function(){var c=[];return c[fd]=!1,c.concat()[0]!==c})),Qh=function(c){if(!nd(c))return!1;var f=c[fd];return void 0!==f?!!f:od(c)};ed({target:"Array",proto:!0,arity:1,forced:!pd||!cd("concat")},{concat:function(c){var f,w,x,_,O,C=rd(this||b),T=ld(C,0),S=0;for(f=-1,x=arguments.length;f<x;f++)if(Qh(O=-1===f?C:arguments[f]))for(_=sd(O),ad(S+_),w=0;w<_;w++,S++)w in O&&dd(T,S,O[w]);else ad(S+1),dd(T,S++,O);return T.length=S,T}});var gd={},yd=Ji,md=go.concat("length","prototype");gd.f=Object.getOwnPropertyNames||function(c){return yd(c,md)};var bd={},wd=Ai,kd=Hi,xd=va,Ed=Array,Od=Math.max,hd=function(c,f,b){for(var w=kd(c),x=wd(f,w),_=wd(void 0===b?w:b,w),O=Ed(Od(_-x,0)),C=0;x<_;x++,C++)xd(O,C,c[x]);return O.length=C,O},Cd=k,Td=Q,Md=gd.f,Pd=hd,Dd="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];bd.f=function(c){return Dd&&"Window"===Cd(c)?function(c){try{return Md(c)}catch(c){return Pd(Dd)}}(c):Md(Td(c))};var Id=pi,vd=function(c,f,b){return Id.f(c,f,b)},Bd={},zd=fe;Bd.f=zd;var Nd=bt,Ad=ge,Rd=Bd,jd=pi.f,_d=function(c){var f=Nd.Symbol||(Nd.Symbol={});Ad(f,c)||jd(f,c,{value:Rd.f(c)})},Ld=$,Hd=at,Wd=fe,Vd=Pr,Sd=function(){var c=Hd("Symbol"),f=c&&c.prototype,w=f&&f.valueOf,x=Wd("toPrimitive");f&&!f[x]&&Vd(f,x,(function(c){return Ld(w,this||b)}),{arity:1})},qd=Ze,Ud=ct,Yd=$t,Xd=Hi,Kd=Fh,Gd=F([].push),Fd=function(c){var f=1===c,b=2===c,w=3===c,x=4===c,_=6===c,O=7===c,C=5===c||_;return function(T,S,M,P){for(var D,I,B=Yd(T),F=Ud(B),z=qd(S,M),N=Xd(F),A=0,R=P||Kd,j=f?R(T,N):b||O?R(T,0):void 0;N>A;A++)if((C||A in F)&&(I=z(D=F[A],A,B),c))if(f)j[A]=I;else if(I)switch(c){case 3:return!0;case 5:return D;case 6:return A;case 2:Gd(j,D)}else switch(c){case 4:return!1;case 7:Gd(j,D)}return _?-1:w||x?x:j}},Zd={forEach:Fd(0),map:Fd(1),filter:Fd(2),some:Fd(3),every:Fd(4),find:Fd(5),findIndex:Fd(6),filterReject:Fd(7)},Qd=Mi,$d=x,Jd=$,tl=F,el=X,il=Rt,ol=s,nl=ge,rl=_t,sl=oi,al=Q,hl=xe,dl=un,ll=L,cl=zr,ul=bo,fl=gd,pl=bd,vl=wo,gl=U,yl=pi,ml=dr,bl=J,wl=Pr,kl=vd,xl=le,_l=lo,El=ne,Ol=fe,Cl=Bd,Tl=_d,Sl=Sd,Ml=Gr,Pl=ir,Dl=Zd.forEach,Il=Sn("hidden"),Bl="Symbol",Fl="prototype",zl=Pl.set,Nl=Pl.getterFor(Bl),Rl=Object[Fl],Yl=$d.Symbol,Xl=Yl&&Yl[Fl],Kl=$d.RangeError,Gl=$d.TypeError,Zl=$d.QObject,Ql=gl.f,$l=yl.f,Jl=pl.f,tc=bl.f,ec=tl([].push),ic=xl("symbols"),oc=xl("op-symbols"),nc=xl("wks"),rc=!Zl||!Zl[Fl]||!Zl[Fl].findChild,Al=function(c,f,b){var w=Ql(Rl,f);w&&delete Rl[f],$l(c,f,b),w&&c!==Rl&&$l(Rl,f,w)},sc=el&&ol((function(){return 7!==cl($l({},"a",{get:function(){return $l(this||b,"a",{value:7}).a}})).a}))?Al:$l,jl=function(c,f){var b=ic[c]=cl(Xl);return zl(b,{type:Bl,tag:c,description:f}),el||(b.description=f),b},Ll=function(c,f,b){c===Rl&&Ll(oc,f,b),sl(c);var w=hl(f);return sl(b),nl(ic,w)?(b.enumerable?(nl(c,Il)&&c[Il][w]&&(c[Il][w]=!1),b=cl(b,{enumerable:ll(0,!1)})):(nl(c,Il)||$l(c,Il,ll(1,{})),c[Il][w]=!0),sc(c,w,b)):$l(c,w,b)},Hl=function(c,f){sl(c);var b=al(f),w=ul(b).concat(Ul(b));return Dl(w,(function(f){el&&!Jd(Wl,b,f)||Ll(c,f,b[f])})),c},Wl=function(c){var f=hl(c),w=Jd(tc,this||b,f);return!((this||b)===Rl&&nl(ic,f)&&!nl(oc,f))&&(!(w||!nl(this||b,f)||!nl(ic,f)||nl(this||b,Il)&&(this||b)[Il][f])||w)},Vl=function(c,f){var b=al(c),w=hl(f);if(b!==Rl||!nl(ic,w)||nl(oc,w)){var x=Ql(b,w);return!x||!nl(ic,w)||nl(b,Il)&&b[Il][w]||(x.enumerable=!0),x}},ql=function(c){var f=Jl(al(c)),b=[];return Dl(f,(function(c){nl(ic,c)||nl(_l,c)||ec(b,c)})),b},Ul=function(c){var f=c===Rl,b=Jl(f?oc:al(c)),w=[];return Dl(b,(function(c){!nl(ic,c)||f&&!nl(Rl,c)||ec(w,ic[c])})),w};il||(Yl=function(){if(rl(Xl,this||b))throw new Gl("Symbol is not a constructor");var c=arguments.length&&void 0!==arguments[0]?dl(arguments[0]):void 0,f=El(c),i=function(c){(this||b)===Rl&&Jd(i,oc,c),nl(this||b,Il)&&nl((this||b)[Il],f)&&((this||b)[Il][f]=!1);var w=ll(1,c);try{sc(this||b,f,w)}catch(c){if(!(c instanceof Kl))throw c;Al(this||b,f,w)}};return el&&rc&&sc(Rl,f,{configurable:!0,set:i}),jl(f,c)},wl(Xl=Yl[Fl],"toString",(function(){return Nl(this||b).tag})),wl(Yl,"withoutSetter",(function(c){return jl(El(c),c)})),bl.f=Wl,yl.f=Ll,ml.f=Hl,gl.f=Vl,fl.f=pl.f=ql,vl.f=Ul,Cl.f=function(c){return jl(Ol(c),c)},el&&kl(Xl,"description",{configurable:!0,get:function(){return Nl(this||b).description}})),Qd({global:!0,constructor:!0,wrap:!0,forced:!il,sham:!il},{Symbol:Yl}),Dl(ul(nc),(function(c){Tl(c)})),Qd({target:Bl,stat:!0,forced:!il},{useSetter:function(){rc=!0},useSimple:function(){rc=!1}}),Qd({target:"Object",stat:!0,forced:!il,sham:!el},{create:function(c,f){return void 0===f?cl(c):Hl(cl(c),f)},defineProperty:Ll,defineProperties:Hl,getOwnPropertyDescriptor:Vl}),Qd({target:"Object",stat:!0,forced:!il},{getOwnPropertyNames:ql}),Sl(),Ml(Yl,Bl),_l[Il]=!0;var ac=Rt&&!!Symbol.for&&!!Symbol.keyFor,hc=Mi,dc=at,lc=ge,cc=un,uc=le,fc=ac,pc=uc("string-to-symbol-registry"),vc=uc("symbol-to-string-registry");hc({target:"Symbol",stat:!0,forced:!fc},{for:function(c){var f=cc(c);if(lc(pc,f))return pc[f];var b=dc("Symbol")(f);return pc[f]=b,vc[b]=f,b}});var gc=Mi,yc=ge,mc=Ut,bc=Tt,wc=ac,xc=le("symbol-to-string-registry");gc({target:"Symbol",stat:!0,forced:!wc},{keyFor:function(c){if(!mc(c))throw new TypeError(bc(c)+" is not a symbol");if(yc(xc,c))return xc[c]}});var _c=qh,Ec=q,Oc=k,Cc=un,Tc=F([].push),Sc=Mi,Mc=at,Pc=M,Dc=$,Ic=F,Bc=s,Fc=q,Ac=Ut,Rc=Ao,kc=function(c){if(Ec(c))return c;if(_c(c)){for(var f=c.length,w=[],x=0;x<f;x++){var _=c[x];"string"==typeof _?Tc(w,_):"number"!=typeof _&&"Number"!==Oc(_)&&"String"!==Oc(_)||Tc(w,Cc(_))}var O=w.length,C=!0;return function(c,f){if(C)return C=!1,f;if(_c(this||b))return f;for(var x=0;x<O;x++)if(w[x]===c)return f}}},jc=Rt,Lc=String,Hc=Mc("JSON","stringify"),Wc=Ic(/./.exec),Vc=Ic("".charAt),qc=Ic("".charCodeAt),Uc=Ic("".replace),Yc=Ic(1..toString),Xc=/[\uD800-\uDFFF]/g,Kc=/^[\uD800-\uDBFF]$/,Gc=/^[\uDC00-\uDFFF]$/,Zc=!jc||Bc((function(){var c=Mc("Symbol")("stringify detection");return"[null]"!==Hc([c])||"{}"!==Hc({a:c})||"{}"!==Hc(Object(c))})),Qc=Bc((function(){return'"\\udf06\\ud834"'!==Hc("\udf06\ud834")||'"\\udead"'!==Hc("\udead")})),zc=function(c,f){var w=Rc(arguments),x=kc(f);if(Fc(x)||void 0!==c&&!Ac(c))return w[1]=function(c,f){if(Fc(x)&&(f=Dc(x,this||b,Lc(c),f)),!Ac(f))return f},Pc(Hc,null,w)},Nc=function(c,f,b){var w=Vc(b,f-1),x=Vc(b,f+1);return Wc(Kc,c)&&!Wc(Gc,x)||Wc(Gc,c)&&!Wc(Kc,w)?"\\u"+Yc(qc(c,0),16):c};Hc&&Sc({target:"JSON",stat:!0,arity:3,forced:Zc||Qc},{stringify:function(c,f,b){var w=Rc(arguments),x=Pc(Zc?zc:Hc,null,w);return Qc&&"string"==typeof x?Uc(x,Xc,Nc):x}});var $c=wo,Jc=$t;Mi({target:"Object",stat:!0,forced:!Rt||s((function(){$c.f(1)}))},{getOwnPropertySymbols:function(c){var f=$c.f;return f?f(Jc(c)):[]}}),_d("asyncIterator"),_d("hasInstance"),_d("isConcatSpreadable"),_d("iterator"),_d("match"),_d("matchAll"),_d("replace"),_d("search"),_d("species"),_d("split");var tu=Sd;_d("toPrimitive"),tu();var eu=at,iu=Gr;_d("toStringTag"),iu(eu("Symbol"),"Symbol"),_d("unscopables"),Gr(x.JSON,"JSON",!0);var ou=bt.Symbol,nu=fe,ru=pi.f,su=nu("metadata"),au=Function.prototype;void 0===au[su]&&ru(au,su,{value:null}),_d("asyncDispose"),_d("dispose"),_d("metadata");var hu=ou,du=F,lu=at("Symbol"),cu=lu.keyFor,uu=du(lu.prototype.valueOf),pu=lu.isRegisteredSymbol||function(c){try{return void 0!==cu(uu(c))}catch(c){return!1}};Mi({target:"Symbol",stat:!0},{isRegisteredSymbol:pu});for(var vu=le,yu=at,ku=F,xu=Ut,_u=fe,Eu=yu("Symbol"),Ou=Eu.isWellKnownSymbol,Cu=yu("Object","getOwnPropertyNames"),Tu=ku(Eu.prototype.valueOf),Su=vu("wks"),Mu=0,Pu=Cu(Eu),Du=Pu.length;Mu<Du;Mu++)try{var Iu=Pu[Mu];xu(Eu[Iu])&&_u(Iu)}catch(c){}var fu=function(c){if(Ou&&Ou(c))return!0;try{for(var f=Tu(c),b=0,w=Cu(Su),x=w.length;b<x;b++)if(Su[w[b]]==f)return!0}catch(c){}return!1};Mi({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:fu}),_d("matcher"),_d("observable"),Mi({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:pu}),Mi({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:fu}),_d("metadataKey"),_d("patternMatch"),_d("replaceAll");var Bu=o(hu),Fu=o(Bd.f("iterator"));function gu(c){return gu="function"==typeof Bu&&"symbol"==typeof Fu?function(c){return typeof c}:function(c){return c&&"function"==typeof Bu&&c.constructor===Bu&&c!==Bu.prototype?"symbol":typeof c},gu(c)}var zu=o(Bd.f("toPrimitive"));function mu(c){var f=function(c,f){if("object"!==gu(c)||null===c)return c;var b=c[zu];if(void 0!==b){var w=b.call(c,f||"default");if("object"!==gu(w))return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===f?String:Number)(c)}(c,"string");return"symbol"===gu(f)?f:String(f)}function bu(c,f){for(var b=0;b<f.length;b++){var w=f[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Wh(c,mu(w.key),w)}}function wu(c,f,b){return f&&bu(c.prototype,f),b&&bu(c,b),Wh(c,"prototype",{writable:!1}),c}Mi({target:"Array",stat:!0},{isArray:qh});var Au=bt.Array.isArray,Ru=o(Au);var ju=X,Lu=qh,Hu=TypeError,Wu=Object.getOwnPropertyDescriptor,Vu=ju&&!function(){if(void 0!==(this||b))return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(c){return c instanceof TypeError}}()?function(c,f){if(Lu(c)&&!Wu(c,"length").writable)throw new Hu("Cannot set read only .length");return c.length=f}:function(c,f){return c.length=f},qu=$t,Uu=Hi,Yu=Vu,Xu=Sh;Mi({target:"Array",proto:!0,arity:1,forced:s((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(c){return c instanceof TypeError}}()},{push:function(c){var f=qu(this||b),w=Uu(f),x=arguments.length;Xu(w+x);for(var _=0;_<x;_++)f[w]=arguments[_],w++;return Yu(f,w),w}});var Ku=zo("Array").push,Gu=_t,Zu=Ku,Qu=Array.prototype,Nu=function(c){var f=c.push;return c===Qu||Gu(Qu,c)&&f===Qu.push?Zu:f},$u=o(Nu);var Ju=Mi,tf=qh,ef=Ma,nf=mt,rf=Ai,sf=Hi,cf=Q,uf=va,ff=fe,pf=Ao,vf=Rh("slice"),yf=ff("species"),mf=Array,bf=Math.max;Ju({target:"Array",proto:!0,forced:!vf},{slice:function(c,f){var w,x,_,O=cf(this||b),C=sf(O),T=rf(c,C),S=rf(void 0===f?C:f,C);if(tf(O)&&(w=O.constructor,(ef(w)&&(w===mf||tf(w.prototype))||nf(w)&&null===(w=w[yf]))&&(w=void 0),w===mf||void 0===w))return pf(O,T,S);for(x=new(void 0===w?mf:w)(bf(S-T,0)),_=0;T<S;T++,_++)T in O&&uf(x,_,O[T]);return x.length=_,x}});var wf=zo("Array").slice,kf=_t,xf=wf,_f=Array.prototype,of=function(c){var f=c.slice;return c===_f||kf(_f,c)&&f===_f.slice?xf:f},Ef=of,Of=o(Ef),Cf=o(ah);function af(c,f){(null==f||f>c.length)&&(f=c.length);for(var b=0,w=new Array(f);b<f;b++)w[b]=c[b];return w}function hf(c,f){var b;if(c){if("string"==typeof c)return af(c,f);var w=Of(b=Object.prototype.toString.call(c)).call(b,8,-1);return"Object"===w&&c.constructor&&(w=c.constructor.name),"Map"===w||"Set"===w?Cf(c):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?af(c,f):void 0}}function df(c,f){return function(c){if(Ru(c))return c}(c)||function(c,f){var b=null==c?null:void 0!==Bu&&Ph(c)||c["@@iterator"];if(null!=b){var w,x,_,O,C=[],T=!0,S=!1;try{if(_=(b=b.call(c)).next,0===f){if(Object(b)!==b)return;T=!1}else for(;!(T=(w=_.call(b)).done)&&($u(C).call(C,w.value),C.length!==f);T=!0);}catch(c){S=!0,x=c}finally{try{if(!T&&null!=b.return&&(O=b.return(),Object(O)!==O))return}finally{if(S)throw x}}return C}}(c,f)||hf(c,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lf(c){return function(c){if(Ru(c))return af(c)}(c)||function(c){if(void 0!==Bu&&null!=Ph(c)||null!=c["@@iterator"])return Cf(c)}(c)||hf(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Tf=o(ou),Sf=zo("Array").concat,Mf=_t,Pf=Sf,If=Array.prototype,gf=function(c){var f=c.concat;return c===If||Mf(If,c)&&f===If.concat?Pf:f},Bf=o(gf),Ff=o(Ef),zf=at,Nf=gd,Af=wo,Rf=oi,jf=F([].concat),Lf=zf("Reflect","ownKeys")||function(c){var f=Nf.f(Rf(c)),b=Af.f;return b?jf(f,b(c)):f},Wf=o(Au),Vf=Zd.map;Mi({target:"Array",proto:!0,forced:!Rh("map")},{map:function(c){return Vf(this||b,c,arguments.length>1?arguments[1]:void 0)}});var qf=zo("Array").map,Uf=_t,Yf=qf,Xf=Array.prototype,Df=function(c){var f=c.map;return c===Xf||Uf(Xf,c)&&f===Xf.map?Yf:f},Kf=o(Df),Gf=$t,Qf=bo;Mi({target:"Object",stat:!0,forced:s((function(){Qf(1)}))},{keys:function(c){return Qf(Gf(c))}});var $f=o(bt.Object.keys),Jf=Mi,tp=Date,ep=F(tp.prototype.getTime);Jf({target:"Date",stat:!0},{now:function(){return ep(new tp)}});var ip=o(bt.Date.now),op=s,Hf=function(c,f){var b=[][c];return!!b&&op((function(){b.call(null,f||function(){return 1},1)}))},np=Zd.forEach,rp=Hf("forEach")?[].forEach:function(c){return np(this||b,c,arguments.length>1?arguments[1]:void 0)};Mi({target:"Array",proto:!0,forced:[].forEach!==rp},{forEach:rp});var sp=zo("Array").forEach,hp=Cn,dp=ge,lp=_t,up=sp,fp=Array.prototype,pp={DOMTokenList:!0,NodeList:!0},Zf=function(c){var f=c.forEach;return c===fp||lp(fp,c)&&f===fp.forEach||dp(pp,hp(c))?up:f},vp=o(Zf),gp=Mi,yp=qh,mp=F([].reverse),bp=[1,2];gp({target:"Array",proto:!0,forced:String(bp)===String(bp.reverse())},{reverse:function(){return yp(this||b)&&((this||b).length=(this||b).length),mp(this||b)}});var wp=zo("Array").reverse,kp=_t,xp=wp,_p=Array.prototype,ap=function(c){var f=c.reverse;return c===_p||kp(_p,c)&&f===_p.reverse?xp:f},Ep=o(ap),Op=Tt,Cp=TypeError,cp=function(c,f){if(!delete c[f])throw new Cp("Cannot delete property "+Op(f)+" of "+Op(c))},Tp=Mi,Sp=$t,Pp=Ai,Dp=Bi,Ip=Hi,Bp=Vu,Fp=Sh,zp=Fh,Ap=va,Rp=cp,jp=Rh("splice"),Hp=Math.max,Wp=Math.min;Tp({target:"Array",proto:!0,forced:!jp},{splice:function(c,f){var w,x,_,O,C,T,S=Sp(this||b),M=Ip(S),P=Pp(c,M),D=arguments.length;for(0===D?w=x=0:1===D?(w=0,x=M-P):(w=D-2,x=Wp(Hp(Dp(f),0),M-P)),Fp(M+w-x),_=zp(S,x),O=0;O<x;O++)(C=P+O)in S&&Ap(_,O,S[C]);if(_.length=x,w<x){for(O=P;O<M-x;O++)T=O+w,(C=O+x)in S?S[T]=S[C]:Rp(S,T);for(O=M;O>M-x+w;O--)Rp(S,O-1)}else if(w>x)for(O=M-x;O>P;O--)T=O+w-1,(C=O+x-1)in S?S[T]=S[C]:Rp(S,T);for(O=0;O<w;O++)S[O+P]=arguments[O+2];return Bp(S,M-x+w),_}});var qp=zo("Array").splice,Up=_t,Yp=qp,Xp=Array.prototype,Mp=function(c){var f=c.splice;return c===Xp||Up(Xp,c)&&f===Xp.splice?Yp:f},Kp=o(Mp),Gp=ho.includes;Mi({target:"Array",proto:!0,forced:s((function(){return!Array(1).includes()}))},{includes:function(c){return Gp(this||b,c,arguments.length>1?arguments[1]:void 0)}});var Qp=zo("Array").includes,$p=mt,Jp=k,tv=fe("match"),Np=function(c){var f;return $p(c)&&(void 0!==(f=c[tv])?!!f:"RegExp"===Jp(c))},ev=TypeError,iv=fe("match"),ov=Mi,Lp=function(c){if(Np(c))throw new ev("The method doesn't accept regular expressions");return c},nv=G,rv=un,Vp=function(c){var f=/./;try{"/./"[c](f)}catch(b){try{return f[iv]=!1,"/./"[c](f)}catch(c){}}return!1},sv=F("".indexOf);ov({target:"String",proto:!0,forced:!Vp("includes")},{includes:function(c){return!!~sv(rv(nv(this||b)),rv(Lp(c)),arguments.length>1?arguments[1]:void 0)}});var av=zo("String").includes,hv=_t,lv=Qp,cv=av,uv=Array.prototype,fv=String.prototype,Zp=function(c){var f=c.includes;return c===uv||hv(uv,c)&&f===uv.includes?lv:"string"==typeof c||c===fv||hv(fv,c)&&f===fv.includes?cv:f},pv=o(Zp),vv=$t,gv=qr,yv=Nr;Mi({target:"Object",stat:!0,forced:s((function(){gv(1)})),sham:!yv},{getPrototypeOf:function(c){return gv(vv(c))}});var bv=bt.Object.getPrototypeOf,wv=o(bv),kv=Zd.filter;Mi({target:"Array",proto:!0,forced:!Rh("filter")},{filter:function(c){return kv(this||b,c,arguments.length>1?arguments[1]:void 0)}});var xv=zo("Array").filter,_v=_t,Ev=xv,Ov=Array.prototype,dv=function(c){var f=c.filter;return c===Ov||_v(Ov,c)&&f===Ov.filter?Ev:f},Cv=o(dv),Tv="\t\n\v\f\r                　\u2028\u2029\ufeff",Sv=G,Mv=un,Pv=Tv,Dv=F("".replace),Iv=RegExp("^["+Pv+"]+"),Bv=RegExp("(^|[^"+Pv+"])["+Pv+"]+$"),mv=function(c){return function(f){var b=Mv(Sv(f));return 1&c&&(b=Dv(b,Iv,"")),2&c&&(b=Dv(b,Bv,"$1")),b}},Fv={start:mv(1),end:mv(2),trim:mv(3)},zv=x,Nv=s,Av=F,Rv=un,jv=Fv.trim,Lv=Tv,Hv=zv.parseInt,Vv=zv.Symbol,qv=Vv&&Vv.iterator,Yv=/^[+-]?0x/i,Xv=Av(Yv.exec),Kv=8!==Hv(Lv+"08")||22!==Hv(Lv+"0x16")||qv&&!Nv((function(){Hv(Object(qv))}))?function(c,f){var b=jv(Rv(c));return Hv(b,f>>>0||(Xv(Yv,b)?16:10))}:Hv;Mi({global:!0,forced:parseInt!==Kv},{parseInt:Kv});var Zv=o(bt.parseInt),Qv=Mi,$v=ho.indexOf,Jv=Hf,tg=E([].indexOf),eg=!!tg&&1/tg([1],1,-0)<0;Qv({target:"Array",proto:!0,forced:eg||!Jv("indexOf")},{indexOf:function(c){var f=arguments.length>1?arguments[1]:void 0;return eg?tg(this||b,c,f)||0:$v(this||b,c,f)}});var ig=zo("Array").indexOf,og=_t,ng=ig,sg=Array.prototype,Wv=function(c){var f=c.indexOf;return c===sg||og(sg,c)&&f===sg.indexOf?ng:f},ag=o(Wv);Mi({target:"Object",stat:!0,sham:!X},{create:zr});var dg=bt.Object,Uv=function(c,f){return dg.create(c,f)},lg=o(Uv),cg=bt,ug=M;cg.JSON||(cg.JSON={stringify:JSON.stringify});var Gv=function(c,f,b){return ug(cg.JSON.stringify,null,arguments)},fg=o(Gv),pg="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,vg=TypeError,gg=x,yg=M,mg=q,wg=pg,kg=Et,xg=Ao,rg=function(c,f){if(c<f)throw new vg("Not enough arguments");return c},_g=gg.Function,Eg=/MSIE .\./.test(kg)||wg&&function(){var c=gg.Bun.version.split(".");return c.length<3||"0"===c[0]&&(c[1]<3||"3"===c[1]&&"0"===c[2])}(),hg=function(c,f){var w=f?2:1;return Eg?function(x,_){var O=rg(arguments.length,1)>w,C=mg(x)?x:_g(x),T=O?xg(arguments,w):[],S=O?function(){yg(C,this||b,T)}:C;return f?c(S,_):c(S)}:c},Cg=Mi,Pg=x,Dg=hg(Pg.setInterval,!0);Cg({global:!0,bind:!0,forced:Pg.setInterval!==Dg},{setInterval:Dg});var Ig=Mi,Bg=x,Fg=hg(Bg.setTimeout,!0);Ig({global:!0,bind:!0,forced:Bg.setTimeout!==Fg},{setTimeout:Fg});var zg=o(bt.setTimeout),Ng=$t,Rg=Ai,jg=Hi,bg=function(c){for(var f=Ng(this||b),w=jg(f),x=arguments.length,_=Rg(x>1?arguments[1]:void 0,w),O=x>2?arguments[2]:void 0,C=void 0===O?w:Rg(O,w);C>_;)f[_++]=c;return f};Mi({target:"Array",proto:!0},{fill:bg});var Lg,Hg=zo("Array").fill,Wg=_t,Vg=Hg,qg=Array.prototype,Og=function(c){var f=c.fill;return c===qg||Wg(qg,c)&&f===qg.fill?Vg:f},Ug=o(Og);function Sg(){return Sg=Object.assign||function(c){for(var f=1;f<arguments.length;f++){var b=arguments[f];for(var w in b)Object.prototype.hasOwnProperty.call(b,w)&&(c[w]=b[w])}return c},Sg.apply(this||b,arguments)}function Tg(c,f){c.prototype=Object.create(f.prototype),c.prototype.constructor=c,c.__proto__=f}function Mg(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}Lg="function"!=typeof Object.assign?function(c){if(null==c)throw new TypeError("Cannot convert undefined or null to object");for(var f=Object(c),b=1;b<arguments.length;b++){var w=arguments[b];if(null!=w)for(var x in w)w.hasOwnProperty(x)&&(f[x]=w[x])}return f}:Object.assign;var Yg,Xg=Lg,Kg=["","webkit","Moz","MS","ms","o"],Gg="undefined"==typeof document?{style:{}}:document.createElement("div"),Zg=Math.round,Qg=Math.abs,$g=Date.now;function Ag(c,f){for(var b,w,x=f[0].toUpperCase()+f.slice(1),_=0;_<Kg.length;){if((w=(b=Kg[_])?b+x:f)in c)return w;_++}}Yg="undefined"==typeof window?{}:window;var Jg=Ag(Gg.style,"touchAction"),ty=void 0!==Jg;var ey="compute",iy="auto",oy="manipulation",ny="none",ry="pan-x",sy="pan-y",ay=function(){if(!ty)return!1;var c={},f=Yg.CSS&&Yg.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(b){return c[b]=!f||Yg.CSS.supports("touch-action",b)})),c}(),hy="ontouchstart"in Yg,dy=void 0!==Ag(Yg,"PointerEvent"),ly=hy&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),cy="touch",vy="mouse",My=25,Dy=1,Iy=4,By=8,Fy=1,zy=2,Ry=4,jy=8,Hy=16,Wy=zy|Ry,Vy=jy|Hy,Xy=Wy|Vy,Gy=["x","y"],$y=["clientX","clientY"];function uy(c,f,b){var w;if(c)if(c.forEach)c.forEach(f,b);else if(void 0!==c.length)for(w=0;w<c.length;)f.call(b,c[w],w,c),w++;else for(w in c)c.hasOwnProperty(w)&&f.call(b,c[w],w,c)}function fy(c,f){return"function"==typeof c?c.apply(f&&f[0]||void 0,f):c}function py(c,f){return c.indexOf(f)>-1}var Jy=function(){function t(c,f){(this||b).manager=c,this.set(f)}var c=t.prototype;return c.set=function(c){c===ey&&(c=this.compute()),ty&&(this||b).manager.element.style&&ay[c]&&((this||b).manager.element.style[Jg]=c),(this||b).actions=c.toLowerCase().trim()},c.update=function(){this.set((this||b).manager.options.touchAction)},c.compute=function(){var c=[];return uy((this||b).manager.recognizers,(function(f){fy(f.options.enable,[f])&&(c=c.concat(f.getTouchAction()))})),function(c){if(py(c,ny))return ny;var f=py(c,ry),b=py(c,sy);return f&&b?ny:f||b?f?ry:sy:py(c,oy)?oy:iy}(c.join(" "))},c.preventDefaults=function(c){var f=c.srcEvent,w=c.offsetDirection;if((this||b).manager.session.prevented)f.preventDefault();else{var x=(this||b).actions,_=py(x,ny)&&!ay[ny],O=py(x,sy)&&!ay[sy],C=py(x,ry)&&!ay[ry];if(_){var T=1===c.pointers.length,S=c.distance<2,M=c.deltaTime<250;if(T&&S&&M)return}if(!C||!O)return _||O&&w&Wy||C&&w&Vy?this.preventSrc(f):void 0}},c.preventSrc=function(c){(this||b).manager.session.prevented=!0,c.preventDefault()},t}();function gy(c,f){for(;c;){if(c===f)return!0;c=c.parentNode}return!1}function yy(c){var f=c.length;if(1===f)return{x:Zg(c[0].clientX),y:Zg(c[0].clientY)};for(var b=0,w=0,x=0;x<f;)b+=c[x].clientX,w+=c[x].clientY,x++;return{x:Zg(b/f),y:Zg(w/f)}}function my(c){for(var f=[],b=0;b<c.pointers.length;)f[b]={clientX:Zg(c.pointers[b].clientX),clientY:Zg(c.pointers[b].clientY)},b++;return{timeStamp:$g(),pointers:f,center:yy(f),deltaX:c.deltaX,deltaY:c.deltaY}}function by(c,f,b){b||(b=Gy);var w=f[b[0]]-c[b[0]],x=f[b[1]]-c[b[1]];return Math.sqrt(w*w+x*x)}function wy(c,f,b){b||(b=Gy);var w=f[b[0]]-c[b[0]],x=f[b[1]]-c[b[1]];return 180*Math.atan2(x,w)/Math.PI}function ky(c,f){return c===f?Fy:Qg(c)>=Qg(f)?c<0?zy:Ry:f<0?jy:Hy}function _y(c,f,b){return{x:f/c||0,y:b/c||0}}function xy(c,f){var b=c.session,w=f.pointers,x=w.length;b.firstInput||(b.firstInput=my(f)),x>1&&!b.firstMultiple?b.firstMultiple=my(f):1===x&&(b.firstMultiple=!1);var _=b.firstInput,O=b.firstMultiple,C=O?O.center:_.center,T=f.center=yy(w);f.timeStamp=$g(),f.deltaTime=f.timeStamp-_.timeStamp,f.angle=wy(C,T),f.distance=by(C,T),function(c,f){var b=f.center,w=c.offsetDelta||{},x=c.prevDelta||{},_=c.prevInput||{};f.eventType!==Dy&&_.eventType!==Iy||(x=c.prevDelta={x:_.deltaX||0,y:_.deltaY||0},w=c.offsetDelta={x:b.x,y:b.y}),f.deltaX=x.x+(b.x-w.x),f.deltaY=x.y+(b.y-w.y)}(b,f),f.offsetDirection=ky(f.deltaX,f.deltaY);var S,M,P=_y(f.deltaTime,f.deltaX,f.deltaY);f.overallVelocityX=P.x,f.overallVelocityY=P.y,f.overallVelocity=Qg(P.x)>Qg(P.y)?P.x:P.y,f.scale=O?(S=O.pointers,by((M=w)[0],M[1],$y)/by(S[0],S[1],$y)):1,f.rotation=O?function(c,f){return wy(f[1],f[0],$y)+wy(c[1],c[0],$y)}(O.pointers,w):0,f.maxPointers=b.prevInput?f.pointers.length>b.prevInput.maxPointers?f.pointers.length:b.prevInput.maxPointers:f.pointers.length,function(c,f){var b,w,x,_,O=c.lastInterval||f,C=f.timeStamp-O.timeStamp;if(f.eventType!==By&&(C>My||void 0===O.velocity)){var T=f.deltaX-O.deltaX,S=f.deltaY-O.deltaY,M=_y(C,T,S);w=M.x,x=M.y,b=Qg(M.x)>Qg(M.y)?M.x:M.y,_=ky(T,S),c.lastInterval=f}else b=O.velocity,w=O.velocityX,x=O.velocityY,_=O.direction;f.velocity=b,f.velocityX=w,f.velocityY=x,f.direction=_}(b,f);var D,I=c.element,B=f.srcEvent;gy(D=B.composedPath?B.composedPath()[0]:B.path?B.path[0]:B.target,I)&&(I=D),f.target=I}function Ey(c,f,b){var w=b.pointers.length,x=b.changedPointers.length,_=f&Dy&&w-x==0,O=f&(Iy|By)&&w-x==0;b.isFirst=!!_,b.isFinal=!!O,_&&(c.session={}),b.eventType=f,xy(c,b),c.emit("hammer.input",b),c.recognize(b),c.session.prevInput=b}function Oy(c){return c.trim().split(/\s+/g)}function Cy(c,f,b){uy(Oy(f),(function(f){c.addEventListener(f,b,!1)}))}function Sy(c,f,b){uy(Oy(f),(function(f){c.removeEventListener(f,b,!1)}))}function Ty(c){var f=c.ownerDocument||c;return f.defaultView||f.parentWindow||window}var tm=function(){function t(c,f){var w=this||b;(this||b).manager=c,(this||b).callback=f,(this||b).element=c.element,(this||b).target=c.options.inputTarget,(this||b).domHandler=function(f){fy(c.options.enable,[c])&&w.handler(f)},this.init()}var c=t.prototype;return c.handler=function(){},c.init=function(){(this||b).evEl&&Cy((this||b).element,(this||b).evEl,(this||b).domHandler),(this||b).evTarget&&Cy((this||b).target,(this||b).evTarget,(this||b).domHandler),(this||b).evWin&&Cy(Ty((this||b).element),(this||b).evWin,(this||b).domHandler)},c.destroy=function(){(this||b).evEl&&Sy((this||b).element,(this||b).evEl,(this||b).domHandler),(this||b).evTarget&&Sy((this||b).target,(this||b).evTarget,(this||b).domHandler),(this||b).evWin&&Sy(Ty((this||b).element),(this||b).evWin,(this||b).domHandler)},t}();function Py(c,f,b){if(c.indexOf&&!b)return c.indexOf(f);for(var w=0;w<c.length;){if(b&&c[w][b]==f||!b&&c[w]===f)return w;w++}return-1}var em={pointerdown:Dy,pointermove:2,pointerup:Iy,pointercancel:By,pointerout:By},om={2:cy,3:"pen",4:vy,5:"kinect"},nm="pointerdown",rm="pointermove pointerup pointercancel";Yg.MSPointerEvent&&!Yg.PointerEvent&&(nm="MSPointerDown",rm="MSPointerMove MSPointerUp MSPointerCancel");var sm=function(c){function e(){var f,w=e.prototype;return w.evEl=nm,w.evWin=rm,(f=c.apply(this||b,arguments)||this||b).store=f.manager.session.pointerEvents=[],f}return Tg(e,c),e.prototype.handler=function(c){var f=(this||b).store,w=!1,x=c.type.toLowerCase().replace("ms",""),_=em[x],O=om[c.pointerType]||c.pointerType,C=O===cy,T=Py(f,c.pointerId,"pointerId");_&Dy&&(0===c.button||C)?T<0&&(f.push(c),T=f.length-1):_&(Iy|By)&&(w=!0),T<0||(f[T]=c,this.callback((this||b).manager,_,{pointers:f,changedPointers:[c],pointerType:O,srcEvent:c}),w&&f.splice(T,1))},e}(tm);function Ny(c){return Array.prototype.slice.call(c,0)}function Ay(c,f,b){for(var w=[],x=[],_=0;_<c.length;){var O=f?c[_][f]:c[_];Py(x,O)<0&&w.push(c[_]),x[_]=O,_++}return b&&(w=f?w.sort((function(c,b){return c[f]>b[f]})):w.sort()),w}var am={touchstart:Dy,touchmove:2,touchend:Iy,touchcancel:By},hm=function(c){function e(){var f;return e.prototype.evTarget="touchstart touchmove touchend touchcancel",(f=c.apply(this||b,arguments)||this||b).targetIds={},f}return Tg(e,c),e.prototype.handler=function(c){var f=am[c.type],w=Ly.call(this||b,c,f);w&&this.callback((this||b).manager,f,{pointers:w[0],changedPointers:w[1],pointerType:cy,srcEvent:c})},e}(tm);function Ly(c,f){var w,x,_=Ny(c.touches),O=(this||b).targetIds;if(f&(2|Dy)&&1===_.length)return O[_[0].identifier]=!0,[_,_];var C=Ny(c.changedTouches),T=[],S=(this||b).target;if(x=_.filter((function(c){return gy(c.target,S)})),f===Dy)for(w=0;w<x.length;)O[x[w].identifier]=!0,w++;for(w=0;w<C.length;)O[C[w].identifier]&&T.push(C[w]),f&(Iy|By)&&delete O[C[w].identifier],w++;return T.length?[Ay(x.concat(T),"identifier",!0),T]:void 0}var dm={mousedown:Dy,mousemove:2,mouseup:Iy},cm=function(c){function e(){var f,w=e.prototype;return w.evEl="mousedown",w.evWin="mousemove mouseup",(f=c.apply(this||b,arguments)||this||b).pressed=!1,f}return Tg(e,c),e.prototype.handler=function(c){var f=dm[c.type];f&Dy&&0===c.button&&((this||b).pressed=!0),2&f&&1!==c.which&&(f=Iy),(this||b).pressed&&(f&Iy&&((this||b).pressed=!1),this.callback((this||b).manager,f,{pointers:[c],changedPointers:[c],pointerType:vy,srcEvent:c}))},e}(tm),um=2500;function qy(c){var f=c.changedPointers[0];if(f.identifier===(this||b).primaryTouch){var w={x:f.clientX,y:f.clientY},x=(this||b).lastTouches;(this||b).lastTouches.push(w);setTimeout((function(){var c=x.indexOf(w);c>-1&&x.splice(c,1)}),um)}}function Uy(c,f){c&Dy?((this||b).primaryTouch=f.changedPointers[0].identifier,qy.call(this||b,f)):c&(Iy|By)&&qy.call(this||b,f)}function Yy(c){for(var f=c.srcEvent.clientX,w=c.srcEvent.clientY,x=0;x<(this||b).lastTouches.length;x++){var _=(this||b).lastTouches[x],O=Math.abs(f-_.x),C=Math.abs(w-_.y);if(O<=25&&C<=25)return!0}return!1}var fm=function(){return function(c){function e(f,w){var x;return(x=c.call(this||b,f,w)||this||b).handler=function(c,f,b){var w=b.pointerType===cy,_=b.pointerType===vy;if(!(_&&b.sourceCapabilities&&b.sourceCapabilities.firesTouchEvents)){if(w)Uy.call(Mg(Mg(x)),f,b);else if(_&&Yy.call(Mg(Mg(x)),b))return;x.callback(c,f,b)}},x.touch=new hm(x.manager,x.handler),x.mouse=new cm(x.manager,x.handler),x.primaryTouch=null,x.lastTouches=[],x}return Tg(e,c),e.prototype.destroy=function(){(this||b).touch.destroy(),(this||b).mouse.destroy()},e}(tm)}();function Ky(c,f,b){return!!Array.isArray(c)&&(uy(c,b[f],b),!0)}var gm=32,ym=1;function Zy(c,f){var b=f.manager;return b?b.get(c):c}function Qy(c){return 16&c?"cancel":8&c?"end":4&c?"move":2&c?"start":""}var wm=function(){function t(c){void 0===c&&(c={}),(this||b).options=Sg({enable:!0},c),(this||b).id=ym++,(this||b).manager=null,(this||b).state=1,(this||b).simultaneous={},(this||b).requireFail=[]}var c=t.prototype;return c.set=function(c){return Xg((this||b).options,c),(this||b).manager&&(this||b).manager.touchAction.update(),this||b},c.recognizeWith=function(c){if(Ky(c,"recognizeWith",this||b))return this||b;var f=(this||b).simultaneous;return f[(c=Zy(c,this||b)).id]||(f[c.id]=c,c.recognizeWith(this||b)),this||b},c.dropRecognizeWith=function(c){return Ky(c,"dropRecognizeWith",this||b)||(c=Zy(c,this||b),delete(this||b).simultaneous[c.id]),this||b},c.requireFailure=function(c){if(Ky(c,"requireFailure",this||b))return this||b;var f=(this||b).requireFail;return-1===Py(f,c=Zy(c,this||b))&&(f.push(c),c.requireFailure(this||b)),this||b},c.dropRequireFailure=function(c){if(Ky(c,"dropRequireFailure",this||b))return this||b;c=Zy(c,this||b);var f=Py((this||b).requireFail,c);return f>-1&&(this||b).requireFail.splice(f,1),this||b},c.hasRequireFailures=function(){return(this||b).requireFail.length>0},c.canRecognizeWith=function(c){return!!(this||b).simultaneous[c.id]},c.emit=function(c){var f=this||b,w=(this||b).state;function o(b){f.manager.emit(b,c)}w<8&&o(f.options.event+Qy(w)),o(f.options.event),c.additionalEvent&&o(c.additionalEvent),w>=8&&o(f.options.event+Qy(w))},c.tryEmit=function(c){if(this.canEmit())return this.emit(c);(this||b).state=gm},c.canEmit=function(){for(var c=0;c<(this||b).requireFail.length;){if(!(33&(this||b).requireFail[c].state))return!1;c++}return!0},c.recognize=function(c){var f=Xg({},c);if(!fy((this||b).options.enable,[this||b,f]))return this.reset(),void((this||b).state=gm);56&(this||b).state&&((this||b).state=1),(this||b).state=this.process(f),30&(this||b).state&&this.tryEmit(f)},c.process=function(c){},c.getTouchAction=function(){},c.reset=function(){},t}(),km=function(c){function e(f){var w;return void 0===f&&(f={}),(w=c.call(this||b,Sg({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},f))||this||b).pTime=!1,w.pCenter=!1,w._timer=null,w._input=null,w.count=0,w}Tg(e,c);var f=e.prototype;return f.getTouchAction=function(){return[oy]},f.process=function(c){var f=this||b,w=(this||b).options,x=c.pointers.length===w.pointers,_=c.distance<w.threshold,O=c.deltaTime<w.time;if(this.reset(),c.eventType&Dy&&0===(this||b).count)return this.failTimeout();if(_&&O&&x){if(c.eventType!==Iy)return this.failTimeout();var C=!(this||b).pTime||c.timeStamp-(this||b).pTime<w.interval,T=!(this||b).pCenter||by((this||b).pCenter,c.center)<w.posThreshold;if((this||b).pTime=c.timeStamp,(this||b).pCenter=c.center,T&&C?(this||b).count+=1:(this||b).count=1,(this||b)._input=c,0===(this||b).count%w.taps)return this.hasRequireFailures()?((this||b)._timer=setTimeout((function(){f.state=8,f.tryEmit()}),w.interval),2):8}return gm},f.failTimeout=function(){var c=this||b;return(this||b)._timer=setTimeout((function(){c.state=gm}),(this||b).options.interval),gm},f.reset=function(){clearTimeout((this||b)._timer)},f.emit=function(){8===(this||b).state&&((this||b)._input.tapCount=(this||b).count,(this||b).manager.emit((this||b).options.event,(this||b)._input))},e}(wm),Om=function(c){function e(f){return void 0===f&&(f={}),c.call(this||b,Sg({pointers:1},f))||this||b}Tg(e,c);var f=e.prototype;return f.attrTest=function(c){var f=(this||b).options.pointers;return 0===f||c.pointers.length===f},f.process=function(c){var f=(this||b).state,w=c.eventType,x=6&f,_=this.attrTest(c);return x&&(w&By||!_)?16|f:x||_?w&Iy?8|f:2&f?4|f:2:gm},e}(wm);function im(c){return c===Hy?"down":c===jy?"up":c===zy?"left":c===Ry?"right":""}var Tm=function(c){function e(f){var w;return void 0===f&&(f={}),(w=c.call(this||b,Sg({event:"pan",threshold:10,pointers:1,direction:Xy},f))||this||b).pX=null,w.pY=null,w}Tg(e,c);var f=e.prototype;return f.getTouchAction=function(){var c=(this||b).options.direction,f=[];return c&Wy&&f.push(sy),c&Vy&&f.push(ry),f},f.directionTest=function(c){var f=(this||b).options,w=!0,x=c.distance,_=c.direction,O=c.deltaX,C=c.deltaY;return _&f.direction||(f.direction&Wy?(_=0===O?Fy:O<0?zy:Ry,w=O!==(this||b).pX,x=Math.abs(c.deltaX)):(_=0===C?Fy:C<0?jy:Hy,w=C!==(this||b).pY,x=Math.abs(c.deltaY))),c.direction=_,w&&x>f.threshold&&_&f.direction},f.attrTest=function(c){return Om.prototype.attrTest.call(this||b,c)&&(2&(this||b).state||!(2&(this||b).state)&&this.directionTest(c))},f.emit=function(f){(this||b).pX=f.deltaX,(this||b).pY=f.deltaY;var w=im(f.direction);w&&(f.additionalEvent=(this||b).options.event+w),c.prototype.emit.call(this||b,f)},e}(Om),Sm=function(c){function e(f){return void 0===f&&(f={}),c.call(this||b,Sg({event:"swipe",threshold:10,velocity:.3,direction:Wy|Vy,pointers:1},f))||this||b}Tg(e,c);var f=e.prototype;return f.getTouchAction=function(){return Tm.prototype.getTouchAction.call(this||b)},f.attrTest=function(f){var w,x=(this||b).options.direction;return x&(Wy|Vy)?w=f.overallVelocity:x&Wy?w=f.overallVelocityX:x&Vy&&(w=f.overallVelocityY),c.prototype.attrTest.call(this||b,f)&&x&f.offsetDirection&&f.distance>(this||b).options.threshold&&f.maxPointers===(this||b).options.pointers&&Qg(w)>(this||b).options.velocity&&f.eventType&Iy},f.emit=function(c){var f=im(c.offsetDirection);f&&(this||b).manager.emit((this||b).options.event+f,c),(this||b).manager.emit((this||b).options.event,c)},e}(Om),Mm=function(c){function e(f){return void 0===f&&(f={}),c.call(this||b,Sg({event:"pinch",threshold:0,pointers:2},f))||this||b}Tg(e,c);var f=e.prototype;return f.getTouchAction=function(){return[ny]},f.attrTest=function(f){return c.prototype.attrTest.call(this||b,f)&&(Math.abs(f.scale-1)>(this||b).options.threshold||2&(this||b).state)},f.emit=function(f){if(1!==f.scale){var w=f.scale<1?"in":"out";f.additionalEvent=(this||b).options.event+w}c.prototype.emit.call(this||b,f)},e}(Om),Pm=function(c){function e(f){return void 0===f&&(f={}),c.call(this||b,Sg({event:"rotate",threshold:0,pointers:2},f))||this||b}Tg(e,c);var f=e.prototype;return f.getTouchAction=function(){return[ny]},f.attrTest=function(f){return c.prototype.attrTest.call(this||b,f)&&(Math.abs(f.rotation)>(this||b).options.threshold||2&(this||b).state)},e}(Om),Jm=function(c){function e(f){var w;return void 0===f&&(f={}),(w=c.call(this||b,Sg({event:"press",pointers:1,time:251,threshold:9},f))||this||b)._timer=null,w._input=null,w}Tg(e,c);var f=e.prototype;return f.getTouchAction=function(){return[iy]},f.process=function(c){var f=this||b,w=(this||b).options,x=c.pointers.length===w.pointers,_=c.distance<w.threshold,O=c.deltaTime>w.time;if((this||b)._input=c,!_||!x||c.eventType&(Iy|By)&&!O)this.reset();else if(c.eventType&Dy)this.reset(),(this||b)._timer=setTimeout((function(){f.state=8,f.tryEmit()}),w.time);else if(c.eventType&Iy)return 8;return gm},f.reset=function(){clearTimeout((this||b)._timer)},f.emit=function(c){8===(this||b).state&&(c&&c.eventType&Iy?(this||b).manager.emit((this||b).options.event+"up",c):((this||b)._input.timeStamp=$g(),(this||b).manager.emit((this||b).options.event,(this||b)._input)))},e}(wm),eb={domEvents:!1,touchAction:ey,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ib=[[Pm,{enable:!1}],[Mm,{enable:!1},["rotate"]],[Sm,{direction:Wy}],[Tm,{direction:Wy},["swipe"]],[km],[km,{event:"doubletap",taps:2},["tap"]],[Jm]];function lm(c,f){var b,w=c.element;w.style&&(uy(c.options.cssProps,(function(x,_){b=Ag(w.style,_),f?(c.oldCssProps[b]=w.style[b],w.style[b]=x):w.style[b]=c.oldCssProps[b]||""})),f||(c.oldCssProps={}))}var nb=function(){function t(c,f){var w,x=this||b;(this||b).options=Xg({},eb,f||{}),(this||b).options.inputTarget=(this||b).options.inputTarget||c,(this||b).handlers={},(this||b).session={},(this||b).recognizers=[],(this||b).oldCssProps={},(this||b).element=c,(this||b).input=new((w=this||b).options.inputClass||(dy?sm:ly?hm:hy?fm:cm))(w,Ey),(this||b).touchAction=new Jy(this||b,(this||b).options.touchAction),lm(this||b,!0),uy((this||b).options.recognizers,(function(c){var f=x.add(new c[0](c[1]));c[2]&&f.recognizeWith(c[2]),c[3]&&f.requireFailure(c[3])}),this||b)}var c=t.prototype;return c.set=function(c){return Xg((this||b).options,c),c.touchAction&&(this||b).touchAction.update(),c.inputTarget&&((this||b).input.destroy(),(this||b).input.target=c.inputTarget,(this||b).input.init()),this||b},c.stop=function(c){(this||b).session.stopped=c?2:1},c.recognize=function(c){var f=(this||b).session;if(!f.stopped){var w;(this||b).touchAction.preventDefaults(c);var x=(this||b).recognizers,_=f.curRecognizer;(!_||_&&8&_.state)&&(f.curRecognizer=null,_=null);for(var O=0;O<x.length;)w=x[O],2===f.stopped||_&&w!==_&&!w.canRecognizeWith(_)?w.reset():w.recognize(c),!_&&14&w.state&&(f.curRecognizer=w,_=w),O++}},c.get=function(c){if(c instanceof wm)return c;for(var f=(this||b).recognizers,w=0;w<f.length;w++)if(f[w].options.event===c)return f[w];return null},c.add=function(c){if(Ky(c,"add",this||b))return this||b;var f=this.get(c.options.event);return f&&this.remove(f),(this||b).recognizers.push(c),c.manager=this||b,(this||b).touchAction.update(),c},c.remove=function(c){if(Ky(c,"remove",this||b))return this||b;var f=this.get(c);if(c){var w=(this||b).recognizers,x=Py(w,f);-1!==x&&(w.splice(x,1),(this||b).touchAction.update())}return this||b},c.on=function(c,f){if(void 0===c||void 0===f)return this||b;var w=(this||b).handlers;return uy(Oy(c),(function(c){w[c]=w[c]||[],w[c].push(f)})),this||b},c.off=function(c,f){if(void 0===c)return this||b;var w=(this||b).handlers;return uy(Oy(c),(function(c){f?w[c]&&w[c].splice(Py(w[c],f),1):delete w[c]})),this||b},c.emit=function(c,f){(this||b).options.domEvents&&function(c,f){var b=document.createEvent("Event");b.initEvent(c,!0,!0),b.gesture=f,f.target.dispatchEvent(b)}(c,f);var w=(this||b).handlers[c]&&(this||b).handlers[c].slice();if(w&&w.length){f.type=c,f.preventDefault=function(){f.srcEvent.preventDefault()};for(var x=0;x<w.length;)w[x](f),x++}},c.destroy=function(){(this||b).element&&lm(this||b,!1),(this||b).handlers={},(this||b).session={},(this||b).input.destroy(),(this||b).element=null},t}(),rb={touchstart:Dy,touchmove:2,touchend:Iy,touchcancel:By},sb=function(c){function e(){var f,w=e.prototype;return w.evTarget="touchstart",w.evWin="touchstart touchmove touchend touchcancel",(f=c.apply(this||b,arguments)||this||b).started=!1,f}return Tg(e,c),e.prototype.handler=function(c){var f=rb[c.type];if(f===Dy&&((this||b).started=!0),(this||b).started){var w=pm.call(this||b,c,f);f&(Iy|By)&&w[0].length-w[1].length==0&&((this||b).started=!1),this.callback((this||b).manager,f,{pointers:w[0],changedPointers:w[1],pointerType:cy,srcEvent:c})}},e}(tm);function pm(c,f){var b=Ny(c.touches),w=Ny(c.changedTouches);return f&(Iy|By)&&(b=Ay(b.concat(w),"identifier",!0)),[b,w]}function vm(c,f,w){var x="DEPRECATED METHOD: "+f+"\n"+w+" AT \n";return function(){var f=new Error("get-stack-trace"),w=f&&f.stack?f.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",_=window.console&&(window.console.warn||window.console.log);return _&&_.call(window.console,x,w),c.apply(this||b,arguments)}}var ab=vm((function(c,f,b){for(var w=Object.keys(f),x=0;x<w.length;)(!b||b&&void 0===c[w[x]])&&(c[w[x]]=f[w[x]]),x++;return c}),"extend","Use `assign`."),hb=vm((function(c,f){return ab(c,f,!0)}),"merge","Use `assign`.");function mm(c,f,b){var w,x=f.prototype;(w=c.prototype=Object.create(x)).constructor=c,w._super=x,b&&Xg(w,b)}function bm(c,f){return function(){return c.apply(f,arguments)}}var db=function(){var t=function(c,f){return void 0===f&&(f={}),new nb(c,Sg({recognizers:ib.concat()},f))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Xy,t.DIRECTION_DOWN=Hy,t.DIRECTION_LEFT=zy,t.DIRECTION_RIGHT=Ry,t.DIRECTION_UP=jy,t.DIRECTION_HORIZONTAL=Wy,t.DIRECTION_VERTICAL=Vy,t.DIRECTION_NONE=Fy,t.DIRECTION_DOWN=Hy,t.INPUT_START=Dy,t.INPUT_MOVE=2,t.INPUT_END=Iy,t.INPUT_CANCEL=By,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=gm,t.Manager=nb,t.Input=tm,t.TouchAction=Jy,t.TouchInput=hm,t.MouseInput=cm,t.PointerEventInput=sm,t.TouchMouseInput=fm,t.SingleTouchInput=sb,t.Recognizer=wm,t.AttrRecognizer=Om,t.Tap=km,t.Pan=Tm,t.Swipe=Sm,t.Pinch=Mm,t.Rotate=Pm,t.Press=Jm,t.on=Cy,t.off=Sy,t.each=uy,t.merge=hb,t.extend=ab,t.bindFn=bm,t.assign=Xg,t.inherit=mm,t.bindFn=bm,t.prefixed=Ag,t.toArray=Ny,t.inArray=Py,t.uniqueArray=Ay,t.splitStr=Oy,t.boolOrFn=fy,t.hasParent=gy,t.addEventListeners=Cy,t.removeEventListeners=Sy,t.defaults=Xg({},eb,{preset:ib}),t}();db.defaults;var lb=db;function _m(c,f){var b=void 0!==Tf&&Dh(c)||c["@@iterator"];if(!b){if(Wf(c)||(b=function(c,f){var b;if(c){if("string"==typeof c)return xm(c,f);var w=Ff(b=Object.prototype.toString.call(c)).call(b,8,-1);"Object"===w&&c.constructor&&(w=c.constructor.name);return"Map"===w||"Set"===w?hh(c):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?xm(c,f):void 0}}(c))||f&&c&&"number"==typeof c.length){b&&(c=b);var w=0,n=function(){};return{s:n,n:function(){return w>=c.length?{done:!0}:{done:!1,value:c[w++]}},e:function(c){throw c},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var x,_=!0,O=!1;return{s:function(){b=b.call(c)},n:function(){var c=b.next();return _=c.done,c},e:function(c){O=!0,x=c},f:function(){try{_||null==b.return||b.return()}finally{if(O)throw x}}}}function xm(c,f){(null==f||f>c.length)&&(f=c.length);for(var b=0,w=new Array(f);b<f;b++)w[b]=c[b];return w}function Em(){for(var c=arguments.length,f=new Array(c),b=0;b<c;b++)f[b]=arguments[b];return function(c){var f=function(){for(var c=function(){var c=4022871197;return function(f){for(var b=f.toString(),w=0;w<b.length;w++){var x=.02519603282416938*(c+=b.charCodeAt(w));x-=c=x>>>0,c=(x*=c)>>>0,c+=4294967296*(x-=c)}return 2.3283064365386963e-10*(c>>>0)}}(),f=c(" "),b=c(" "),w=c(" "),x=0;x<arguments.length;x++)(f-=c(x<0||arguments.length<=x?void 0:arguments[x]))<0&&(f+=1),(b-=c(x<0||arguments.length<=x?void 0:arguments[x]))<0&&(b+=1),(w-=c(x<0||arguments.length<=x?void 0:arguments[x]))<0&&(w+=1);return[f,b,w]}(c),b=df(f,3),w=b[0],x=b[1],_=b[2],O=1,a=function(){var c=2091639*w+2.3283064365386963e-10*O;return w=x,x=_,_=c-(O=0|c)};return a.uint32=function(){return 4294967296*a()},a.fract53=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.algorithm="Alea",a.seed=c,a.version="0.9",a}(f.length?f:[ip()])}Tf("DELETE");var cb="undefined"!=typeof window?window.Hammer||lb:function(){return function(){var t=function(){};return{on:t,off:t,destroy:t,emit:t,get:function(){return{set:t}}}}()};function Cm(c){var f,w=this||b;(this||b)._cleanupQueue=[],(this||b).active=!1,(this||b)._dom={container:c,overlay:document.createElement("div")},(this||b)._dom.overlay.classList.add("vis-overlay"),(this||b)._dom.container.appendChild((this||b)._dom.overlay),(this||b)._cleanupQueue.push((function(){w._dom.overlay.parentNode.removeChild(w._dom.overlay)}));var x=cb((this||b)._dom.overlay);x.on("tap",dn(f=(this||b)._onTapOverlay).call(f,this||b)),(this||b)._cleanupQueue.push((function(){x.destroy()}));var _=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];vp(_).call(_,(function(c){x.on(c,(function(c){c.srcEvent.stopPropagation()}))})),document&&document.body&&((this||b)._onClick=function(f){(function(c,f){for(;c;){if(c===f)return!0;c=c.parentNode}return!1})(f.target,c)||w.deactivate()},document.body.addEventListener("click",(this||b)._onClick),(this||b)._cleanupQueue.push((function(){document.body.removeEventListener("click",w._onClick)}))),(this||b)._escListener=function(c){("key"in c?"Escape"===c.key:27===c.keyCode)&&w.deactivate()}}fn(Cm.prototype),Cm.current=null,Cm.prototype.destroy=function(){var c,f;this.deactivate();var w,x=_m(Ep(c=Kp(f=(this||b)._cleanupQueue).call(f,0)).call(c));try{for(x.s();!(w=x.n()).done;)(0,w.value)()}catch(c){x.e(c)}finally{x.f()}},Cm.prototype.activate=function(){Cm.current&&Cm.current.deactivate(),Cm.current=this||b,(this||b).active=!0,(this||b)._dom.overlay.style.display="none",(this||b)._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",(this||b)._escListener)},Cm.prototype.deactivate=function(){(this||b).active=!1,(this||b)._dom.overlay.style.display="block",(this||b)._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",(this||b)._escListener),this.emit("change"),this.emit("deactivate")},Cm.prototype._onTapOverlay=function(c){this.activate(),c.srcEvent.stopPropagation()};var ub=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,fb=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,pb=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,vb=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Dm(c){if(c)for(;!0===c.hasChildNodes();){var f=c.firstChild;f&&(Dm(f),c.removeChild(f))}}function Im(c){return c instanceof String||"string"==typeof c}function Bm(c){return"object"===gu(c)&&null!==c}function Fm(c,f,b,w){var x=!1;!0===w&&(x=null===f[b]&&void 0!==c[b]),x?delete c[b]:c[b]=f[b]}function zm(c,f){var b=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var w in c)if(void 0!==f[w])if(null===f[w]||"object"!==gu(f[w]))Fm(c,f,w,b);else{var x=c[w],_=f[w];Bm(x)&&Bm(_)&&zm(x,_,b)}}function Nm(c,f,b){var w=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Wf(b))throw new TypeError("Arrays are not supported by deepExtend");for(var x=0;x<c.length;x++){var _=c[x];if(Object.prototype.hasOwnProperty.call(b,_))if(b[_]&&b[_].constructor===Object)void 0===f[_]&&(f[_]={}),f[_].constructor===Object?Rm(f[_],b[_],!1,w):Fm(f,b,_,w);else{if(Wf(b[_]))throw new TypeError("Arrays are not supported by deepExtend");Fm(f,b,_,w)}}return f}function Am(c,f,b){var w=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Wf(b))throw new TypeError("Arrays are not supported by deepExtend");for(var x in b)if(Object.prototype.hasOwnProperty.call(b,x)&&!pv(c).call(c,x))if(b[x]&&b[x].constructor===Object)void 0===f[x]&&(f[x]={}),f[x].constructor===Object?Rm(f[x],b[x]):Fm(f,b,x,w);else if(Wf(b[x])){f[x]=[];for(var _=0;_<b[x].length;_++)f[x].push(b[x][_])}else Fm(f,b,x,w);return f}function Rm(c,f){var b=arguments.length>2&&void 0!==arguments[2]&&arguments[2],w=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)||!0===b)if("object"===gu(f[x])&&null!==f[x]&&wv(f[x])===Object.prototype)void 0===c[x]?c[x]=Rm({},f[x],b):"object"===gu(c[x])&&null!==c[x]&&wv(c[x])===Object.prototype?Rm(c[x],f[x],b):Fm(c,f,x,w);else if(Wf(f[x])){var _;c[x]=Ff(_=f[x]).call(_)}else Fm(c,f,x,w);return c}function jm(c,f){var b;return Bf(b=[]).call(b,lf(c),[f])}function Lm(c){return c.getBoundingClientRect().top}function Hm(c,f){if(Wf(c))for(var b=c.length,w=0;w<b;w++)f(c[w],w,c);else for(var x in c)Object.prototype.hasOwnProperty.call(c,x)&&f(c[x],x,c)}function Wm(c){var f;switch(c.length){case 3:case 4:return(f=fb.exec(c))?{r:Zv(f[1]+f[1],16),g:Zv(f[2]+f[2],16),b:Zv(f[3]+f[3],16)}:null;case 6:case 7:return(f=ub.exec(c))?{r:Zv(f[1],16),g:Zv(f[2],16),b:Zv(f[3],16)}:null;default:return null}}function Vm(c,f){if(pv(c).call(c,"rgba"))return c;if(pv(c).call(c,"rgb")){var b=c.substr(ag(c).call(c,"(")+1).replace(")","").split(",");return"rgba("+b[0]+","+b[1]+","+b[2]+","+f+")"}var w=Wm(c);return null==w?c:"rgba("+w.r+","+w.g+","+w.b+","+f+")"}function qm(c,f,b){var w;return"#"+Ff(w=((1<<24)+(c<<16)+(f<<8)+b).toString(16)).call(w,1)}function Um(c,f){if(Im(c)){var b=c;if($m(b)){var w,x=Kf(w=b.substr(4).substr(0,b.length-5).split(",")).call(w,(function(c){return Zv(c)}));b=qm(x[0],x[1],x[2])}if(!0===Gm(b)){var _=function(c){var f=Wm(c);if(!f)throw new TypeError("'".concat(c,"' is not a valid color."));return Ym(f.r,f.g,f.b)}(b),O={h:_.h,s:.8*_.s,v:Math.min(1,1.02*_.v)},C={h:_.h,s:Math.min(1,1.25*_.s),v:.8*_.v},T=Km(C.h,C.s,C.v),S=Km(O.h,O.s,O.v);return{background:b,border:T,highlight:{background:S,border:T},hover:{background:S,border:T}}}return{background:b,border:b,highlight:{background:b,border:b},hover:{background:b,border:b}}}return f?{background:c.background||f.background,border:c.border||f.border,highlight:Im(c.highlight)?{border:c.highlight,background:c.highlight}:{background:c.highlight&&c.highlight.background||f.highlight.background,border:c.highlight&&c.highlight.border||f.highlight.border},hover:Im(c.hover)?{border:c.hover,background:c.hover}:{border:c.hover&&c.hover.border||f.hover.border,background:c.hover&&c.hover.background||f.hover.background}}:{background:c.background||void 0,border:c.border||void 0,highlight:Im(c.highlight)?{border:c.highlight,background:c.highlight}:{background:c.highlight&&c.highlight.background||void 0,border:c.highlight&&c.highlight.border||void 0},hover:Im(c.hover)?{border:c.hover,background:c.hover}:{border:c.hover&&c.hover.border||void 0,background:c.hover&&c.hover.background||void 0}}}function Ym(c,f,b){c/=255,f/=255,b/=255;var w=Math.min(c,Math.min(f,b)),x=Math.max(c,Math.max(f,b));return w===x?{h:0,s:0,v:w}:{h:60*((c===w?3:b===w?1:5)-(c===w?f-b:b===w?c-f:b-c)/(x-w))/360,s:(x-w)/x,v:x}}function Xm(c,f,b){var w,x,_,O=Math.floor(6*c),C=6*c-O,T=b*(1-f),S=b*(1-C*f),M=b*(1-(1-C)*f);switch(O%6){case 0:w=b,x=M,_=T;break;case 1:w=S,x=b,_=T;break;case 2:w=T,x=b,_=M;break;case 3:w=T,x=S,_=b;break;case 4:w=M,x=T,_=b;break;case 5:w=b,x=T,_=S}return{r:Math.floor(255*w),g:Math.floor(255*x),b:Math.floor(255*_)}}function Km(c,f,b){var w=Xm(c,f,b);return qm(w.r,w.g,w.b)}function Gm(c){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(c)}function $m(c){return pb.test(c)}function Zm(c){if(null===c||"object"!==gu(c))return null;if(c instanceof Element)return c;var f=lg(c);for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&"object"==gu(c[b])&&(f[b]=Zm(c[b]));return f}function Qm(c,f,b){var w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=function(c){return null!=c},r=function(c){return null!==c&&"object"===gu(c)};if(!r(c))throw new Error("Parameter mergeTarget must be an object");if(!r(f))throw new Error("Parameter options must be an object");if(!n(b))throw new Error("Parameter option must have a value");if(!r(w))throw new Error("Parameter globalOptions must be an object");var x=f[b],_=r(w)&&!function(c){for(var f in c)if(Object.prototype.hasOwnProperty.call(c,f))return!1;return!0}(w)?w[b]:void 0,O=_?_.enabled:void 0;if(void 0!==x){if("boolean"==typeof x)return r(c[b])||(c[b]={}),void(c[b].enabled=x);if(null===x&&!r(c[b])){if(!n(_))return;c[b]=lg(_)}if(r(x)){var C=!0;void 0!==x.enabled?C=x.enabled:void 0!==O&&(C=_.enabled),function(c,f,b){r(c[b])||(c[b]={});var w=f[b],x=c[b];for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(x[_]=w[_])}(c,f,b),c[b].enabled=C}}}var yb={linear:function(c){return c},easeInQuad:function(c){return c*c},easeOutQuad:function(c){return c*(2-c)},easeInOutQuad:function(c){return c<.5?2*c*c:(4-2*c)*c-1},easeInCubic:function(c){return c*c*c},easeOutCubic:function(c){return--c*c*c+1},easeInOutCubic:function(c){return c<.5?4*c*c*c:(c-1)*(2*c-2)*(2*c-2)+1},easeInQuart:function(c){return c*c*c*c},easeOutQuart:function(c){return 1- --c*c*c*c},easeInOutQuart:function(c){return c<.5?8*c*c*c*c:1-8*--c*c*c*c},easeInQuint:function(c){return c*c*c*c*c},easeOutQuint:function(c){return 1+--c*c*c*c*c},easeInOutQuint:function(c){return c<.5?16*c*c*c*c*c:1+16*--c*c*c*c*c}};function tb(c,f){var b;Wf(f)||(f=[f]);var w,x=_m(c);try{for(x.s();!(w=x.n()).done;){var _=w.value;if(_){b=_[f[0]];for(var O=1;O<f.length;O++)b&&(b=b[f[O]]);if(void 0!==b)break}}}catch(c){x.e(c)}finally{x.f()}return b}var mb={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},bb=function(){function t(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;vh(this||b,t),(this||b).pixelRatio=c,(this||b).generated=!1,(this||b).centerCoordinates={x:144.5,y:144.5},(this||b).r=289*.49,(this||b).color={r:255,g:255,b:255,a:1},(this||b).hueCircle=void 0,(this||b).initialColor={r:255,g:255,b:255,a:1},(this||b).previousColor=void 0,(this||b).applied=!1,(this||b).updateCallback=function(){},(this||b).closeCallback=function(){},this._create()}return wu(t,[{key:"insertTo",value:function(c){void 0!==(this||b).hammer&&((this||b).hammer.destroy(),(this||b).hammer=void 0),(this||b).container=c,(this||b).container.appendChild((this||b).frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(c){if("function"!=typeof c)throw new Error("Function attempted to set as colorPicker update callback is not a function.");(this||b).updateCallback=c}},{key:"setCloseCallback",value:function(c){if("function"!=typeof c)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");(this||b).closeCallback=c}},{key:"_isColorString",value:function(c){if("string"==typeof c)return mb[c]}},{key:"setColor",value:function(c){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==c){var b,w=this._isColorString(c);if(void 0!==w&&(c=w),!0===Im(c)){if(!0===$m(c)){var x=c.substr(4).substr(0,c.length-5).split(",");b={r:x[0],g:x[1],b:x[2],a:1}}else if(!0===function(c){return vb.test(c)}(c)){var _=c.substr(5).substr(0,c.length-6).split(",");b={r:_[0],g:_[1],b:_[2],a:_[3]}}else if(!0===Gm(c)){var O=Wm(c);b={r:O.r,g:O.g,b:O.b,a:1}}}else if(c instanceof Object&&void 0!==c.r&&void 0!==c.g&&void 0!==c.b){var C=void 0!==c.a?c.a:"1.0";b={r:c.r,g:c.g,b:c.b,a:C}}if(void 0===b)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+fg(c));this._setColor(b,f)}}},{key:"show",value:function(){void 0!==(this||b).closeCallback&&(this.closeCallback(),(this||b).closeCallback=void 0),(this||b).applied=!1,(this||b).frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var c=this||b;!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&((this||b).previousColor=No({},(this||b).color)),!0===(this||b).applied&&this.updateCallback((this||b).initialColor),(this||b).frame.style.display="none",zg((function(){void 0!==c.closeCallback&&(c.closeCallback(),c.closeCallback=void 0)}),0)}},{key:"_save",value:function(){this.updateCallback((this||b).color),(this||b).applied=!1,this._hide()}},{key:"_apply",value:function(){(this||b).applied=!0,this.updateCallback((this||b).color),this._updatePicker((this||b).color)}},{key:"_loadLast",value:function(){void 0!==(this||b).previousColor?this.setColor((this||b).previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(c){!0===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&((this||b).initialColor=No({},c)),(this||b).color=c;var f=Ym(c.r,c.g,c.b),w=2*Math.PI,x=(this||b).r*f.s,_=(this||b).centerCoordinates.x+x*Math.sin(w*f.h),O=(this||b).centerCoordinates.y+x*Math.cos(w*f.h);(this||b).colorPickerSelector.style.left=_-.5*(this||b).colorPickerSelector.clientWidth+"px",(this||b).colorPickerSelector.style.top=O-.5*(this||b).colorPickerSelector.clientHeight+"px",this._updatePicker(c)}},{key:"_setOpacity",value:function(c){(this||b).color.a=c/100,this._updatePicker((this||b).color)}},{key:"_setBrightness",value:function(c){var f=Ym((this||b).color.r,(this||b).color.g,(this||b).color.b);f.v=c/100;var w=Xm(f.h,f.s,f.v);w.a=(this||b).color.a,(this||b).color=w,this._updatePicker()}},{key:"_updatePicker",value:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(this||b).color,f=Ym(c.r,c.g,c.b),w=(this||b).colorPickerCanvas.getContext("2d");void 0===(this||b).pixelRation&&((this||b).pixelRatio=(window.devicePixelRatio||1)/(w.webkitBackingStorePixelRatio||w.mozBackingStorePixelRatio||w.msBackingStorePixelRatio||w.oBackingStorePixelRatio||w.backingStorePixelRatio||1)),w.setTransform((this||b).pixelRatio,0,0,(this||b).pixelRatio,0,0);var x=(this||b).colorPickerCanvas.clientWidth,_=(this||b).colorPickerCanvas.clientHeight;w.clearRect(0,0,x,_),w.putImageData((this||b).hueCircle,0,0),w.fillStyle="rgba(0,0,0,"+(1-f.v)+")",w.circle((this||b).centerCoordinates.x,(this||b).centerCoordinates.y,(this||b).r),Ug(w).call(w),(this||b).brightnessRange.value=100*f.v,(this||b).opacityRange.value=100*c.a,(this||b).initialColorDiv.style.backgroundColor="rgba("+(this||b).initialColor.r+","+(this||b).initialColor.g+","+(this||b).initialColor.b+","+(this||b).initialColor.a+")",(this||b).newColorDiv.style.backgroundColor="rgba("+(this||b).color.r+","+(this||b).color.g+","+(this||b).color.b+","+(this||b).color.a+")"}},{key:"_setSize",value:function(){(this||b).colorPickerCanvas.style.width="100%",(this||b).colorPickerCanvas.style.height="100%",(this||b).colorPickerCanvas.width=289*(this||b).pixelRatio,(this||b).colorPickerCanvas.height=289*(this||b).pixelRatio}},{key:"_create",value:function(){var c,f,w,x;if((this||b).frame=document.createElement("div"),(this||b).frame.className="vis-color-picker",(this||b).colorPickerDiv=document.createElement("div"),(this||b).colorPickerSelector=document.createElement("div"),(this||b).colorPickerSelector.className="vis-selector",(this||b).colorPickerDiv.appendChild((this||b).colorPickerSelector),(this||b).colorPickerCanvas=document.createElement("canvas"),(this||b).colorPickerDiv.appendChild((this||b).colorPickerCanvas),(this||b).colorPickerCanvas.getContext){var _=(this||b).colorPickerCanvas.getContext("2d");(this||b).pixelRatio=(window.devicePixelRatio||1)/(_.webkitBackingStorePixelRatio||_.mozBackingStorePixelRatio||_.msBackingStorePixelRatio||_.oBackingStorePixelRatio||_.backingStorePixelRatio||1),(this||b).colorPickerCanvas.getContext("2d").setTransform((this||b).pixelRatio,0,0,(this||b).pixelRatio,0,0)}else{var O=document.createElement("DIV");O.style.color="red",O.style.fontWeight="bold",O.style.padding="10px",O.innerText="Error: your browser does not support HTML canvas",(this||b).colorPickerCanvas.appendChild(O)}(this||b).colorPickerDiv.className="vis-color",(this||b).opacityDiv=document.createElement("div"),(this||b).opacityDiv.className="vis-opacity",(this||b).brightnessDiv=document.createElement("div"),(this||b).brightnessDiv.className="vis-brightness",(this||b).arrowDiv=document.createElement("div"),(this||b).arrowDiv.className="vis-arrow",(this||b).opacityRange=document.createElement("input");try{(this||b).opacityRange.type="range",(this||b).opacityRange.min="0",(this||b).opacityRange.max="100"}catch(c){}(this||b).opacityRange.value="100",(this||b).opacityRange.className="vis-range",(this||b).brightnessRange=document.createElement("input");try{(this||b).brightnessRange.type="range",(this||b).brightnessRange.min="0",(this||b).brightnessRange.max="100"}catch(c){}(this||b).brightnessRange.value="100",(this||b).brightnessRange.className="vis-range",(this||b).opacityDiv.appendChild((this||b).opacityRange),(this||b).brightnessDiv.appendChild((this||b).brightnessRange);var C=this||b;(this||b).opacityRange.onchange=function(){C._setOpacity((this||b).value)},(this||b).opacityRange.oninput=function(){C._setOpacity((this||b).value)},(this||b).brightnessRange.onchange=function(){C._setBrightness((this||b).value)},(this||b).brightnessRange.oninput=function(){C._setBrightness((this||b).value)},(this||b).brightnessLabel=document.createElement("div"),(this||b).brightnessLabel.className="vis-label vis-brightness",(this||b).brightnessLabel.innerText="brightness:",(this||b).opacityLabel=document.createElement("div"),(this||b).opacityLabel.className="vis-label vis-opacity",(this||b).opacityLabel.innerText="opacity:",(this||b).newColorDiv=document.createElement("div"),(this||b).newColorDiv.className="vis-new-color",(this||b).newColorDiv.innerText="new",(this||b).initialColorDiv=document.createElement("div"),(this||b).initialColorDiv.className="vis-initial-color",(this||b).initialColorDiv.innerText="initial",(this||b).cancelButton=document.createElement("div"),(this||b).cancelButton.className="vis-button vis-cancel",(this||b).cancelButton.innerText="cancel",(this||b).cancelButton.onclick=dn(c=(this||b)._hide).call(c,this||b,!1),(this||b).applyButton=document.createElement("div"),(this||b).applyButton.className="vis-button vis-apply",(this||b).applyButton.innerText="apply",(this||b).applyButton.onclick=dn(f=(this||b)._apply).call(f,this||b),(this||b).saveButton=document.createElement("div"),(this||b).saveButton.className="vis-button vis-save",(this||b).saveButton.innerText="save",(this||b).saveButton.onclick=dn(w=(this||b)._save).call(w,this||b),(this||b).loadButton=document.createElement("div"),(this||b).loadButton.className="vis-button vis-load",(this||b).loadButton.innerText="load last",(this||b).loadButton.onclick=dn(x=(this||b)._loadLast).call(x,this||b),(this||b).frame.appendChild((this||b).colorPickerDiv),(this||b).frame.appendChild((this||b).arrowDiv),(this||b).frame.appendChild((this||b).brightnessLabel),(this||b).frame.appendChild((this||b).brightnessDiv),(this||b).frame.appendChild((this||b).opacityLabel),(this||b).frame.appendChild((this||b).opacityDiv),(this||b).frame.appendChild((this||b).newColorDiv),(this||b).frame.appendChild((this||b).initialColorDiv),(this||b).frame.appendChild((this||b).cancelButton),(this||b).frame.appendChild((this||b).applyButton),(this||b).frame.appendChild((this||b).saveButton),(this||b).frame.appendChild((this||b).loadButton)}},{key:"_bindHammer",value:function(){var c=this||b;(this||b).drag={},(this||b).pinch={},(this||b).hammer=new cb((this||b).colorPickerCanvas),(this||b).hammer.get("pinch").set({enable:!0}),(this||b).hammer.on("hammer.input",(function(f){f.isFirst&&c._moveSelector(f)})),(this||b).hammer.on("tap",(function(f){c._moveSelector(f)})),(this||b).hammer.on("panstart",(function(f){c._moveSelector(f)})),(this||b).hammer.on("panmove",(function(f){c._moveSelector(f)})),(this||b).hammer.on("panend",(function(f){c._moveSelector(f)}))}},{key:"_generateHueCircle",value:function(){if(!1===(this||b).generated){var c=(this||b).colorPickerCanvas.getContext("2d");void 0===(this||b).pixelRation&&((this||b).pixelRatio=(window.devicePixelRatio||1)/(c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1)),c.setTransform((this||b).pixelRatio,0,0,(this||b).pixelRatio,0,0);var f,w,x,_,O=(this||b).colorPickerCanvas.clientWidth,C=(this||b).colorPickerCanvas.clientHeight;c.clearRect(0,0,O,C),(this||b).centerCoordinates={x:.5*O,y:.5*C},(this||b).r=.49*O;var T,S=2*Math.PI/360,M=1/(this||b).r;for(x=0;x<360;x++)for(_=0;_<(this||b).r;_++)f=(this||b).centerCoordinates.x+_*Math.sin(S*x),w=(this||b).centerCoordinates.y+_*Math.cos(S*x),T=Xm(.002777777777777778*x,_*M,1),c.fillStyle="rgb("+T.r+","+T.g+","+T.b+")",c.fillRect(f-.5,w-.5,2,2);c.strokeStyle="rgba(0,0,0,1)",c.circle((this||b).centerCoordinates.x,(this||b).centerCoordinates.y,(this||b).r),c.stroke(),(this||b).hueCircle=c.getImageData(0,0,O,C)}(this||b).generated=!0}},{key:"_moveSelector",value:function(c){var f=(this||b).colorPickerDiv.getBoundingClientRect(),w=c.center.x-f.left,x=c.center.y-f.top,_=.5*(this||b).colorPickerDiv.clientHeight,O=.5*(this||b).colorPickerDiv.clientWidth,C=w-O,T=x-_,S=Math.atan2(C,T),M=.98*Math.min(Math.sqrt(C*C+T*T),O),P=Math.cos(S)*M+_,D=Math.sin(S)*M+O;(this||b).colorPickerSelector.style.top=P-.5*(this||b).colorPickerSelector.clientHeight+"px",(this||b).colorPickerSelector.style.left=D-.5*(this||b).colorPickerSelector.clientWidth+"px";var I=S/(2*Math.PI);I=I<0?I+1:I;var B=M/(this||b).r,F=Ym((this||b).color.r,(this||b).color.g,(this||b).color.b);F.h=I,F.s=B;var z=Xm(F.h,F.s,F.v);z.a=(this||b).color.a,(this||b).color=z,(this||b).initialColorDiv.style.backgroundColor="rgba("+(this||b).initialColor.r+","+(this||b).initialColor.g+","+(this||b).initialColor.b+","+(this||b).initialColor.a+")",(this||b).newColorDiv.style.backgroundColor="rgba("+(this||b).color.r+","+(this||b).color.g+","+(this||b).color.b+","+(this||b).color.a+")"}}]),t}();function ob(){for(var c=arguments.length,f=new Array(c),b=0;b<c;b++)f[b]=arguments[b];if(f.length<1)throw new TypeError("Invalid arguments.");if(1===f.length)return document.createTextNode(f[0]);var w=document.createElement(f[0]);return w.appendChild(ob.apply(void 0,lf(Ff(f).call(f,1)))),w}var wb,kb=function(){function t(c,f,w){var x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,_=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!1};vh(this||b,t),(this||b).parent=c,(this||b).changedOptions=[],(this||b).container=f,(this||b).allowCreation=!1,(this||b).hideOption=_,(this||b).options={},(this||b).initialized=!1,(this||b).popupCounter=0,(this||b).defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},No((this||b).options,(this||b).defaultOptions),(this||b).configureOptions=w,(this||b).moduleOptions={},(this||b).domElements=[],(this||b).popupDiv={},(this||b).popupLimit=5,(this||b).popupHistory={},(this||b).colorPicker=new bb(x),(this||b).wrapper=void 0}return wu(t,[{key:"setOptions",value:function(c){if(void 0!==c){(this||b).popupHistory={},this._removePopup();var f=!0;if("string"==typeof c)(this||b).options.filter=c;else if(Wf(c))(this||b).options.filter=c.join();else if("object"===gu(c)){if(null==c)throw new TypeError("options cannot be null");void 0!==c.container&&((this||b).options.container=c.container),void 0!==Cv(c)&&((this||b).options.filter=Cv(c)),void 0!==c.showButton&&((this||b).options.showButton=c.showButton),void 0!==c.enabled&&(f=c.enabled)}else"boolean"==typeof c?((this||b).options.filter=!0,f=c):"function"==typeof c&&((this||b).options.filter=c,f=!0);!1===Cv((this||b).options)&&(f=!1),(this||b).options.enabled=f}this._clean()}},{key:"setModuleOptions",value:function(c){(this||b).moduleOptions=c,!0===(this||b).options.enabled&&(this._clean(),void 0!==(this||b).options.container&&((this||b).container=(this||b).options.container),this._create())}},{key:"_create",value:function(){this._clean(),(this||b).changedOptions=[];var c=Cv((this||b).options),f=0,w=!1;for(var x in(this||b).configureOptions)Object.prototype.hasOwnProperty.call((this||b).configureOptions,x)&&((this||b).allowCreation=!1,w=!1,"function"==typeof c?w=(w=c(x,[]))||this._handleObject((this||b).configureOptions[x],[x],!0):!0!==c&&-1===ag(c).call(c,x)||(w=!0),!1!==w&&((this||b).allowCreation=!0,f>0&&this._makeItem([]),this._makeHeader(x),this._handleObject((this||b).configureOptions[x],[x])),f++);this._makeButton(),this._push()}},{key:"_push",value:function(){(this||b).wrapper=document.createElement("div"),(this||b).wrapper.className="vis-configuration-wrapper",(this||b).container.appendChild((this||b).wrapper);for(var c=0;c<(this||b).domElements.length;c++)(this||b).wrapper.appendChild((this||b).domElements[c]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var c=0;c<(this||b).domElements.length;c++)(this||b).wrapper.removeChild((this||b).domElements[c]);void 0!==(this||b).wrapper&&((this||b).container.removeChild((this||b).wrapper),(this||b).wrapper=void 0),(this||b).domElements=[],this._removePopup()}},{key:"_getValue",value:function(c){for(var f=(this||b).moduleOptions,w=0;w<c.length;w++){if(void 0===f[c[w]]){f=void 0;break}f=f[c[w]]}return f}},{key:"_makeItem",value:function(c){if(!0===(this||b).allowCreation){var f=document.createElement("div");f.className="vis-configuration vis-config-item vis-config-s"+c.length;for(var w=arguments.length,x=new Array(w>1?w-1:0),_=1;_<w;_++)x[_-1]=arguments[_];return vp(x).call(x,(function(c){f.appendChild(c)})),(this||b).domElements.push(f),(this||b).domElements.length}return 0}},{key:"_makeHeader",value:function(c){var f=document.createElement("div");f.className="vis-configuration vis-config-header",f.innerText=c,this._makeItem([],f)}},{key:"_makeLabel",value:function(c,f){var b=arguments.length>2&&void 0!==arguments[2]&&arguments[2],w=document.createElement("div");if(w.className="vis-configuration vis-config-label vis-config-s"+f.length,!0===b){for(;w.firstChild;)w.removeChild(w.firstChild);w.appendChild(ob("i","b",c))}else w.innerText=c+":";return w}},{key:"_makeDropdown",value:function(c,f,w){var x=document.createElement("select");x.className="vis-configuration vis-config-select";var _=0;void 0!==f&&-1!==ag(c).call(c,f)&&(_=ag(c).call(c,f));for(var O=0;O<c.length;O++){var C=document.createElement("option");C.value=c[O],O===_&&(C.selected="selected"),C.innerText=c[O],x.appendChild(C)}var T=this||b;x.onchange=function(){T._update((this||b).value,w)};var S=this._makeLabel(w[w.length-1],w);this._makeItem(w,S,x)}},{key:"_makeRange",value:function(c,f,w){var x=c[0],_=c[1],O=c[2],C=c[3],T=document.createElement("input");T.className="vis-configuration vis-config-range";try{T.type="range",T.min=_,T.max=O}catch(c){}T.step=C;var S="",M=0;if(void 0!==f){var P=1.2;f<0&&f*P<_?(T.min=Math.ceil(f*P),M=T.min,S="range increased"):f/P<_&&(T.min=Math.ceil(f/P),M=T.min,S="range increased"),f*P>O&&1!==O&&(T.max=Math.ceil(f*P),M=T.max,S="range increased"),T.value=f}else T.value=x;var D=document.createElement("input");D.className="vis-configuration vis-config-rangeinput",D.value=T.value;var I=this||b;T.onchange=function(){D.value=(this||b).value,I._update(Number((this||b).value),w)},T.oninput=function(){D.value=(this||b).value};var B=this._makeLabel(w[w.length-1],w),F=this._makeItem(w,B,T,D);""!==S&&(this||b).popupHistory[F]!==M&&((this||b).popupHistory[F]=M,this._setupPopup(S,F))}},{key:"_makeButton",value:function(){var c=this||b;if(!0===(this||b).options.showButton){var f=document.createElement("div");f.className="vis-configuration vis-config-button",f.innerText="generate options",f.onclick=function(){c._printOptions()},f.onmouseover=function(){f.className="vis-configuration vis-config-button hover"},f.onmouseout=function(){f.className="vis-configuration vis-config-button"},(this||b).optionsContainer=document.createElement("div"),(this||b).optionsContainer.className="vis-configuration vis-config-option-container",(this||b).domElements.push((this||b).optionsContainer),(this||b).domElements.push(f)}}},{key:"_setupPopup",value:function(c,f){var w=this||b;if(!0===(this||b).initialized&&!0===(this||b).allowCreation&&(this||b).popupCounter<(this||b).popupLimit){var x=document.createElement("div");x.id="vis-configuration-popup",x.className="vis-configuration-popup",x.innerText=c,x.onclick=function(){w._removePopup()},(this||b).popupCounter+=1,(this||b).popupDiv={html:x,index:f}}}},{key:"_removePopup",value:function(){void 0!==(this||b).popupDiv.html&&((this||b).popupDiv.html.parentNode.removeChild((this||b).popupDiv.html),clearTimeout((this||b).popupDiv.hideTimeout),clearTimeout((this||b).popupDiv.deleteTimeout),(this||b).popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var c=this||b;if(void 0!==(this||b).popupDiv.html){var f=(this||b).domElements[(this||b).popupDiv.index].getBoundingClientRect();(this||b).popupDiv.html.style.left=f.left+"px",(this||b).popupDiv.html.style.top=f.top-30+"px",document.body.appendChild((this||b).popupDiv.html),(this||b).popupDiv.hideTimeout=zg((function(){c.popupDiv.html.style.opacity=0}),1500),(this||b).popupDiv.deleteTimeout=zg((function(){c._removePopup()}),1800)}}},{key:"_makeCheckbox",value:function(c,f,w){var x=document.createElement("input");x.type="checkbox",x.className="vis-configuration vis-config-checkbox",x.checked=c,void 0!==f&&(x.checked=f,f!==c&&("object"===gu(c)?f!==c.enabled&&(this||b).changedOptions.push({path:w,value:f}):(this||b).changedOptions.push({path:w,value:f})));var _=this||b;x.onchange=function(){_._update((this||b).checked,w)};var O=this._makeLabel(w[w.length-1],w);this._makeItem(w,O,x)}},{key:"_makeTextInput",value:function(c,f,w){var x=document.createElement("input");x.type="text",x.className="vis-configuration vis-config-text",x.value=f,f!==c&&(this||b).changedOptions.push({path:w,value:f});var _=this||b;x.onchange=function(){_._update((this||b).value,w)};var O=this._makeLabel(w[w.length-1],w);this._makeItem(w,O,x)}},{key:"_makeColorField",value:function(c,f,w){var x=this||b,_=c[1],O=document.createElement("div");"none"!==(f=void 0===f?_:f)?(O.className="vis-configuration vis-config-colorBlock",O.style.backgroundColor=f):O.className="vis-configuration vis-config-colorBlock none",f=void 0===f?_:f,O.onclick=function(){x._showColorPicker(f,O,w)};var C=this._makeLabel(w[w.length-1],w);this._makeItem(w,C,O)}},{key:"_showColorPicker",value:function(c,f,w){var x=this||b;f.onclick=function(){},(this||b).colorPicker.insertTo(f),(this||b).colorPicker.show(),(this||b).colorPicker.setColor(c),(this||b).colorPicker.setUpdateCallback((function(c){var b="rgba("+c.r+","+c.g+","+c.b+","+c.a+")";f.style.backgroundColor=b,x._update(b,w)})),(this||b).colorPicker.setCloseCallback((function(){f.onclick=function(){x._showColorPicker(c,f,w)}}))}},{key:"_handleObject",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],w=arguments.length>2&&void 0!==arguments[2]&&arguments[2],x=!1,_=Cv((this||b).options),O=!1;for(var C in c)if(Object.prototype.hasOwnProperty.call(c,C)){x=!0;var T=c[C],S=jm(f,C);if("function"==typeof _&&!1===(x=_(C,f))&&!Wf(T)&&"string"!=typeof T&&"boolean"!=typeof T&&T instanceof Object&&((this||b).allowCreation=!1,x=this._handleObject(T,S,!0),(this||b).allowCreation=!1===w),!1!==x){O=!0;var M=this._getValue(S);if(Wf(T))this._handleArray(T,M,S);else if("string"==typeof T)this._makeTextInput(T,M,S);else if("boolean"==typeof T)this._makeCheckbox(T,M,S);else if(T instanceof Object){if(!this.hideOption(f,C,(this||b).moduleOptions))if(void 0!==T.enabled){var P=jm(S,"enabled"),D=this._getValue(P);if(!0===D){var I=this._makeLabel(C,S,!0);this._makeItem(S,I),O=this._handleObject(T,S)||O}else this._makeCheckbox(T,D,S)}else{var B=this._makeLabel(C,S,!0);this._makeItem(S,B),O=this._handleObject(T,S)||O}}else console.error("dont know how to handle",T,C,S)}}return O}},{key:"_handleArray",value:function(c,f,w){"string"==typeof c[0]&&"color"===c[0]?(this._makeColorField(c,f,w),c[1]!==f&&(this||b).changedOptions.push({path:w,value:f})):"string"==typeof c[0]?(this._makeDropdown(c,f,w),c[0]!==f&&(this||b).changedOptions.push({path:w,value:f})):"number"==typeof c[0]&&(this._makeRange(c,f,w),c[0]!==f&&(this||b).changedOptions.push({path:w,value:Number(f)}))}},{key:"_update",value:function(c,f){var w=this._constructOptions(c,f);(this||b).parent.body&&(this||b).parent.body.emitter&&(this||b).parent.body.emitter.emit&&(this||b).parent.body.emitter.emit("configChange",w),(this||b).initialized=!0,(this||b).parent.setOptions(w)}},{key:"_constructOptions",value:function(c,f){var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},w=b;c="false"!==(c="true"===c||c)&&c;for(var x=0;x<f.length;x++)"global"!==f[x]&&(void 0===w[f[x]]&&(w[f[x]]={}),x!==f.length-1?w=w[f[x]]:w[f[x]]=c);return b}},{key:"_printOptions",value:function(){for(var c=this.getOptions();(this||b).optionsContainer.firstChild;)(this||b).optionsContainer.removeChild((this||b).optionsContainer.firstChild);(this||b).optionsContainer.appendChild(ob("pre","const options = "+fg(c,null,2)))}},{key:"getOptions",value:function(){for(var c={},f=0;f<(this||b).changedOptions.length;f++)this._constructOptions((this||b).changedOptions[f].value,(this||b).changedOptions[f].path,c);return c}}]),t}(),xb=function(){function t(c,f){vh(this||b,t),(this||b).container=c,(this||b).overflowMethod=f||"cap",(this||b).x=0,(this||b).y=0,(this||b).padding=5,(this||b).hidden=!1,(this||b).frame=document.createElement("div"),(this||b).frame.className="vis-tooltip",(this||b).container.appendChild((this||b).frame)}return wu(t,[{key:"setPosition",value:function(c,f){(this||b).x=Zv(c),(this||b).y=Zv(f)}},{key:"setText",value:function(c){if(c instanceof Element){for(;(this||b).frame.firstChild;)(this||b).frame.removeChild((this||b).frame.firstChild);(this||b).frame.appendChild(c)}else(this||b).frame.innerText=c}},{key:"show",value:function(c){if(void 0===c&&(c=!0),!0===c){var f=(this||b).frame.clientHeight,w=(this||b).frame.clientWidth,x=(this||b).frame.parentNode.clientHeight,_=(this||b).frame.parentNode.clientWidth,O=0,C=0;if("flip"==(this||b).overflowMethod){var T=!1,S=!0;(this||b).y-f<(this||b).padding&&(S=!1),(this||b).x+w>_-(this||b).padding&&(T=!0),O=T?(this||b).x-w:(this||b).x,C=S?(this||b).y-f:(this||b).y}else(C=(this||b).y-f)+f+(this||b).padding>x&&(C=x-f-(this||b).padding),C<(this||b).padding&&(C=(this||b).padding),(O=(this||b).x)+w+(this||b).padding>_&&(O=_-w-(this||b).padding),O<(this||b).padding&&(O=(this||b).padding);(this||b).frame.style.left=O+"px",(this||b).frame.style.top=C+"px",(this||b).frame.style.visibility="visible",(this||b).hidden=!1}else this.hide()}},{key:"hide",value:function(){(this||b).hidden=!0,(this||b).frame.style.left="0",(this||b).frame.style.top="0",(this||b).frame.style.visibility="hidden"}},{key:"destroy",value:function(){(this||b).frame.parentNode.removeChild((this||b).frame)}}]),t}(),_b=!1,Eb="background: #FFeeee; color: #dd0000",Ob=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"validate",value:function(c,f,b){_b=!1,wb=f;var w=f;return void 0!==b&&(w=f[b]),t.parse(c,w,[]),_b}},{key:"parse",value:function(c,f,b){for(var w in c)Object.prototype.hasOwnProperty.call(c,w)&&t.check(w,c,f,b)}},{key:"check",value:function(c,f,b,w){if(void 0!==b[c]||void 0!==b.__any__){var x=c,_=!0;void 0===b[c]&&void 0!==b.__any__&&(x="__any__",_="object"===t.getType(f[c]));var O=b[x];_&&void 0!==O.__type__&&(O=O.__type__),t.checkFields(c,f,b,x,O,w)}else t.getSuggestion(c,b,w)}},{key:"checkFields",value:function(c,f,b,w,x,_){var a=function(f){console.error("%c"+f+t.printLocation(_,c),Eb)},O=t.getType(f[c]),C=x[O];void 0!==C?"array"===t.getType(C)&&-1===ag(C).call(C,f[c])?(a('Invalid option detected in "'+c+'". Allowed values are:'+t.print(C)+' not "'+f[c]+'". '),_b=!0):"object"===O&&"__any__"!==w&&(_=jm(_,c),t.parse(f[c],b[w],_)):void 0===x.any&&(a('Invalid type received for "'+c+'". Expected: '+t.print($f(x))+". Received ["+O+'] "'+f[c]+'"'),_b=!0)}},{key:"getType",value:function(c){var f=gu(c);return"object"===f?null===c?"null":c instanceof Boolean?"boolean":c instanceof Number?"number":c instanceof String?"string":Wf(c)?"array":c instanceof Date?"date":void 0!==c.nodeType?"dom":!0===c._isAMomentObject?"moment":"object":"number"===f?"number":"boolean"===f?"boolean":"string"===f?"string":void 0===f?"undefined":f}},{key:"getSuggestion",value:function(c,f,b){var w,x=t.findInOptions(c,f,b,!1),_=t.findInOptions(c,wb,[],!0);w=void 0!==x.indexMatch?" in "+t.printLocation(x.path,c,"")+'Perhaps it was incomplete? Did you mean: "'+x.indexMatch+'"?\n\n':_.distance<=4&&x.distance>_.distance?" in "+t.printLocation(x.path,c,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(_.path,_.closestMatch,""):x.distance<=8?'. Did you mean "'+x.closestMatch+'"?'+t.printLocation(x.path,c):". Did you mean one of these: "+t.print($f(f))+t.printLocation(b,c),console.error('%cUnknown option detected: "'+c+'"'+w,Eb),_b=!0}},{key:"findInOptions",value:function(c,f,b){var w,x=arguments.length>3&&void 0!==arguments[3]&&arguments[3],_=1e9,O="",C=[],T=c.toLowerCase(),S=void 0;for(var M in f){var P=void 0;if(void 0!==f[M].__type__&&!0===x){var D=t.findInOptions(c,f[M],jm(b,M));_>D.distance&&(O=D.closestMatch,C=D.path,_=D.distance,S=D.indexMatch)}else{var I;-1!==ag(I=M.toLowerCase()).call(I,T)&&(S=M),_>(P=t.levenshteinDistance(c,M))&&(O=M,C=Ff(w=b).call(w),_=P)}}return{closestMatch:O,path:C,distance:_,indexMatch:S}}},{key:"printLocation",value:function(c,f){for(var b="\n\n"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n")+"options = {\n",w=0;w<c.length;w++){for(var x=0;x<w+1;x++)b+="  ";b+=c[w]+": {\n"}for(var _=0;_<c.length+1;_++)b+="  ";b+=f+"\n";for(var O=0;O<c.length+1;O++){for(var C=0;C<c.length-O;C++)b+="  ";b+="}\n"}return b+"\n\n"}},{key:"print",value:function(c){return fg(c).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(c,f){if(0===c.length)return f.length;if(0===f.length)return c.length;var b,w,x=[];for(b=0;b<=f.length;b++)x[b]=[b];for(w=0;w<=c.length;w++)x[0][w]=w;for(b=1;b<=f.length;b++)for(w=1;w<=c.length;w++)f.charAt(b-1)==c.charAt(w-1)?x[b][w]=x[b-1][w-1]:x[b][w]=Math.min(x[b-1][w-1]+1,Math.min(x[b][w-1]+1,x[b-1][w]+1));return x[f.length][c.length]}}]),t}(),Ub=Cm,Xb=kb,Kb=cb,Gb=xb,Zb=Eb,Qb=Ob;function gb(c){return iw=c,function(){var c={};ow=0,void(nw=iw.charAt(0)),Fb(),"strict"===rw&&(c.strict=!0,Fb());"graph"!==rw&&"digraph"!==rw||(c.type=rw,Fb());sw===tw.IDENTIFIER&&(c.id=rw,Fb());if("{"!=rw)throw Lb("Angle bracket { expected");if(Fb(),zb(c),"}"!=rw)throw Lb("Angle bracket } expected");if(Fb(),""!==rw)throw Lb("End of file expected");return Fb(),delete c.node,delete c.edge,delete c.graph,c}()}var $b={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},Jb=lg($b);Jb.color="color.color",Jb.style="dashes";var tw={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},ew={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},iw="",ow=0,nw="",rw="",sw=tw.NULL;function Cb(){ow++,nw=iw.charAt(ow)}function Sb(){return iw.charAt(ow+1)}function Tb(c){var f=c.charCodeAt(0);return f<47?35===f||46===f:f<59?f>47:f<91?f>64:f<96?95===f:f<123&&f>96}function Mb(c,f){if(c||(c={}),f)for(var b in f)f.hasOwnProperty(b)&&(c[b]=f[b]);return c}function Pb(c,f,b){for(var w=f.split("."),x=c;w.length;){var _=w.shift();w.length?(x[_]||(x[_]={}),x=x[_]):x[_]=b}}function Db(c,f){for(var b,w,x=null,_=[c],O=c;O.parent;)_.push(O.parent),O=O.parent;if(O.nodes)for(b=0,w=O.nodes.length;b<w;b++)if(f.id===O.nodes[b].id){x=O.nodes[b];break}for(x||(x={id:f.id},c.node&&(x.attr=Mb(x.attr,c.node))),b=_.length-1;b>=0;b--){var C,T=_[b];T.nodes||(T.nodes=[]),-1===ag(C=T.nodes).call(C,x)&&T.nodes.push(x)}f.attr&&(x.attr=Mb(x.attr,f.attr))}function Ib(c,f){if(c.edges||(c.edges=[]),c.edges.push(f),c.edge){var b=Mb({},c.edge);f.attr=Mb(b,f.attr)}}function Bb(c,f,b,w,x){var _={from:f,to:b,type:w};return c.edge&&(_.attr=Mb({},c.edge)),_.attr=Mb(_.attr||{},x),null!=x&&x.hasOwnProperty("arrows")&&null!=x.arrows&&(_.arrows={to:{enabled:!0,type:x.arrows.type}},x.arrows=null),_}function Fb(){for(sw=tw.NULL,rw="";" "===nw||"\t"===nw||"\n"===nw||"\r"===nw;)Cb();do{var c=!1;if("#"===nw){for(var f=ow-1;" "===iw.charAt(f)||"\t"===iw.charAt(f);)f--;if("\n"===iw.charAt(f)||""===iw.charAt(f)){for(;""!=nw&&"\n"!=nw;)Cb();c=!0}}if("/"===nw&&"/"===Sb()){for(;""!=nw&&"\n"!=nw;)Cb();c=!0}if("/"===nw&&"*"===Sb()){for(;""!=nw;){if("*"===nw&&"/"===Sb()){Cb(),Cb();break}Cb()}c=!0}for(;" "===nw||"\t"===nw||"\n"===nw||"\r"===nw;)Cb()}while(c);if(""!==nw){var b=nw+Sb();if(ew[b])return sw=tw.DELIMITER,rw=b,Cb(),void Cb();if(ew[nw])return sw=tw.DELIMITER,rw=nw,void Cb();if(Tb(nw)||"-"===nw){for(rw+=nw,Cb();Tb(nw);)rw+=nw,Cb();return"false"===rw?rw=!1:"true"===rw?rw=!0:isNaN(Number(rw))||(rw=Number(rw)),void(sw=tw.IDENTIFIER)}if('"'===nw){for(Cb();""!=nw&&('"'!=nw||'"'===nw&&'"'===Sb());)'"'===nw?(rw+=nw,Cb()):"\\"===nw&&"n"===Sb()?(rw+="\n",Cb()):rw+=nw,Cb();if('"'!=nw)throw Lb('End of string " expected');return Cb(),void(sw=tw.IDENTIFIER)}for(sw=tw.UNKNOWN;""!=nw;)rw+=nw,Cb();throw new SyntaxError('Syntax error in part "'+Hb(rw,30)+'"')}sw=tw.DELIMITER}function zb(c){for(;""!==rw&&"}"!=rw;)Nb(c),";"===rw&&Fb()}function Nb(c){var f=Ab(c);if(f)Rb(c,f);else{var b=function(c){return"node"===rw?(Fb(),c.node=jb(),"node"):"edge"===rw?(Fb(),c.edge=jb(),"edge"):"graph"===rw?(Fb(),c.graph=jb(),"graph"):null}(c);if(!b){if(sw!=tw.IDENTIFIER)throw Lb("Identifier expected");var w=rw;if(Fb(),"="===rw){if(Fb(),sw!=tw.IDENTIFIER)throw Lb("Identifier expected");c[w]=rw,Fb()}else!function(c,f){var b={id:f},w=jb();w&&(b.attr=w);Db(c,b),Rb(c,f)}(c,w)}}}function Ab(c){var f=null;if("subgraph"===rw&&((f={}).type="subgraph",Fb(),sw===tw.IDENTIFIER&&(f.id=rw,Fb())),"{"===rw){if(Fb(),f||(f={}),f.parent=c,f.node=c.node,f.edge=c.edge,f.graph=c.graph,zb(f),"}"!=rw)throw Lb("Angle bracket } expected");Fb(),delete f.node,delete f.edge,delete f.graph,delete f.parent,c.subgraphs||(c.subgraphs=[]),c.subgraphs.push(f)}return f}function Rb(c,f){for(;"->"===rw||"--"===rw;){var b,w=rw;Fb();var x=Ab(c);if(x)b=x;else{if(sw!=tw.IDENTIFIER)throw Lb("Identifier or subgraph expected");Db(c,{id:b=rw}),Fb()}Ib(c,Bb(c,f,b,w,jb())),f=b}}function jb(){for(var c,f,b=null,w={dashed:!0,solid:!1,dotted:[1,5]},x={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},_=new Array,O=new Array;"["===rw;){for(Fb(),b={};""!==rw&&"]"!=rw;){if(sw!=tw.IDENTIFIER)throw Lb("Attribute name expected");var C=rw;if(Fb(),"="!=rw)throw Lb("Equal sign = expected");if(Fb(),sw!=tw.IDENTIFIER)throw Lb("Attribute value expected");var T=rw;"style"===C&&(T=w[T]),"arrowhead"===C&&(C="arrows",T={to:{enabled:!0,type:x[T]}}),"arrowtail"===C&&(C="arrows",T={from:{enabled:!0,type:x[T]}}),_.push({attr:b,name:C,value:T}),O.push(C),Fb(),","==rw&&Fb()}if("]"!=rw)throw Lb("Bracket ] expected");Fb()}if(pv(O).call(O,"dir")){var S={arrows:{}};for(c=0;c<_.length;c++)if("arrows"===_[c].name)if(null!=_[c].value.to)S.arrows.to=c;else{if(null==_[c].value.from)throw Lb("Invalid value of arrows");S.arrows.from=c}else"dir"===_[c].name&&(S.dir=c);var M,P,D=_[S.dir].value;if(!pv(O).call(O,"arrows"))if("both"===D)_.push({attr:_[S.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),S.arrows.to=_.length-1,_.push({attr:_[S.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),S.arrows.from=_.length-1;else if("forward"===D)_.push({attr:_[S.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),S.arrows.to=_.length-1;else if("back"===D)_.push({attr:_[S.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),S.arrows.from=_.length-1;else{if("none"!==D)throw Lb('Invalid dir type "'+D+'"');_.push({attr:_[S.dir].attr,name:"arrows",value:""}),S.arrows.to=_.length-1}if("both"===D)S.arrows.to&&S.arrows.from?(P=_[S.arrows.to].value.to.type,M=_[S.arrows.from].value.from.type,_[S.arrows.to]={attr:_[S.arrows.to].attr,name:_[S.arrows.to].name,value:{to:{enabled:!0,type:P},from:{enabled:!0,type:M}}},Kp(_).call(_,S.arrows.from,1)):S.arrows.to?(P=_[S.arrows.to].value.to.type,M="arrow",_[S.arrows.to]={attr:_[S.arrows.to].attr,name:_[S.arrows.to].name,value:{to:{enabled:!0,type:P},from:{enabled:!0,type:M}}}):S.arrows.from&&(P="arrow",M=_[S.arrows.from].value.from.type,_[S.arrows.from]={attr:_[S.arrows.from].attr,name:_[S.arrows.from].name,value:{to:{enabled:!0,type:P},from:{enabled:!0,type:M}}});else if("back"===D)S.arrows.to&&S.arrows.from?(P="",M=_[S.arrows.from].value.from.type,_[S.arrows.from]={attr:_[S.arrows.from].attr,name:_[S.arrows.from].name,value:{to:{enabled:!0,type:P},from:{enabled:!0,type:M}}}):S.arrows.to?(P="",M="arrow",S.arrows.from=S.arrows.to,_[S.arrows.from]={attr:_[S.arrows.from].attr,name:_[S.arrows.from].name,value:{to:{enabled:!0,type:P},from:{enabled:!0,type:M}}}):S.arrows.from&&(P="",M=_[S.arrows.from].value.from.type,_[S.arrows.to]={attr:_[S.arrows.from].attr,name:_[S.arrows.from].name,value:{to:{enabled:!0,type:P},from:{enabled:!0,type:M}}}),_[S.arrows.from]={attr:_[S.arrows.from].attr,name:_[S.arrows.from].name,value:{from:{enabled:!0,type:_[S.arrows.from].value.from.type}}};else if("none"===D){var I;_[I=S.arrows.to?S.arrows.to:S.arrows.from]={attr:_[I].attr,name:_[I].name,value:""}}else{if("forward"!==D)throw Lb('Invalid dir type "'+D+'"');S.arrows.to&&S.arrows.from||S.arrows.to?(P=_[S.arrows.to].value.to.type,M="",_[S.arrows.to]={attr:_[S.arrows.to].attr,name:_[S.arrows.to].name,value:{to:{enabled:!0,type:P},from:{enabled:!0,type:M}}}):S.arrows.from&&(P="arrow",M="",S.arrows.to=S.arrows.from,_[S.arrows.to]={attr:_[S.arrows.to].attr,name:_[S.arrows.to].name,value:{to:{enabled:!0,type:P},from:{enabled:!0,type:M}}}),_[S.arrows.to]={attr:_[S.arrows.to].attr,name:_[S.arrows.to].name,value:{to:{enabled:!0,type:_[S.arrows.to].value.to.type}}}}Kp(_).call(_,S.dir,1)}if(pv(O).call(O,"penwidth")){var B=[];for(f=_.length,c=0;c<f;c++)"width"!==_[c].name&&("penwidth"===_[c].name&&(_[c].name="width"),B.push(_[c]));_=B}for(f=_.length,c=0;c<f;c++)Pb(_[c].attr,_[c].name,_[c].value);return b}function Lb(c){return new SyntaxError(c+', got "'+Hb(rw,30)+'" (char '+ow+")")}function Hb(c,f){return c.length<=f?c:c.substr(0,27)+"..."}function Wb(c,f,b){for(var w=f.split("."),x=w.pop(),_=c,O=0;O<w.length;O++){var C=w[O];C in _||(_[C]={}),_=_[C]}return _[x]=b,c}function Vb(c,f){var b={};for(var w in c)if(c.hasOwnProperty(w)){var x=f[w];Wf(x)?vp(x).call(x,(function(f){Wb(b,f,c[w])})):Wb(b,"string"==typeof x?x:w,c[w])}return b}function qb(c){var f,b=gb(c),w={nodes:[],edges:[],options:{}};b.nodes&&vp(f=b.nodes).call(f,(function(c){var f={id:c.id,label:String(c.label||c.id)};Mb(f,Vb(c.attr,$b)),f.image&&(f.shape="image"),w.nodes.push(f)}));if(b.edges){var x,r=function(c){var f={from:c.from,to:c.to};return Mb(f,Vb(c.attr,Jb)),null==f.arrows&&"->"===c.type&&(f.arrows="to"),f};vp(x=b.edges).call(x,(function(c){var f,b,x,_,O,C,T;(f=c.from instanceof Object?c.from.nodes:{id:c.from},b=c.to instanceof Object?c.to.nodes:{id:c.to},c.from instanceof Object&&c.from.edges)&&vp(x=c.from.edges).call(x,(function(c){var f=r(c);w.edges.push(f)}));(O=b,C=function(f,b){var x=Bb(w,f.id,b.id,c.type,c.attr),_=r(x);w.edges.push(_)},Wf(_=f)?vp(_).call(_,(function(c){Wf(O)?vp(O).call(O,(function(f){C(c,f)})):C(c,O)})):Wf(O)?vp(O).call(O,(function(c){C(_,c)})):C(_,O),c.to instanceof Object&&c.to.edges)&&vp(T=c.to.edges).call(T,(function(c){var f=r(c);w.edges.push(f)}))}))}return b.attr&&(w.options=b.attr),w}var aw=Object.freeze({__proto__:null,DOTToGraph:qb,parseDOT:gb});function Yb(c,f){var b,w={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};null!=f&&(null!=f.fixed&&(w.nodes.fixed=f.fixed),null!=f.parseColor&&(w.nodes.parseColor=f.parseColor),null!=f.inheritColor&&(w.edges.inheritColor=f.inheritColor));var x=c.edges,_=Kf(x).call(x,(function(c){var f={from:c.source,id:c.id,to:c.target};return null!=c.attributes&&(f.attributes=c.attributes),null!=c.label&&(f.label=c.label),null!=c.attributes&&null!=c.attributes.title&&(f.title=c.attributes.title),"Directed"===c.type&&(f.arrows="to"),c.color&&!1===w.edges.inheritColor&&(f.color=c.color),f}));return{nodes:Kf(b=c.nodes).call(b,(function(c){var f={id:c.id,fixed:w.nodes.fixed&&null!=c.x&&null!=c.y};return null!=c.attributes&&(f.attributes=c.attributes),null!=c.label&&(f.label=c.label),null!=c.size&&(f.size=c.size),null!=c.attributes&&null!=c.attributes.title&&(f.title=c.attributes.title),null!=c.title&&(f.title=c.title),null!=c.x&&(f.x=c.x),null!=c.y&&(f.y=c.y),null!=c.color&&(!0===w.nodes.parseColor?f.color=c.color:f.color={background:c.color,border:c.color,highlight:{background:c.color,border:c.color},hover:{background:c.color,border:c.color}}),f})),edges:_}}var hw=Object.freeze({__proto__:null,parseGephi:Yb}),dw=Object.freeze({__proto__:null,cn:{addDescription:"单击空白处放置新节点。",addEdge:"添加连接线",addNode:"添加节点",back:"返回",close:"關閉",createEdgeError:"无法将连接线连接到群集。",del:"删除选定",deleteClusterError:"无法删除群集。",edgeDescription:"单击某个节点并将该连接线拖动到另一个节点以连接它们。",edit:"编辑",editClusterError:"无法编辑群集。",editEdge:"编辑连接线",editEdgeDescription:"单击控制节点并将它们拖到节点上连接。",editNode:"编辑节点"},cs:{addDescription:"Kluknutím do prázdného prostoru můžete přidat nový vrchol.",addEdge:"Přidat hranu",addNode:"Přidat vrchol",back:"Zpět",close:"Zavřít",createEdgeError:"Nelze připojit hranu ke shluku.",del:"Smazat výběr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Přetažením z jednoho vrcholu do druhého můžete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Přetažením kontrolního vrcholu hrany ji můžete připojit k jinému vrcholu.",editNode:"Upravit vrchol"},de:{addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufügen",addNode:"Knoten hinzufügen",back:"Zurück",close:"Schließen",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",del:"Lösche Auswahl",deleteClusterError:"Cluster können nicht gelöscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster können nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},en:{addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},es:{addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",addEdge:"Añadir arista",addNode:"Añadir nodo",back:"Atrás",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selección",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},fr:{addDescription:"Cliquez dans un endroit vide pour placer un nœud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nœud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de créer un lien vers un cluster.",del:"Effacer la sélection",deleteClusterError:"Les clusters ne peuvent pas être effacés.",edgeDescription:"Cliquez sur un nœud et glissez le lien vers un autre nœud pour les connecter.",edit:"Éditer",editClusterError:"Les clusters ne peuvent pas être édités.",editEdge:"Éditer le lien",editEdgeDescription:"Cliquez sur les points de contrôle et glissez-les pour connecter un nœud.",editNode:"Éditer le nœud"},it:{addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},nl:{addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},pt:{addDescription:"Clique em um espaço em branco para adicionar um novo nó",addEdge:"Adicionar aresta",addNode:"Adicionar nó",back:"Voltar",close:"Fechar",createEdgeError:"Não foi possível linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters não puderam ser removidos.",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",edit:"Editar",editClusterError:"Clusters não puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",editNode:"Editar nó"},ru:{addDescription:"Кликните в свободное место, чтобы добавить новый узел.",addEdge:"Добавить ребро",addNode:"Добавить узел",back:"Назад",close:"Закрывать",createEdgeError:"Невозможно соединить ребра в кластер.",del:"Удалить выбранное",deleteClusterError:"Кластеры не могут быть удалены",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",edit:"Редактировать",editClusterError:"Кластеры недоступны для редактирования.",editEdge:"Редактировать ребро",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",editNode:"Редактировать узел"},uk:{addDescription:"Kлікніть на вільне місце, щоб додати новий вузол.",addEdge:"Додати край",addNode:"Додати вузол",back:"Назад",close:"Закрити",createEdgeError:"Не можливо об'єднати краї в групу.",del:"Видалити обране",deleteClusterError:"Групи не можуть бути видалені.",edgeDescription:"Клікніть на вузол і перетягніть край до іншого вузла, щоб їх з'єднати.",edit:"Редагувати",editClusterError:"Групи недоступні для редагування.",editEdge:"Редагувати край",editEdgeDescription:"Клікніть на контрольні точки і перетягніть їх у вузол, щоб підключитися до нього.",editNode:"Редагувати вузол"}});var lw=function(){function t(){vh(this||b,t),(this||b).NUM_ITERATIONS=4,(this||b).image=new Image,(this||b).canvas=document.createElement("canvas")}return wu(t,[{key:"init",value:function(){if(!this.initialized()){(this||b).src=(this||b).image.src;var c=(this||b).image.width,f=(this||b).image.height;(this||b).width=c,(this||b).height=f;var w=Math.floor(f/2),x=Math.floor(f/4),_=Math.floor(f/8),O=Math.floor(f/16),C=Math.floor(c/2),T=Math.floor(c/4),S=Math.floor(c/8),M=Math.floor(c/16);(this||b).canvas.width=3*T,(this||b).canvas.height=w,(this||b).coordinates=[[0,0,C,w],[C,0,T,x],[C,x,S,_],[5*S,x,M,O]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==(this||b).coordinates}},{key:"_fillMipMap",value:function(){var c=(this||b).canvas.getContext("2d"),f=(this||b).coordinates[0];c.drawImage((this||b).image,f[0],f[1],f[2],f[3]);for(var w=1;w<(this||b).NUM_ITERATIONS;w++){var x=(this||b).coordinates[w-1],_=(this||b).coordinates[w];c.drawImage((this||b).canvas,x[0],x[1],x[2],x[3],_[0],_[1],_[2],_[3])}}},{key:"drawImageAtPosition",value:function(c,f,w,x,_,O){if(this.initialized())if(f>2){f*=.5;for(var C=0;f>2&&C<(this||b).NUM_ITERATIONS;)f*=.5,C+=1;C>=(this||b).NUM_ITERATIONS&&(C=(this||b).NUM_ITERATIONS-1);var T=(this||b).coordinates[C];c.drawImage((this||b).canvas,T[0],T[1],T[2],T[3],w,x,_,O)}else c.drawImage((this||b).image,w,x,_,O)}}]),t}(),cw=function(){function t(c){vh(this||b,t),(this||b).images={},(this||b).imageBroken={},(this||b).callback=c}return wu(t,[{key:"_tryloadBrokenUrl",value:function(c,f,b){void 0!==c&&void 0!==b&&(void 0!==f?(b.image.onerror=function(){console.error("Could not load brokenImage:",f)},b.image.src=f):console.warn("No broken url image defined"))}},{key:"_redrawWithImage",value:function(c){(this||b).callback&&this.callback(c)}},{key:"load",value:function(c,f){var w=this||b,x=(this||b).images[c];if(x)return x;var _=new lw;return(this||b).images[c]=_,_.image.onload=function(){w._fixImageCoordinates(_.image),_.init(),w._redrawWithImage(_)},_.image.onerror=function(){console.error("Could not load image:",c),w._tryloadBrokenUrl(c,f,_)},_.image.src=c,_}},{key:"_fixImageCoordinates",value:function(c){0===c.width&&(document.body.appendChild(c),c.width=c.offsetWidth,c.height=c.offsetHeight,document.body.removeChild(c))}}]),t}(),uw={exports:{}},fw=s((function(){if("function"==typeof ArrayBuffer){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})),pw=s,vw=mt,gw=k,yw=fw,mw=Object.isExtensible,ww=pw((function(){mw(1)}))||yw?function(c){return!!vw(c)&&(!yw||"ArrayBuffer"!==gw(c))&&(!mw||mw(c))}:mw,kw=!s((function(){return Object.isExtensible(Object.preventExtensions({}))})),xw=Mi,_w=F,Ew=lo,Ow=mt,Cw=ge,Tw=pi.f,Sw=gd,Mw=bd,Pw=ww,Dw=kw,Iw=!1,Fw=ne("meta"),Nw=0,bw=function(c){Tw(c,Fw,{value:{objectID:"O"+Nw++,weakData:{}}})},Aw=uw.exports={enable:function(){Aw.enable=function(){},Iw=!0;var c=Sw.f,f=_w([].splice),b={};b[Fw]=1,c(b).length&&(Sw.f=function(b){for(var w=c(b),x=0,_=w.length;x<_;x++)if(w[x]===Fw){f(w,x,1);break}return w},xw({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Mw.f}))},fastKey:function(c,f){if(!Ow(c))return"symbol"==typeof c?c:("string"==typeof c?"S":"P")+c;if(!Cw(c,Fw)){if(!Pw(c))return"F";if(!f)return"E";bw(c)}return c[Fw].objectID},getWeakData:function(c,f){if(!Cw(c,Fw)){if(!Pw(c))return!0;if(!f)return!1;bw(c)}return c[Fw].weakData},onFreeze:function(c){return Dw&&Iw&&Pw(c)&&!Cw(c,Fw)&&bw(c),c}};Ew[Fw]=!0;var jw=uw.exports,Lw=Ze,Hw=$,Ww=oi,Vw=Tt,qw=Xs,Uw=Hi,Yw=_t,Xw=Ta,Kw=ka,Gw=Hs,Zw=TypeError,Bw=function(c,f){(this||b).stopped=c,(this||b).result=f},Qw=Bw.prototype,zw=function(c,f,b){var w,x,_,O,C,T,S,M=b&&b.that,P=!(!b||!b.AS_ENTRIES),D=!(!b||!b.IS_RECORD),I=!(!b||!b.IS_ITERATOR),B=!(!b||!b.INTERRUPTED),F=Lw(f,M),g=function(c){return w&&Gw(w,"normal",c),new Bw(!0,c)},y=function(c){return P?(Ww(c),B?F(c[0],c[1],g):F(c[0],c[1])):B?F(c,g):F(c)};if(D)w=c.iterator;else if(I)w=c;else{if(!(x=Kw(c)))throw new Zw(Vw(c)+" is not iterable");if(qw(x)){for(_=0,O=Uw(c);O>_;_++)if((C=y(c[_]))&&Yw(Qw,C))return C;return new Bw(!1)}w=Xw(c,x)}for(T=D?c.next:w.next;!(S=Hw(T,w)).done;){try{C=y(S.value)}catch(c){Gw(w,"throw",c)}if("object"==typeof C&&C&&Yw(Qw,C))return C}return new Bw(!1)},$w=_t,Jw=TypeError,Rw=function(c,f){if($w(f,c))return c;throw new Jw("Incorrect invocation")},tk=Mi,ik=x,nk=jw,rk=s,sk=zi,ak=zw,hk=Rw,dk=q,lk=mt,ck=Y,uk=Gr,fk=pi.f,pk=Zd.forEach,vk=X,gk=ir.set,mk=ir.getterFor,ek=function(c,f,w){var x,_=-1!==c.indexOf("Map"),O=-1!==c.indexOf("Weak"),C=_?"set":"add",T=ik[c],S=T&&T.prototype,M={};if(vk&&dk(T)&&(O||S.forEach&&!rk((function(){(new T).entries().next()})))){var P=(x=f((function(f,b){gk(hk(f,P),{type:c,collection:new T}),ck(b)||ak(b,f[C],{that:f,AS_ENTRIES:_})}))).prototype,D=mk(c);pk(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(c){var f="add"===c||"set"===c;!(c in S)||O&&"clear"===c||sk(P,c,(function(w,x){var _=D(this||b).collection;if(!f&&O&&!lk(w))return"get"===c&&void 0;var C=_[c](0===w?0:w,x);return f?this||b:C}))})),O||fk(P,"size",{configurable:!0,get:function(){return D(this||b).collection.size}})}else x=w.getConstructor(f,c,_,C),nk.enable();return uk(x,c,!1,!0),M[c]=x,tk({global:!0,forced:!0},M),O||w.setStrong(x,c,_),x},bk=Pr,ok=function(c,f,b){for(var w in f)b&&b.unsafe&&c[w]?c[w]=f[w]:bk(c,w,f[w],b);return c},wk=at,kk=vd,xk=X,_k=fe("species"),Ek=zr,Ok=vd,Ck=ok,Tk=Ze,Sk=Rw,Mk=Y,Pk=zw,Dk=Ts,Ik=Ms,yk=function(c){var f=wk(c);xk&&f&&!f[_k]&&kk(f,_k,{configurable:!0,get:function(){return this||b}})},Bk=X,zk=jw.fastKey,Nk=ir.set,Ak=ir.getterFor,Rk={getConstructor:function(c,f,w,x){var _=c((function(c,b){Sk(c,O),Nk(c,{type:f,index:Ek(null),first:void 0,last:void 0,size:0}),Bk||(c.size=0),Mk(b)||Pk(b,c[x],{that:c,AS_ENTRIES:w})})),O=_.prototype,C=Ak(f),a=function(c,f,b){var w,x,_=C(c),O=h(c,f);return O?O.value=b:(_.last=O={index:x=zk(f,!0),key:f,value:b,previous:w=_.last,next:void 0,removed:!1},_.first||(_.first=O),w&&(w.next=O),Bk?_.size++:c.size++,"F"!==x&&(_.index[x]=O)),c},h=function(c,f){var b,w=C(c),x=zk(f);if("F"!==x)return w.index[x];for(b=w.first;b;b=b.next)if(b.key===f)return b};return Ck(O,{clear:function(){for(var c=C(this||b),f=c.index,w=c.first;w;)w.removed=!0,w.previous&&(w.previous=w.previous.next=void 0),delete f[w.index],w=w.next;c.first=c.last=void 0,Bk?c.size=0:(this||b).size=0},delete:function(c){var f=this||b,w=C(f),x=h(f,c);if(x){var _=x.next,O=x.previous;delete w.index[x.index],x.removed=!0,O&&(O.next=_),_&&(_.previous=O),w.first===x&&(w.first=_),w.last===x&&(w.last=O),Bk?w.size--:f.size--}return!!x},forEach:function(c){for(var f,w=C(this||b),x=Tk(c,arguments.length>1?arguments[1]:void 0);f=f?f.next:w.first;)for(x(f.value,f.key,this||b);f&&f.removed;)f=f.previous},has:function(c){return!!h(this||b,c)}}),Ck(O,w?{get:function(c){var f=h(this||b,c);return f&&f.value},set:function(c,f){return a(this||b,0===c?0:c,f)}}:{add:function(c){return a(this||b,c=0===c?0:c,c)}}),Bk&&Ok(O,"size",{configurable:!0,get:function(){return C(this||b).size}}),_},setStrong:function(c,f,w){var x=f+" Iterator",_=Ak(f),O=Ak(x);Dk(c,f,(function(c,f){Nk(this||b,{type:x,target:c,state:_(c),kind:f,last:void 0})}),(function(){for(var c=O(this||b),f=c.kind,w=c.last;w&&w.removed;)w=w.previous;return c.target&&(c.last=w=w?w.next:c.state.first)?Ik("keys"===f?w.key:"values"===f?w.value:[w.key,w.value],!1):(c.target=void 0,Ik(void 0,!0))}),w?"entries":"values",!w,!0),yk(f)}};ek("Map",(function(c){return function(){return c(this||b,arguments.length?arguments[0]:void 0)}}),Rk);var jk=o(bt.Map),Lk=function(){function t(){vh(this||b,t),this.clear(),(this||b)._defaultIndex=0,(this||b)._groupIndex=0,(this||b)._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],(this||b).options={},(this||b).defaultOptions={useDefaultGroups:!0},No((this||b).options,(this||b).defaultOptions)}return wu(t,[{key:"setOptions",value:function(c){var f=["useDefaultGroups"];if(void 0!==c)for(var b in c)if(Object.prototype.hasOwnProperty.call(c,b)&&-1===ag(f).call(f,b)){var w=c[b];this.add(b,w)}}},{key:"clear",value:function(){(this||b)._groups=new jk,(this||b)._groupNames=[]}},{key:"get",value:function(c){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],w=(this||b)._groups.get(c);if(void 0===w&&f)if(!1===(this||b).options.useDefaultGroups&&(this||b)._groupNames.length>0){var x=(this||b)._groupIndex%(this||b)._groupNames.length;++(this||b)._groupIndex,(w={}).color=(this||b)._groups.get((this||b)._groupNames[x]),(this||b)._groups.set(c,w)}else{var _=(this||b)._defaultIndex%(this||b)._defaultGroups.length;(this||b)._defaultIndex++,(w={}).color=(this||b)._defaultGroups[_],(this||b)._groups.set(c,w)}return w}},{key:"add",value:function(c,f){return(this||b)._groups.has(c)||(this||b)._groupNames.push(c),(this||b)._groups.set(c,f),f}}]),t}();Mi({target:"Number",stat:!0},{isNaN:function(c){return c!=c}});var Hk=o(bt.Number.isNaN),Wk=x.isFinite,Vk=Number.isFinite||function(c){return"number"==typeof c&&Wk(c)};Mi({target:"Number",stat:!0},{isFinite:Vk});var qk=o(bt.Number.isFinite),Uk=Zd.some;Mi({target:"Array",proto:!0,forced:!Hf("some")},{some:function(c){return Uk(this||b,c,arguments.length>1?arguments[1]:void 0)}});var Yk=zo("Array").some,Xk=_t,Kk=Yk,Gk=Array.prototype,Fk=function(c){var f=c.some;return c===Gk||Xk(Gk,c)&&f===Gk.some?Kk:f},Zk=o(Fk),Qk=o(bt.Object.getOwnPropertySymbols),$k={exports:{}},Jk=Mi,tx=s,ex=Q,ix=U.f,ox=X;Jk({target:"Object",stat:!0,forced:!ox||tx((function(){ix(1)})),sham:!ox},{getOwnPropertyDescriptor:function(c,f){return ix(ex(c),f)}});var nx=bt.Object,rx=$k.exports=function(c,f){return nx.getOwnPropertyDescriptor(c,f)};nx.getOwnPropertyDescriptor.sham&&(rx.sham=!0);var sx=$k.exports,ax=o(sx),hx=Lf,dx=Q,fx=U,vx=va;Mi({target:"Object",stat:!0,sham:!X},{getOwnPropertyDescriptors:function(c){for(var f,b,w=dx(c),x=fx.f,_=hx(w),O={},C=0;_.length>C;)void 0!==(b=x(w,f=_[C++]))&&vx(O,f,b);return O}});var yx=o(bt.Object.getOwnPropertyDescriptors),bx={exports:{}},kx=Mi,xx=X,Ox=dr.f;kx({target:"Object",stat:!0,forced:Object.defineProperties!==Ox,sham:!xx},{defineProperties:Ox});var Mx=bt.Object,Dx=bx.exports=function(c,f){return Mx.defineProperties(c,f)};Mx.defineProperties.sham&&(Dx.sham=!0);var Bx=o(bx.exports),zx=o(Hh);function s_(c,f,b){return(f=mu(f))in c?Wh(c,f,{value:b,enumerable:!0,configurable:!0,writable:!0}):c[f]=b,c}var Ax=x,jx=s,Hx=un,Vx=Fv.trim,Ux=Tv,Xx=F("".charAt),Gx=Ax.parseFloat,Zx=Ax.Symbol,Jx=Zx&&Zx.iterator,t_=1/Gx(Ux+"-0")!=-1/0||Jx&&!jx((function(){Gx(Object(Jx))}))?function(c){var f=Vx(Hx(c)),b=Gx(f);return 0===b&&"-"===Xx(f,0)?-0:b}:Gx;Mi({global:!0,forced:parseFloat!==t_},{parseFloat:t_});var e_=o(bt.parseFloat),i_=Mi,o_=s,n_=bd.f;i_({target:"Object",stat:!0,forced:o_((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:n_});var r_=bt.Object,__=function(c){return r_.getOwnPropertyNames(c)},a_=o(__);function E_(c,f){var b=["node","edge","label"],w=!0,x=tb(f,"chosen");if("boolean"==typeof x)w=x;else if("object"===gu(x)){if(-1===ag(b).call(b,c))throw new Error("choosify: subOption '"+c+"' should be one of '"+b.join("', '")+"'");var _=tb(f,["chosen",c]);"boolean"!=typeof _&&"function"!=typeof _||(w=_)}return w}function O_(c,f,b){if(c.width<=0||c.height<=0)return!1;if(void 0!==b){var w={x:f.x-b.x,y:f.y-b.y};if(0!==b.angle){var x=-b.angle;f={x:Math.cos(x)*w.x-Math.sin(x)*w.y,y:Math.sin(x)*w.x+Math.cos(x)*w.y}}else f=w}var _=c.x+c.width,O=c.y+c.width;return c.left<f.x&&_>f.x&&c.top<f.y&&O>f.y}function C_(c){return"string"==typeof c&&""!==c}function S_(c,f,b,w){var x=w.x,_=w.y;if("function"==typeof w.distanceToBorder){var O=w.distanceToBorder(c,f),C=Math.sin(f)*O,T=Math.cos(f)*O;T===O?(x+=O,_=w.y):C===O?(x=w.x,_-=O):(x+=T,_-=C)}else w.shape.width>w.shape.height?(x=w.x+.5*w.shape.width,_=w.y-b):(x=w.x+b,_=w.y-.5*w.shape.height);return{x:x,y:_}}var h_=zo("Array").values,d_=Cn,l_=ge,c_=_t,u_=h_,f_=Array.prototype,p_={DOMTokenList:!0,NodeList:!0},z_=function(c){var f=c.values;return c===f_||c_(f_,c)&&f===f_.values||l_(p_,d_(c))?u_:f},v_=o(z_),g_=function(){function t(c){vh(this||b,t),(this||b).measureText=c,(this||b).current=0,(this||b).width=0,(this||b).height=0,(this||b).lines=[]}return wu(t,[{key:"_add",value:function(c,f){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";void 0===(this||b).lines[c]&&((this||b).lines[c]={width:0,height:0,blocks:[]});var x=f;void 0!==f&&""!==f||(x=" ");var _=this.measureText(x,w),O=No({},v_(_));O.text=f,O.width=_.width,O.mod=w,void 0!==f&&""!==f||(O.width=0),(this||b).lines[c].blocks.push(O),(this||b).lines[c].width+=O.width}},{key:"curWidth",value:function(){var c=(this||b).lines[(this||b).current];return void 0===c?0:c.width}},{key:"append",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add((this||b).current,c,f)}},{key:"newLine",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add((this||b).current,c,f),(this||b).current++}},{key:"determineLineHeights",value:function(){for(var c=0;c<(this||b).lines.length;c++){var f=(this||b).lines[c],w=0;if(void 0!==f.blocks)for(var x=0;x<f.blocks.length;x++){var _=f.blocks[x];w<_.height&&(w=_.height)}f.height=w}}},{key:"determineLabelSize",value:function(){for(var c=0,f=0,w=0;w<(this||b).lines.length;w++){var x=(this||b).lines[w];x.width>c&&(c=x.width),f+=x.height}(this||b).width=c,(this||b).height=f}},{key:"removeEmptyBlocks",value:function(){for(var c=[],f=0;f<(this||b).lines.length;f++){var w=(this||b).lines[f];if(0!==w.blocks.length&&(f!==(this||b).lines.length-1||0!==w.width)){var x={};No(x,w),x.blocks=[];for(var _=void 0,O=[],C=0;C<w.blocks.length;C++){var T=w.blocks[C];0!==T.width?O.push(T):void 0===_&&(_=T)}0===O.length&&void 0!==_&&O.push(_),x.blocks=O,c.push(x)}}return c}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var c=this.removeEmptyBlocks();return{width:(this||b).width,height:(this||b).height,lines:c}}}]),t}(),y_={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},m_=function(){function t(c){vh(this||b,t),(this||b).text=c,(this||b).bold=!1,(this||b).ital=!1,(this||b).mono=!1,(this||b).spacing=!1,(this||b).position=0,(this||b).buffer="",(this||b).modStack=[],(this||b).blocks=[]}return wu(t,[{key:"mod",value:function(){return 0===(this||b).modStack.length?"normal":(this||b).modStack[0]}},{key:"modName",value:function(){return 0===(this||b).modStack.length?"normal":"mono"===(this||b).modStack[0]?"mono":(this||b).bold&&(this||b).ital?"boldital":(this||b).bold?"bold":(this||b).ital?"ital":void 0}},{key:"emitBlock",value:function(){(this||b).spacing&&(this.add(" "),(this||b).spacing=!1),(this||b).buffer.length>0&&((this||b).blocks.push({text:(this||b).buffer,mod:this.modName()}),(this||b).buffer="")}},{key:"add",value:function(c){" "===c&&((this||b).spacing=!0),(this||b).spacing&&((this||b).buffer+=" ",(this||b).spacing=!1)," "!=c&&((this||b).buffer+=c)}},{key:"parseWS",value:function(c){return!!/[ \t]/.test(c)&&((this||b).mono?this.add(c):(this||b).spacing=!0,!0)}},{key:"setTag",value:function(c){this.emitBlock(),(this||b)[c]=!0,(this||b).modStack.unshift(c)}},{key:"unsetTag",value:function(c){this.emitBlock(),(this||b)[c]=!1,(this||b).modStack.shift()}},{key:"parseStartTag",value:function(c,f){return!((this||b).mono||(this||b)[c]||!this.match(f))&&(this.setTag(c),!0)}},{key:"match",value:function(c){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],w=df(this.prepareRegExp(c),2),x=w[0],_=w[1],O=x.test((this||b).text.substr((this||b).position,_));return O&&f&&((this||b).position+=_-1),O}},{key:"parseEndTag",value:function(c,f,w){var x=this.mod()===c;return!(!(x="mono"===c?x&&(this||b).mono:x&&!(this||b).mono)||!this.match(f))&&(void 0!==w?((this||b).position===(this||b).text.length-1||this.match(w,!1))&&this.unsetTag(c):this.unsetTag(c),!0)}},{key:"replace",value:function(c,f){return!!this.match(c)&&(this.add(f),(this||b).position+=length-1,!0)}},{key:"prepareRegExp",value:function(c){var f,b;if(c instanceof RegExp)b=c,f=1;else{var w=y_[c];b=void 0!==w?w:new RegExp(c),f=c.length}return[b,f]}}]),t}(),b_=function(){function t(c,f,w,x){var _=this||b;vh(this||b,t),(this||b).ctx=c,(this||b).parent=f,(this||b).selected=w,(this||b).hover=x;(this||b).lines=new g_((function(f,b){if(void 0===f)return 0;var O=_.parent.getFormattingValues(c,w,x,b),C=0;""!==f&&(C=_.ctx.measureText(f).width);return{width:C,values:O}}))}return wu(t,[{key:"process",value:function(c){if(!C_(c))return(this||b).lines.finalize();var f=(this||b).parent.fontOptions;c=(c=c.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");var w=String(c).split("\n"),x=w.length;if(f.multi)for(var _=0;_<x;_++){var O=this.splitBlocks(w[_],f.multi);if(void 0!==O)if(0!==O.length){if(f.maxWdt>0)for(var C=0;C<O.length;C++){var T=O[C].mod,S=O[C].text;this.splitStringIntoLines(S,T,!0)}else for(var M=0;M<O.length;M++){var P=O[M].mod,D=O[M].text;(this||b).lines.append(D,P)}(this||b).lines.newLine()}else(this||b).lines.newLine("")}else if(f.maxWdt>0)for(var I=0;I<x;I++)this.splitStringIntoLines(w[I]);else for(var B=0;B<x;B++)(this||b).lines.newLine(w[B]);return(this||b).lines.finalize()}},{key:"decodeMarkupSystem",value:function(c){var f="none";return"markdown"===c||"md"===c?f="markdown":!0!==c&&"html"!==c||(f="html"),f}},{key:"splitHtmlBlocks",value:function(c){for(var f=new m_(c),i=function(c){return!!/&/.test(c)&&(f.replace(f.text,"&lt;","<")||f.replace(f.text,"&amp;","&")||f.add("&"),!0)};f.position<f.text.length;){var b=f.text.charAt(f.position);f.parseWS(b)||/</.test(b)&&(f.parseStartTag("bold","<b>")||f.parseStartTag("ital","<i>")||f.parseStartTag("mono","<code>")||f.parseEndTag("bold","</b>")||f.parseEndTag("ital","</i>")||f.parseEndTag("mono","</code>"))||i(b)||f.add(b),f.position++}return f.emitBlock(),f.blocks}},{key:"splitMarkdownBlocks",value:function(c){for(var f=this||b,w=new m_(c),x=!0,n=function(c){return!!/\\/.test(c)&&(w.position<f.text.length+1&&(w.position++,c=f.text.charAt(w.position),/ \t/.test(c)?w.spacing=!0:(w.add(c),x=!1)),!0)};w.position<w.text.length;){var _=w.text.charAt(w.position);w.parseWS(_)||n(_)||(x||w.spacing)&&(w.parseStartTag("bold","*")||w.parseStartTag("ital","_")||w.parseStartTag("mono","`"))||w.parseEndTag("bold","*","afterBold")||w.parseEndTag("ital","_","afterItal")||w.parseEndTag("mono","`","afterMono")||(w.add(_),x=!1),w.position++}return w.emitBlock(),w.blocks}},{key:"splitBlocks",value:function(c,f){var b=this.decodeMarkupSystem(f);return"none"===b?[{text:c,mod:"normal"}]:"markdown"===b?this.splitMarkdownBlocks(c):"html"===b?this.splitHtmlBlocks(c):void 0}},{key:"overMaxWidth",value:function(c){var f=(this||b).ctx.measureText(c).width;return(this||b).lines.curWidth()+f>(this||b).parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(c){for(var f="",b=0;b<c.length;){var w=f+(""===f?"":" ")+c[b];if(this.overMaxWidth(w))break;f=w,b++}return b}},{key:"getLongestFitWord",value:function(c){for(var f=0;f<c.length&&!this.overMaxWidth(Ff(c).call(c,0,f));)f++;return f}},{key:"splitStringIntoLines",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",w=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(this||b).parent.getFormattingValues((this||b).ctx,(this||b).selected,(this||b).hover,f);for(var x=(c=(c=c.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");x.length>0;){var _=this.getLongestFit(x);if(0===_){var O=x[0],C=this.getLongestFitWord(O);(this||b).lines.newLine(Ff(O).call(O,0,C),f),x[0]=Ff(O).call(O,C)}else{var T=_;" "===x[_-1]?_--:" "===x[T]&&T++;var S=Ff(x).call(x,0,_).join("");_==x.length&&w?(this||b).lines.append(S,f):(this||b).lines.newLine(S,f),x=Ff(x).call(x,T)}}}}]),t}(),w_=["bold","ital","boldital","mono"],k_=function(){function t(c,f){var w=arguments.length>2&&void 0!==arguments[2]&&arguments[2];vh(this||b,t),(this||b).body=c,(this||b).pointToSelf=!1,(this||b).baseSize=void 0,(this||b).fontOptions={},this.setOptions(f),(this||b).size={top:0,left:0,width:0,height:0,yLine:0},(this||b).isEdgeLabel=w}return wu(t,[{key:"setOptions",value:function(c){if((this||b).elementOptions=c,this.initFontOptions(c.font),C_(c.label)?(this||b).labelDirty=!0:c.label=void 0,void 0!==c.font&&null!==c.font)if("string"==typeof c.font)(this||b).baseSize=(this||b).fontOptions.size;else if("object"===gu(c.font)){var f=c.font.size;void 0!==f&&((this||b).baseSize=f)}}},{key:"initFontOptions",value:function(c){var f=this||b;Hm(w_,(function(c){f.fontOptions[c]={}})),t.parseFontString((this||b).fontOptions,c)?(this||b).fontOptions.vadjust=0:Hm(c,(function(c,b){null!=c&&"object"!==gu(c)&&(f.fontOptions[b]=c)}))}},{key:"constrain",value:function(c){var f={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},b=tb(c,"widthConstraint");if("number"==typeof b)f.maxWdt=Number(b),f.minWdt=Number(b);else if("object"===gu(b)){var w=tb(c,["widthConstraint","maximum"]);"number"==typeof w&&(f.maxWdt=Number(w));var x=tb(c,["widthConstraint","minimum"]);"number"==typeof x&&(f.minWdt=Number(x))}var _=tb(c,"heightConstraint");if("number"==typeof _)f.minHgt=Number(_);else if("object"===gu(_)){var O=tb(c,["heightConstraint","minimum"]);"number"==typeof O&&(f.minHgt=Number(O));var C=tb(c,["heightConstraint","valign"]);"string"==typeof C&&("top"!==C&&"bottom"!==C||(f.valign=C))}return f}},{key:"update",value:function(c,f){this.setOptions(c,!0),this.propagateFonts(f),Rm((this||b).fontOptions,this.constrain(f)),(this||b).fontOptions.chooser=E_("label",f)}},{key:"adjustSizes",value:function(c){var f=c?c.right+c.left:0;(this||b).fontOptions.constrainWidth&&((this||b).fontOptions.maxWdt-=f,(this||b).fontOptions.minWdt-=f);var w=c?c.top+c.bottom:0;(this||b).fontOptions.constrainHeight&&((this||b).fontOptions.minHgt-=w)}},{key:"addFontOptionsToPile",value:function(c,f){for(var b=0;b<f.length;++b)this.addFontToPile(c,f[b])}},{key:"addFontToPile",value:function(c,f){if(void 0!==f&&void 0!==f.font&&null!==f.font){var b=f.font;c.push(b)}}},{key:"getBasicOptions",value:function(c){for(var f={},b=0;b<c.length;++b){var w=c[b],x={};t.parseFontString(x,w)&&(w=x),Hm(w,(function(c,b){void 0!==c&&(Object.prototype.hasOwnProperty.call(f,b)||(-1!==ag(w_).call(w_,b)?f[b]={}:f[b]=c))}))}return f}},{key:"getFontOption",value:function(c,f,w){for(var x,_=0;_<c.length;++_){var O=c[_];if(Object.prototype.hasOwnProperty.call(O,f)){if(null==(x=O[f]))continue;var C={};if(t.parseFontString(C,x)&&(x=C),Object.prototype.hasOwnProperty.call(x,w))return x[w]}}if(Object.prototype.hasOwnProperty.call((this||b).fontOptions,w))return(this||b).fontOptions[w];throw new Error("Did not find value for multi-font for property: '"+w+"'")}},{key:"getFontOptions",value:function(c,f){for(var b={},w=["color","size","face","mod","vadjust"],x=0;x<w.length;++x){var _=w[x];b[_]=this.getFontOption(c,f,_)}return b}},{key:"propagateFonts",value:function(c){var f=this||b,w=[];this.addFontOptionsToPile(w,c),(this||b).fontOptions=this.getBasicOptions(w);for(var o=function(){var c=w_[x],b=f.fontOptions[c];Hm(f.getFontOptions(w,c),(function(c,f){b[f]=c})),b.size=Number(b.size),b.vadjust=Number(b.vadjust)},x=0;x<w_.length;++x)o()}},{key:"draw",value:function(c,f,w,x,_){var O=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==(this||b).elementOptions.label){var C=(this||b).fontOptions.size*(this||b).body.view.scale;(this||b).elementOptions.label&&C<(this||b).elementOptions.scaling.label.drawThreshold-1||(C>=(this||b).elementOptions.scaling.label.maxVisible&&(C=Number((this||b).elementOptions.scaling.label.maxVisible)/(this||b).body.view.scale),this.calculateLabelSize(c,x,_,f,w,O),this._drawBackground(c),this._drawText(c,f,(this||b).size.yLine,O,C))}}},{key:"_drawBackground",value:function(c){if(void 0!==(this||b).fontOptions.background&&"none"!==(this||b).fontOptions.background){c.fillStyle=(this||b).fontOptions.background;var f=this.getSize();c.fillRect(f.left,f.top,f.width,f.height)}}},{key:"_drawText",value:function(c,f,w){var x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle",_=arguments.length>4?arguments[4]:void 0,O=df(this._setAlignment(c,f,w,x),2);f=O[0],w=O[1],c.textAlign="left",f-=(this||b).size.width/2,(this||b).fontOptions.valign&&(this||b).size.height>(this||b).size.labelHeight&&("top"===(this||b).fontOptions.valign&&(w-=((this||b).size.height-(this||b).size.labelHeight)/2),"bottom"===(this||b).fontOptions.valign&&(w+=((this||b).size.height-(this||b).size.labelHeight)/2));for(var C=0;C<(this||b).lineCount;C++){var T=(this||b).lines[C];if(T&&T.blocks){var S=0;(this||b).isEdgeLabel||"center"===(this||b).fontOptions.align?S+=((this||b).size.width-T.width)/2:"right"===(this||b).fontOptions.align&&(S+=(this||b).size.width-T.width);for(var M=0;M<T.blocks.length;M++){var P=T.blocks[M];c.font=P.font;var D=df(this._getColor(P.color,_,P.strokeColor),2),I=D[0],B=D[1];P.strokeWidth>0&&(c.lineWidth=P.strokeWidth,c.strokeStyle=B,c.lineJoin="round"),c.fillStyle=I,P.strokeWidth>0&&c.strokeText(P.text,f+S,w+P.vadjust),c.fillText(P.text,f+S,w+P.vadjust),S+=P.width}w+=T.height}}}},{key:"_setAlignment",value:function(c,f,w,x){if((this||b).isEdgeLabel&&"horizontal"!==(this||b).fontOptions.align&&!1===(this||b).pointToSelf){f=0,w=0;"top"===(this||b).fontOptions.align?(c.textBaseline="alphabetic",w-=4):"bottom"===(this||b).fontOptions.align?(c.textBaseline="hanging",w+=4):c.textBaseline="middle"}else c.textBaseline=x;return[f,w]}},{key:"_getColor",value:function(c,f,w){var x=c||"#000000",_=w||"#ffffff";if(f<=(this||b).elementOptions.scaling.label.drawThreshold){var O=Math.max(0,Math.min(1,1-((this||b).elementOptions.scaling.label.drawThreshold-f)));x=Vm(x,O),_=Vm(_,O)}return[x,_]}},{key:"getTextSize",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]&&arguments[1],w=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._processLabel(c,f,w),{width:(this||b).size.width,height:(this||b).size.height,lineCount:(this||b).lineCount}}},{key:"getSize",value:function(){var c=(this||b).size.left,f=(this||b).size.top-1;if((this||b).isEdgeLabel){var w=.5*-(this||b).size.width;switch((this||b).fontOptions.align){case"middle":c=w,f=.5*-(this||b).size.height;break;case"top":c=w,f=-((this||b).size.height+2);break;case"bottom":c=w,f=2}}return{left:c,top:f,width:(this||b).size.width,height:(this||b).size.height}}},{key:"calculateLabelSize",value:function(c,f,w){var x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,_=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,O=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(c,f,w),(this||b).size.left=x-.5*(this||b).size.width,(this||b).size.top=_-.5*(this||b).size.height,(this||b).size.yLine=_+.5*(1-(this||b).lineCount)*(this||b).fontOptions.size,"hanging"===O&&((this||b).size.top+=.5*(this||b).fontOptions.size,(this||b).size.top+=4,(this||b).size.yLine+=4)}},{key:"getFormattingValues",value:function(c,f,w,x){var n=function(c,f,b){return"normal"===f?"mod"===b?"":c[b]:void 0!==c[f][b]?c[f][b]:c[b]},_={color:n((this||b).fontOptions,x,"color"),size:n((this||b).fontOptions,x,"size"),face:n((this||b).fontOptions,x,"face"),mod:n((this||b).fontOptions,x,"mod"),vadjust:n((this||b).fontOptions,x,"vadjust"),strokeWidth:(this||b).fontOptions.strokeWidth,strokeColor:(this||b).fontOptions.strokeColor};(f||w)&&("normal"===x&&!0===(this||b).fontOptions.chooser&&(this||b).elementOptions.labelHighlightBold?_.mod="bold":"function"==typeof(this||b).fontOptions.chooser&&(this||b).fontOptions.chooser(_,(this||b).elementOptions.id,f,w));var O="";return void 0!==_.mod&&""!==_.mod&&(O+=_.mod+" "),O+=_.size+"px "+_.face,c.font=O.replace(/"/g,""),_.font=c.font,_.height=_.size,_}},{key:"differentState",value:function(c,f){return c!==(this||b).selectedState||f!==(this||b).hoverState}},{key:"_processLabelText",value:function(c,f,w,x){return new b_(c,this||b,f,w).process(x)}},{key:"_processLabel",value:function(c,f,w){if(!1!==(this||b).labelDirty||this.differentState(f,w)){var x=this._processLabelText(c,f,w,(this||b).elementOptions.label);(this||b).fontOptions.minWdt>0&&x.width<(this||b).fontOptions.minWdt&&(x.width=(this||b).fontOptions.minWdt),(this||b).size.labelHeight=x.height,(this||b).fontOptions.minHgt>0&&x.height<(this||b).fontOptions.minHgt&&(x.height=(this||b).fontOptions.minHgt),(this||b).lines=x.lines,(this||b).lineCount=x.lines.length,(this||b).size.width=x.width,(this||b).size.height=x.height,(this||b).selectedState=f,(this||b).hoverState=w,(this||b).labelDirty=!1}}},{key:"visible",value:function(){return 0!==(this||b).size.width&&0!==(this||b).size.height&&void 0!==(this||b).elementOptions.label&&!((this||b).fontOptions.size*(this||b).body.view.scale<(this||b).elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(c,f){if(!f||"string"!=typeof f)return!1;var b=f.split(" ");return c.size=+b[0].replace("px",""),c.face=b[1],c.color=b[2],!0}}]),t}(),x_=Ma,T_=Tt,M_=TypeError,P_=Mi,D_=M,I_=tn,G_=function(c){if(x_(c))return c;throw new M_(T_(c)+" is not a constructor")},B_=oi,F_=mt,N_=zr,A_=s,R_=at("Reflect","construct"),j_=Object.prototype,L_=[].push,H_=A_((function(){function t(){}return!(R_((function(){}),[],t)instanceof t)})),W_=!A_((function(){R_((function(){}))})),V_=H_||W_;P_({target:"Reflect",stat:!0,forced:V_,sham:V_},{construct:function(c,f){G_(c),B_(f);var b=arguments.length<3?c:G_(arguments[2]);if(W_&&!H_)return R_(c,f,b);if(c===b){switch(f.length){case 0:return new c;case 1:return new c(f[0]);case 2:return new c(f[0],f[1]);case 3:return new c(f[0],f[1],f[2]);case 4:return new c(f[0],f[1],f[2],f[3])}var w=[null];return D_(L_,w,f),new(D_(I_,c,w))}var x=b.prototype,_=N_(F_(x)?x:j_),O=D_(c,_,f);return F_(O)?O:_}});var q_=o(bt.Reflect.construct),U_=o(Uv);Mi({target:"Object",stat:!0},{setPrototypeOf:Ps});var Y_=o(bt.Object.setPrototypeOf),X_=o(hn);function lx(c,f){var b;return lx=Y_?X_(b=Y_).call(b):function(c,f){return c.__proto__=f,c},lx(c,f)}function cx(c,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function");c.prototype=U_(f&&f.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Wh(c,"prototype",{writable:!1}),f&&lx(c,f)}function ux(c,f){if(f&&("object"===gu(f)||"function"==typeof f))return f;if(void 0!==f)throw new TypeError("Derived constructors may only return object or undefined");return function(c){if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(c)}var K_=o(bv);function px(c){var f;return px=Y_?X_(f=K_).call(f):function(c){return c.__proto__||K_(c)},px(c)}var Z_=function(){function t(c,f,w){vh(this||b,t),(this||b).body=f,(this||b).labelModule=w,this.setOptions(c),(this||b).top=void 0,(this||b).left=void 0,(this||b).height=void 0,(this||b).width=void 0,(this||b).radius=void 0,(this||b).margin=void 0,(this||b).refreshNeeded=!0,(this||b).boundingBox={top:0,left:0,right:0,bottom:0}}return wu(t,[{key:"setOptions",value:function(c){(this||b).options=c}},{key:"_setMargins",value:function(c){(this||b).margin={},(this||b).options.margin&&("object"==gu((this||b).options.margin)?((this||b).margin.top=(this||b).options.margin.top,(this||b).margin.right=(this||b).options.margin.right,(this||b).margin.bottom=(this||b).options.margin.bottom,(this||b).margin.left=(this||b).options.margin.left):((this||b).margin.top=(this||b).options.margin,(this||b).margin.right=(this||b).options.margin,(this||b).margin.bottom=(this||b).options.margin,(this||b).margin.left=(this||b).options.margin)),c.adjustSizes((this||b).margin)}},{key:"_distanceToBorder",value:function(c,f){var w=(this||b).options.borderWidth;return c&&this.resize(c),Math.min(Math.abs((this||b).width/2/Math.cos(f)),Math.abs((this||b).height/2/Math.sin(f)))+w}},{key:"enableShadow",value:function(c,f){f.shadow&&(c.shadowColor=f.shadowColor,c.shadowBlur=f.shadowSize,c.shadowOffsetX=f.shadowX,c.shadowOffsetY=f.shadowY)}},{key:"disableShadow",value:function(c,f){f.shadow&&(c.shadowColor="rgba(0,0,0,0)",c.shadowBlur=0,c.shadowOffsetX=0,c.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(c,f){if(!1!==f.borderDashes)if(void 0!==c.setLineDash){var w=f.borderDashes;!0===w&&(w=[5,15]),c.setLineDash(w)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),(this||b).options.shapeProperties.borderDashes=!1,f.borderDashes=!1}},{key:"disableBorderDashes",value:function(c,f){!1!==f.borderDashes&&(void 0!==c.setLineDash?c.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),(this||b).options.shapeProperties.borderDashes=!1,f.borderDashes=!1))}},{key:"needsRefresh",value:function(c,f){return!0===(this||b).refreshNeeded?((this||b).refreshNeeded=!1,!0):void 0===(this||b).width||(this||b).labelModule.differentState(c,f)}},{key:"initContextForDraw",value:function(c,f){var w=f.borderWidth/(this||b).body.view.scale;c.lineWidth=Math.min((this||b).width,w),c.strokeStyle=f.borderColor,c.fillStyle=f.color}},{key:"performStroke",value:function(c,f){var w=f.borderWidth/(this||b).body.view.scale;c.save(),w>0&&(this.enableBorderDashes(c,f),c.stroke(),this.disableBorderDashes(c,f)),c.restore()}},{key:"performFill",value:function(c,f){c.save(),c.fillStyle=f.color,this.enableShadow(c,f),Ug(c).call(c),this.disableShadow(c,f),c.restore(),this.performStroke(c,f)}},{key:"_addBoundingBoxMargin",value:function(c){(this||b).boundingBox.left-=c,(this||b).boundingBox.top-=c,(this||b).boundingBox.bottom+=c,(this||b).boundingBox.right+=c}},{key:"_updateBoundingBox",value:function(c,f,w,x,_){void 0!==w&&this.resize(w,x,_),(this||b).left=c-(this||b).width/2,(this||b).top=f-(this||b).height/2,(this||b).boundingBox.left=(this||b).left,(this||b).boundingBox.top=(this||b).top,(this||b).boundingBox.bottom=(this||b).top+(this||b).height,(this||b).boundingBox.right=(this||b).left+(this||b).width}},{key:"updateBoundingBox",value:function(c,f,b,w,x){this._updateBoundingBox(c,f,b,w,x)}},{key:"getDimensionsFromLabel",value:function(c,f,w){(this||b).textSize=(this||b).labelModule.getTextSize(c,f,w);var x=(this||b).textSize.width,_=(this||b).textSize.height;return 0===x&&(x=14,_=14),{width:x,height:_}}}]),t}();function gx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var Q_=function(c){cx(i,c);var f=gx(i);function i(c,w,x){var _;return vh(this||b,i),(_=f.call(this||b,c,w,x))._setMargins(x),_}return wu(i,[{key:"resize",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(this||b).selected,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(this||b).hover;if(this.needsRefresh(f,w)){var x=this.getDimensionsFromLabel(c,f,w);(this||b).width=x.width+(this||b).margin.right+(this||b).margin.left,(this||b).height=x.height+(this||b).margin.top+(this||b).margin.bottom,(this||b).radius=(this||b).width/2}}},{key:"draw",value:function(c,f,w,x,_,O){this.resize(c,x,_),(this||b).left=f-(this||b).width/2,(this||b).top=w-(this||b).height/2,this.initContextForDraw(c,O),qo(c,(this||b).left,(this||b).top,(this||b).width,(this||b).height,O.borderRadius),this.performFill(c,O),this.updateBoundingBox(f,w,c,x,_),(this||b).labelModule.draw(c,(this||b).left+(this||b).textSize.width/2+(this||b).margin.left,(this||b).top+(this||b).textSize.height/2+(this||b).margin.top,x,_)}},{key:"updateBoundingBox",value:function(c,f,w,x,_){this._updateBoundingBox(c,f,w,x,_);var O=(this||b).options.shapeProperties.borderRadius;this._addBoundingBoxMargin(O)}},{key:"distanceToBorder",value:function(c,f){c&&this.resize(c);var w=(this||b).options.borderWidth;return Math.min(Math.abs((this||b).width/2/Math.cos(f)),Math.abs((this||b).height/2/Math.sin(f)))+w}}]),i}(Z_);function mx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var $_=function(c){cx(i,c);var f=mx(i);function i(c,w,x){var _;return vh(this||b,i),(_=f.call(this||b,c,w,x)).labelOffset=0,_.selected=!1,_}return wu(i,[{key:"setOptions",value:function(c,f,w){(this||b).options=c,void 0===f&&void 0===w||this.setImages(f,w)}},{key:"setImages",value:function(c,f){f&&(this||b).selected?((this||b).imageObj=f,(this||b).imageObjAlt=c):((this||b).imageObj=c,(this||b).imageObjAlt=f)}},{key:"switchImages",value:function(c){var f=c&&!(this||b).selected||!c&&(this||b).selected;if((this||b).selected=c,void 0!==(this||b).imageObjAlt&&f){var w=(this||b).imageObj;(this||b).imageObj=(this||b).imageObjAlt,(this||b).imageObjAlt=w}}},{key:"_getImagePadding",value:function(){var c={top:0,right:0,bottom:0,left:0};if((this||b).options.imagePadding){var f=(this||b).options.imagePadding;"object"==gu(f)?(c.top=f.top,c.right=f.right,c.bottom=f.bottom,c.left=f.left):(c.top=f,c.right=f,c.bottom=f,c.left=f)}return c}},{key:"_resizeImage",value:function(){var c,f;if(!1===(this||b).options.shapeProperties.useImageSize){var w=1,x=1;(this||b).imageObj.width&&(this||b).imageObj.height&&((this||b).imageObj.width>(this||b).imageObj.height?w=(this||b).imageObj.width/(this||b).imageObj.height:x=(this||b).imageObj.height/(this||b).imageObj.width),c=2*(this||b).options.size*w,f=2*(this||b).options.size*x}else{var _=this._getImagePadding();c=(this||b).imageObj.width+_.left+_.right,f=(this||b).imageObj.height+_.top+_.bottom}(this||b).width=c,(this||b).height=f,(this||b).radius=.5*(this||b).width}},{key:"_drawRawCircle",value:function(c,f,b,w){this.initContextForDraw(c,w),Vo(c,f,b,w.size),this.performFill(c,w)}},{key:"_drawImageAtPosition",value:function(c,f){if(0!=(this||b).imageObj.width){c.globalAlpha=void 0!==f.opacity?f.opacity:1,this.enableShadow(c,f);var w=1;!0===(this||b).options.shapeProperties.interpolation&&(w=(this||b).imageObj.width/(this||b).width/(this||b).body.view.scale);var x=this._getImagePadding(),_=(this||b).left+x.left,O=(this||b).top+x.top,C=(this||b).width-x.left-x.right,T=(this||b).height-x.top-x.bottom;(this||b).imageObj.drawImageAtPosition(c,w,_,O,C,T),this.disableShadow(c,f)}}},{key:"_drawImageLabel",value:function(c,f,w,x,_){var O=0;if(void 0!==(this||b).height){O=.5*(this||b).height;var C=(this||b).labelModule.getTextSize(c,x,_);C.lineCount>=1&&(O+=C.height/2)}var T=w+O;(this||b).options.label&&((this||b).labelOffset=O),(this||b).labelModule.draw(c,f,T,x,_,"hanging")}}]),i}(Z_);function wx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var J_=function(c){cx(i,c);var f=wx(i);function i(c,w,x){var _;return vh(this||b,i),(_=f.call(this||b,c,w,x))._setMargins(x),_}return wu(i,[{key:"resize",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(this||b).selected,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(this||b).hover;if(this.needsRefresh(f,w)){var x=this.getDimensionsFromLabel(c,f,w),_=Math.max(x.width+(this||b).margin.right+(this||b).margin.left,x.height+(this||b).margin.top+(this||b).margin.bottom);(this||b).options.size=_/2,(this||b).width=_,(this||b).height=_,(this||b).radius=(this||b).width/2}}},{key:"draw",value:function(c,f,w,x,_,O){this.resize(c,x,_),(this||b).left=f-(this||b).width/2,(this||b).top=w-(this||b).height/2,this._drawRawCircle(c,f,w,O),this.updateBoundingBox(f,w),(this||b).labelModule.draw(c,(this||b).left+(this||b).textSize.width/2+(this||b).margin.left,w,x,_)}},{key:"updateBoundingBox",value:function(c,f){(this||b).boundingBox.top=f-(this||b).options.size,(this||b).boundingBox.left=c-(this||b).options.size,(this||b).boundingBox.right=c+(this||b).options.size,(this||b).boundingBox.bottom=f+(this||b).options.size}},{key:"distanceToBorder",value:function(c){return c&&this.resize(c),.5*(this||b).width}}]),i}($_);function _x(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var iE=function(c){cx(i,c);var f=_x(i);function i(c,w,x,_,O){var C;return vh(this||b,i),(C=f.call(this||b,c,w,x)).setImages(_,O),C}return wu(i,[{key:"resize",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(this||b).selected,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(this||b).hover;if(void 0===(this||b).imageObj.src||void 0===(this||b).imageObj.width||void 0===(this||b).imageObj.height){var x=2*(this||b).options.size;return(this||b).width=x,(this||b).height=x,void((this||b).radius=.5*(this||b).width)}this.needsRefresh(f,w)&&this._resizeImage()}},{key:"draw",value:function(c,f,w,x,_,O){this.switchImages(x),this.resize();var C=f,T=w;"top-left"===(this||b).options.shapeProperties.coordinateOrigin?((this||b).left=f,(this||b).top=w,C+=(this||b).width/2,T+=(this||b).height/2):((this||b).left=f-(this||b).width/2,(this||b).top=w-(this||b).height/2),this._drawRawCircle(c,C,T,O),c.save(),c.clip(),this._drawImageAtPosition(c,O),c.restore(),this._drawImageLabel(c,C,T,x,_),this.updateBoundingBox(f,w)}},{key:"updateBoundingBox",value:function(c,f){"top-left"===(this||b).options.shapeProperties.coordinateOrigin?((this||b).boundingBox.top=f,(this||b).boundingBox.left=c,(this||b).boundingBox.right=c+2*(this||b).options.size,(this||b).boundingBox.bottom=f+2*(this||b).options.size):((this||b).boundingBox.top=f-(this||b).options.size,(this||b).boundingBox.left=c-(this||b).options.size,(this||b).boundingBox.right=c+(this||b).options.size,(this||b).boundingBox.bottom=f+(this||b).options.size),(this||b).boundingBox.left=Math.min((this||b).boundingBox.left,(this||b).labelModule.size.left),(this||b).boundingBox.right=Math.max((this||b).boundingBox.right,(this||b).labelModule.size.left+(this||b).labelModule.size.width),(this||b).boundingBox.bottom=Math.max((this||b).boundingBox.bottom,(this||b).boundingBox.bottom+(this||b).labelOffset)}},{key:"distanceToBorder",value:function(c){return c&&this.resize(c),.5*(this||b).width}}]),i}($_);function Ex(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var rE=function(c){cx(i,c);var f=Ex(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"resize",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(this||b).selected,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(this||b).hover,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{size:(this||b).options.size};if(this.needsRefresh(f,w)){var _,O;(this||b).labelModule.getTextSize(c,f,w);var C=2*x.size;(this||b).width=null!==(_=(this||b).customSizeWidth)&&void 0!==_?_:C,(this||b).height=null!==(O=(this||b).customSizeHeight)&&void 0!==O?O:C,(this||b).radius=.5*(this||b).width}}},{key:"_drawShape",value:function(c,f,w,x,_,O,C,T){var S,M=this||b;return this.resize(c,O,C,T),(this||b).left=x-(this||b).width/2,(this||b).top=_-(this||b).height/2,this.initContextForDraw(c,T),(S=f,Object.prototype.hasOwnProperty.call(ln,S)?ln[S]:function(c){for(var f=arguments.length,b=new Array(f>1?f-1:0),w=1;w<f;w++)b[w-1]=arguments[w];CanvasRenderingContext2D.prototype[S].call(c,b)})(c,x,_,T.size),this.performFill(c,T),void 0!==(this||b).options.icon&&void 0!==(this||b).options.icon.code&&(c.font=(O?"bold ":"")+(this||b).height/2+"px "+((this||b).options.icon.face||"FontAwesome"),c.fillStyle=(this||b).options.icon.color||"black",c.textAlign="center",c.textBaseline="middle",c.fillText((this||b).options.icon.code,x,_)),{drawExternalLabel:function(){if(void 0!==M.options.label){M.labelModule.calculateLabelSize(c,O,C,x,_,"hanging");var f=_+.5*M.height+.5*M.labelModule.size.height;M.labelModule.draw(c,x,f,O,C,"hanging")}M.updateBoundingBox(x,_)}}}},{key:"updateBoundingBox",value:function(c,f){(this||b).boundingBox.top=f-(this||b).options.size,(this||b).boundingBox.left=c-(this||b).options.size,(this||b).boundingBox.right=c+(this||b).options.size,(this||b).boundingBox.bottom=f+(this||b).options.size,void 0!==(this||b).options.label&&(this||b).labelModule.size.width>0&&((this||b).boundingBox.left=Math.min((this||b).boundingBox.left,(this||b).labelModule.size.left),(this||b).boundingBox.right=Math.max((this||b).boundingBox.right,(this||b).labelModule.size.left+(this||b).labelModule.size.width),(this||b).boundingBox.bottom=Math.max((this||b).boundingBox.bottom,(this||b).boundingBox.bottom+(this||b).labelModule.size.height))}}]),i}(Z_);function Cx(c,f){var b=$f(c);if(Qk){var w=Qk(c);f&&(w=Cv(w).call(w,(function(f){return ax(c,f).enumerable}))),b.push.apply(b,w)}return b}function Sx(c){for(var f=1;f<arguments.length;f++){var b,w,x=null!=arguments[f]?arguments[f]:{};f%2?vp(b=Cx(Object(x),!0)).call(b,(function(f){s_(c,f,x[f])})):yx?Bx(c,yx(x)):vp(w=Cx(Object(x))).call(w,(function(f){zx(c,f,ax(x,f))}))}return c}function Tx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var sE=function(c){cx(i,c);var f=Tx(i);function i(c,w,x,_){var O;return vh(this||b,i),(O=f.call(this||b,c,w,x,_)).ctxRenderer=_,O}return wu(i,[{key:"draw",value:function(c,f,w,x,_,O){this.resize(c,x,_,O),(this||b).left=f-(this||b).width/2,(this||b).top=w-(this||b).height/2,c.save();var C=this.ctxRenderer({ctx:c,id:(this||b).options.id,x:f,y:w,state:{selected:x,hover:_},style:Sx({},O),label:(this||b).options.label});if(null!=C.drawNode&&C.drawNode(),c.restore(),C.drawExternalLabel){var T=C.drawExternalLabel;C.drawExternalLabel=function(){c.save(),T(),c.restore()}}return C.nodeDimensions&&((this||b).customSizeWidth=C.nodeDimensions.width,(this||b).customSizeHeight=C.nodeDimensions.height),C}},{key:"distanceToBorder",value:function(c,f){return this._distanceToBorder(c,f)}}]),i}(rE);function Px(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var aE=function(c){cx(i,c);var f=Px(i);function i(c,w,x){var _;return vh(this||b,i),(_=f.call(this||b,c,w,x))._setMargins(x),_}return wu(i,[{key:"resize",value:function(c,f,w){if(this.needsRefresh(f,w)){var x=this.getDimensionsFromLabel(c,f,w).width+(this||b).margin.right+(this||b).margin.left;(this||b).width=x,(this||b).height=x,(this||b).radius=(this||b).width/2}}},{key:"draw",value:function(c,f,w,x,_,O){this.resize(c,x,_),(this||b).left=f-(this||b).width/2,(this||b).top=w-(this||b).height/2,this.initContextForDraw(c,O),Yo(c,f-(this||b).width/2,w-(this||b).height/2,(this||b).width,(this||b).height),this.performFill(c,O),this.updateBoundingBox(f,w,c,x,_),(this||b).labelModule.draw(c,(this||b).left+(this||b).textSize.width/2+(this||b).margin.left,(this||b).top+(this||b).textSize.height/2+(this||b).margin.top,x,_)}},{key:"distanceToBorder",value:function(c,f){return this._distanceToBorder(c,f)}}]),i}(Z_);function Ix(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var hE=function(c){cx(i,c);var f=Ix(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"draw",value:function(c,f,b,w,x,_){return this._drawShape(c,"diamond",4,f,b,w,x,_)}},{key:"distanceToBorder",value:function(c,f){return this._distanceToBorder(c,f)}}]),i}(rE);function Fx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var dE=function(c){cx(i,c);var f=Fx(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"draw",value:function(c,f,b,w,x,_){return this._drawShape(c,"circle",2,f,b,w,x,_)}},{key:"distanceToBorder",value:function(c){return c&&this.resize(c),(this||b).options.size}}]),i}(rE);function Nx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var cE=function(c){cx(i,c);var f=Nx(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"resize",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(this||b).selected,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(this||b).hover;if(this.needsRefresh(f,w)){var x=this.getDimensionsFromLabel(c,f,w);(this||b).height=2*x.height,(this||b).width=x.width+x.height,(this||b).radius=.5*(this||b).width}}},{key:"draw",value:function(c,f,w,x,_,O){this.resize(c,x,_),(this||b).left=f-.5*(this||b).width,(this||b).top=w-.5*(this||b).height,this.initContextForDraw(c,O),Uo(c,(this||b).left,(this||b).top,(this||b).width,(this||b).height),this.performFill(c,O),this.updateBoundingBox(f,w,c,x,_),(this||b).labelModule.draw(c,f,w,x,_)}},{key:"distanceToBorder",value:function(c,f){c&&this.resize(c);var w=.5*(this||b).width,x=.5*(this||b).height,_=Math.sin(f)*w,O=Math.cos(f)*x;return w*x/Math.sqrt(_*_+O*O)}}]),i}(Z_);function Rx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var uE=function(c){cx(i,c);var f=Rx(i);function i(c,w,x){var _;return vh(this||b,i),(_=f.call(this||b,c,w,x))._setMargins(x),_}return wu(i,[{key:"resize",value:function(c,f,w){this.needsRefresh(f,w)&&((this||b).iconSize={width:Number((this||b).options.icon.size),height:Number((this||b).options.icon.size)},(this||b).width=(this||b).iconSize.width+(this||b).margin.right+(this||b).margin.left,(this||b).height=(this||b).iconSize.height+(this||b).margin.top+(this||b).margin.bottom,(this||b).radius=.5*(this||b).width)}},{key:"draw",value:function(c,f,w,x,_,O){var C=this||b;return this.resize(c,x,_),(this||b).options.icon.size=(this||b).options.icon.size||50,(this||b).left=f-(this||b).width/2,(this||b).top=w-(this||b).height/2,this._icon(c,f,w,x,_,O),{drawExternalLabel:function(){void 0!==C.options.label&&C.labelModule.draw(c,C.left+C.iconSize.width/2+C.margin.left,w+C.height/2+5,x);C.updateBoundingBox(f,w)}}}},{key:"updateBoundingBox",value:function(c,f){((this||b).boundingBox.top=f-.5*(this||b).options.icon.size,(this||b).boundingBox.left=c-.5*(this||b).options.icon.size,(this||b).boundingBox.right=c+.5*(this||b).options.icon.size,(this||b).boundingBox.bottom=f+.5*(this||b).options.icon.size,void 0!==(this||b).options.label&&(this||b).labelModule.size.width>0)&&((this||b).boundingBox.left=Math.min((this||b).boundingBox.left,(this||b).labelModule.size.left),(this||b).boundingBox.right=Math.max((this||b).boundingBox.right,(this||b).labelModule.size.left+(this||b).labelModule.size.width),(this||b).boundingBox.bottom=Math.max((this||b).boundingBox.bottom,(this||b).boundingBox.bottom+(this||b).labelModule.size.height+5))}},{key:"_icon",value:function(c,f,w,x,_,O){var C=Number((this||b).options.icon.size);void 0!==(this||b).options.icon.code?(c.font=[null!=(this||b).options.icon.weight?(this||b).options.icon.weight:x?"bold":"",(null!=(this||b).options.icon.weight&&x?5:0)+C+"px",(this||b).options.icon.face].join(" "),c.fillStyle=(this||b).options.icon.color||"black",c.textAlign="center",c.textBaseline="middle",this.enableShadow(c,O),c.fillText((this||b).options.icon.code,f,w),this.disableShadow(c,O)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(c,f){return this._distanceToBorder(c,f)}}]),i}(Z_);function Lx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var fE=function(c){cx(i,c);var f=Lx(i);function i(c,w,x,_,O){var C;return vh(this||b,i),(C=f.call(this||b,c,w,x)).setImages(_,O),C}return wu(i,[{key:"resize",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(this||b).selected,w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(this||b).hover;if(void 0===(this||b).imageObj.src||void 0===(this||b).imageObj.width||void 0===(this||b).imageObj.height){var x=2*(this||b).options.size;return(this||b).width=x,void((this||b).height=x)}this.needsRefresh(f,w)&&this._resizeImage()}},{key:"draw",value:function(c,f,w,x,_,O){c.save(),this.switchImages(x),this.resize();var C=f,T=w;if("top-left"===(this||b).options.shapeProperties.coordinateOrigin?((this||b).left=f,(this||b).top=w,C+=(this||b).width/2,T+=(this||b).height/2):((this||b).left=f-(this||b).width/2,(this||b).top=w-(this||b).height/2),!0===(this||b).options.shapeProperties.useBorderWithImage){var S=(this||b).options.borderWidth,M=(this||b).options.borderWidthSelected||2*(this||b).options.borderWidth,P=(x?M:S)/(this||b).body.view.scale;c.lineWidth=Math.min((this||b).width,P),c.beginPath();var D=x?(this||b).options.color.highlight.border:_?(this||b).options.color.hover.border:(this||b).options.color.border,I=x?(this||b).options.color.highlight.background:_?(this||b).options.color.hover.background:(this||b).options.color.background;void 0!==O.opacity&&(D=Vm(D,O.opacity),I=Vm(I,O.opacity)),c.strokeStyle=D,c.fillStyle=I,c.rect((this||b).left-.5*c.lineWidth,(this||b).top-.5*c.lineWidth,(this||b).width+c.lineWidth,(this||b).height+c.lineWidth),Ug(c).call(c),this.performStroke(c,O),c.closePath()}this._drawImageAtPosition(c,O),this._drawImageLabel(c,C,T,x,_),this.updateBoundingBox(f,w),c.restore()}},{key:"updateBoundingBox",value:function(c,f){this.resize(),"top-left"===(this||b).options.shapeProperties.coordinateOrigin?((this||b).left=c,(this||b).top=f):((this||b).left=c-(this||b).width/2,(this||b).top=f-(this||b).height/2),(this||b).boundingBox.left=(this||b).left,(this||b).boundingBox.top=(this||b).top,(this||b).boundingBox.bottom=(this||b).top+(this||b).height,(this||b).boundingBox.right=(this||b).left+(this||b).width,void 0!==(this||b).options.label&&(this||b).labelModule.size.width>0&&((this||b).boundingBox.left=Math.min((this||b).boundingBox.left,(this||b).labelModule.size.left),(this||b).boundingBox.right=Math.max((this||b).boundingBox.right,(this||b).labelModule.size.left+(this||b).labelModule.size.width),(this||b).boundingBox.bottom=Math.max((this||b).boundingBox.bottom,(this||b).boundingBox.bottom+(this||b).labelOffset))}},{key:"distanceToBorder",value:function(c,f){return this._distanceToBorder(c,f)}}]),i}($_);function Wx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var pE=function(c){cx(i,c);var f=Wx(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"draw",value:function(c,f,b,w,x,_){return this._drawShape(c,"square",2,f,b,w,x,_)}},{key:"distanceToBorder",value:function(c,f){return this._distanceToBorder(c,f)}}]),i}(rE);function qx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var gE=function(c){cx(i,c);var f=qx(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"draw",value:function(c,f,b,w,x,_){return this._drawShape(c,"hexagon",4,f,b,w,x,_)}},{key:"distanceToBorder",value:function(c,f){return this._distanceToBorder(c,f)}}]),i}(rE);function Yx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var yE=function(c){cx(i,c);var f=Yx(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"draw",value:function(c,f,b,w,x,_){return this._drawShape(c,"star",4,f,b,w,x,_)}},{key:"distanceToBorder",value:function(c,f){return this._distanceToBorder(c,f)}}]),i}(rE);function Kx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var mE=function(c){cx(i,c);var f=Kx(i);function i(c,w,x){var _;return vh(this||b,i),(_=f.call(this||b,c,w,x))._setMargins(x),_}return wu(i,[{key:"resize",value:function(c,f,w){this.needsRefresh(f,w)&&((this||b).textSize=(this||b).labelModule.getTextSize(c,f,w),(this||b).width=(this||b).textSize.width+(this||b).margin.right+(this||b).margin.left,(this||b).height=(this||b).textSize.height+(this||b).margin.top+(this||b).margin.bottom,(this||b).radius=.5*(this||b).width)}},{key:"draw",value:function(c,f,w,x,_,O){this.resize(c,x,_),(this||b).left=f-(this||b).width/2,(this||b).top=w-(this||b).height/2,this.enableShadow(c,O),(this||b).labelModule.draw(c,(this||b).left+(this||b).textSize.width/2+(this||b).margin.left,(this||b).top+(this||b).textSize.height/2+(this||b).margin.top,x,_),this.disableShadow(c,O),this.updateBoundingBox(f,w,c,x,_)}},{key:"distanceToBorder",value:function(c,f){return this._distanceToBorder(c,f)}}]),i}(Z_);function $x(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var bE=function(c){cx(i,c);var f=$x(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"draw",value:function(c,f,b,w,x,_){return this._drawShape(c,"triangle",3,f,b,w,x,_)}},{key:"distanceToBorder",value:function(c,f){return this._distanceToBorder(c,f)}}]),i}(rE);function Qx(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var wE=function(c){cx(i,c);var f=Qx(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"draw",value:function(c,f,b,w,x,_){return this._drawShape(c,"triangleDown",3,f,b,w,x,_)}},{key:"distanceToBorder",value:function(c,f){return this._distanceToBorder(c,f)}}]),i}(rE);function tE(c,f){var b=$f(c);if(Qk){var w=Qk(c);f&&(w=Cv(w).call(w,(function(f){return ax(c,f).enumerable}))),b.push.apply(b,w)}return b}function eE(c){for(var f=1;f<arguments.length;f++){var b,w,x=null!=arguments[f]?arguments[f]:{};f%2?vp(b=tE(Object(x),!0)).call(b,(function(f){s_(c,f,x[f])})):yx?Bx(c,yx(x)):vp(w=tE(Object(x))).call(w,(function(f){zx(c,f,ax(x,f))}))}return c}var xE=function(){function t(c,f,w,x,_,O){vh(this||b,t),(this||b).options=Zm(_),(this||b).globalOptions=_,(this||b).defaultOptions=O,(this||b).body=f,(this||b).edges=[],(this||b).id=void 0,(this||b).imagelist=w,(this||b).grouplist=x,(this||b).x=void 0,(this||b).y=void 0,(this||b).baseSize=(this||b).options.size,(this||b).baseFontSize=(this||b).options.font.size,(this||b).predefinedPosition=!1,(this||b).selected=!1,(this||b).hover=!1,(this||b).labelModule=new k_((this||b).body,(this||b).options,!1),this.setOptions(c)}return wu(t,[{key:"attachEdge",value:function(c){var f;-1===ag(f=(this||b).edges).call(f,c)&&(this||b).edges.push(c)}},{key:"detachEdge",value:function(c){var f,w,x=ag(f=(this||b).edges).call(f,c);-1!=x&&Kp(w=(this||b).edges).call(w,x,1)}},{key:"setOptions",value:function(c){var f=(this||b).options.shape;if(c){if(void 0!==c.color&&((this||b)._localColor=c.color),void 0!==c.id&&((this||b).id=c.id),void 0===(this||b).id)throw new Error("Node must have an id");t.checkMass(c,(this||b).id),void 0!==c.x&&(null===c.x?((this||b).x=void 0,(this||b).predefinedPosition=!1):((this||b).x=Zv(c.x),(this||b).predefinedPosition=!0)),void 0!==c.y&&(null===c.y?((this||b).y=void 0,(this||b).predefinedPosition=!1):((this||b).y=Zv(c.y),(this||b).predefinedPosition=!0)),void 0!==c.size&&((this||b).baseSize=c.size),void 0!==c.value&&(c.value=e_(c.value)),t.parseOptions((this||b).options,c,!0,(this||b).globalOptions,(this||b).grouplist);var w=[c,(this||b).options,(this||b).defaultOptions];return(this||b).chooser=E_("node",w),this._load_images(),this.updateLabelModule(c),void 0!==c.opacity&&t.checkOpacity(c.opacity)&&((this||b).options.opacity=c.opacity),this.updateShape(f),void 0!==c.hidden||void 0!==c.physics}}},{key:"_load_images",value:function(){if(("circularImage"===(this||b).options.shape||"image"===(this||b).options.shape)&&void 0===(this||b).options.image)throw new Error("Option image must be defined for node type '"+(this||b).options.shape+"'");if(void 0!==(this||b).options.image){if(void 0===(this||b).imagelist)throw new Error("Internal Error: No images provided");if("string"==typeof(this||b).options.image)(this||b).imageObj=(this||b).imagelist.load((this||b).options.image,(this||b).options.brokenImage,(this||b).id);else{if(void 0===(this||b).options.image.unselected)throw new Error("No unselected image provided");(this||b).imageObj=(this||b).imagelist.load((this||b).options.image.unselected,(this||b).options.brokenImage,(this||b).id),void 0!==(this||b).options.image.selected?(this||b).imageObjAlt=(this||b).imagelist.load((this||b).options.image.selected,(this||b).options.brokenImage,(this||b).id):(this||b).imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var c={color:(this||b).options.color.background,opacity:(this||b).options.opacity,borderWidth:(this||b).options.borderWidth,borderColor:(this||b).options.color.border,size:(this||b).options.size,borderDashes:(this||b).options.shapeProperties.borderDashes,borderRadius:(this||b).options.shapeProperties.borderRadius,shadow:(this||b).options.shadow.enabled,shadowColor:(this||b).options.shadow.color,shadowSize:(this||b).options.shadow.size,shadowX:(this||b).options.shadow.x,shadowY:(this||b).options.shadow.y};if((this||b).selected||(this||b).hover?!0===(this||b).chooser?(this||b).selected?(null!=(this||b).options.borderWidthSelected?c.borderWidth=(this||b).options.borderWidthSelected:c.borderWidth*=2,c.color=(this||b).options.color.highlight.background,c.borderColor=(this||b).options.color.highlight.border,c.shadow=(this||b).options.shadow.enabled):(this||b).hover&&(c.color=(this||b).options.color.hover.background,c.borderColor=(this||b).options.color.hover.border,c.shadow=(this||b).options.shadow.enabled):"function"==typeof(this||b).chooser&&(this.chooser(c,(this||b).options.id,(this||b).selected,(this||b).hover),!1===c.shadow&&(c.shadowColor===(this||b).options.shadow.color&&c.shadowSize===(this||b).options.shadow.size&&c.shadowX===(this||b).options.shadow.x&&c.shadowY===(this||b).options.shadow.y||(c.shadow=!0))):c.shadow=(this||b).options.shadow.enabled,void 0!==(this||b).options.opacity){var f=(this||b).options.opacity;c.borderColor=Vm(c.borderColor,f),c.color=Vm(c.color,f),c.shadowColor=Vm(c.shadowColor,f)}return c}},{key:"updateLabelModule",value:function(c){void 0!==(this||b).options.label&&null!==(this||b).options.label||((this||b).options.label=""),t.updateGroupOptions((this||b).options,eE(eE({},c),{},{color:c&&c.color||(this||b)._localColor||void 0}),(this||b).grouplist);var f=(this||b).grouplist.get((this||b).options.group,!1),w=[c,(this||b).options,f,(this||b).globalOptions,(this||b).defaultOptions];(this||b).labelModule.update((this||b).options,w),void 0!==(this||b).labelModule.baseSize&&((this||b).baseFontSize=(this||b).labelModule.baseSize)}},{key:"updateShape",value:function(c){if(c===(this||b).options.shape&&(this||b).shape)(this||b).shape.setOptions((this||b).options,(this||b).imageObj,(this||b).imageObjAlt);else switch((this||b).options.shape){case"box":(this||b).shape=new Q_((this||b).options,(this||b).body,(this||b).labelModule);break;case"circle":(this||b).shape=new J_((this||b).options,(this||b).body,(this||b).labelModule);break;case"circularImage":(this||b).shape=new iE((this||b).options,(this||b).body,(this||b).labelModule,(this||b).imageObj,(this||b).imageObjAlt);break;case"custom":(this||b).shape=new sE((this||b).options,(this||b).body,(this||b).labelModule,(this||b).options.ctxRenderer);break;case"database":(this||b).shape=new aE((this||b).options,(this||b).body,(this||b).labelModule);break;case"diamond":(this||b).shape=new hE((this||b).options,(this||b).body,(this||b).labelModule);break;case"dot":(this||b).shape=new dE((this||b).options,(this||b).body,(this||b).labelModule);break;case"ellipse":default:(this||b).shape=new cE((this||b).options,(this||b).body,(this||b).labelModule);break;case"icon":(this||b).shape=new uE((this||b).options,(this||b).body,(this||b).labelModule);break;case"image":(this||b).shape=new fE((this||b).options,(this||b).body,(this||b).labelModule,(this||b).imageObj,(this||b).imageObjAlt);break;case"square":(this||b).shape=new pE((this||b).options,(this||b).body,(this||b).labelModule);break;case"hexagon":(this||b).shape=new gE((this||b).options,(this||b).body,(this||b).labelModule);break;case"star":(this||b).shape=new yE((this||b).options,(this||b).body,(this||b).labelModule);break;case"text":(this||b).shape=new mE((this||b).options,(this||b).body,(this||b).labelModule);break;case"triangle":(this||b).shape=new bE((this||b).options,(this||b).body,(this||b).labelModule);break;case"triangleDown":(this||b).shape=new wE((this||b).options,(this||b).body,(this||b).labelModule)}this.needsRefresh()}},{key:"select",value:function(){(this||b).selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){(this||b).selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){(this||b).shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return(this||b).options.title}},{key:"distanceToBorder",value:function(c,f){return(this||b).shape.distanceToBorder(c,f)}},{key:"isFixed",value:function(){return(this||b).options.fixed.x&&(this||b).options.fixed.y}},{key:"isSelected",value:function(){return(this||b).selected}},{key:"getValue",value:function(){return(this||b).options.value}},{key:"getLabelSize",value:function(){return(this||b).labelModule.size()}},{key:"setValueRange",value:function(c,f,w){if(void 0!==(this||b).options.value){var x=(this||b).options.scaling.customScalingFunction(c,f,w,(this||b).options.value),_=(this||b).options.scaling.max-(this||b).options.scaling.min;if(!0===(this||b).options.scaling.label.enabled){var O=(this||b).options.scaling.label.max-(this||b).options.scaling.label.min;(this||b).options.font.size=(this||b).options.scaling.label.min+x*O}(this||b).options.size=(this||b).options.scaling.min+x*_}else(this||b).options.size=(this||b).baseSize,(this||b).options.font.size=(this||b).baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(c){var f=this.getFormattingValues();return(this||b).shape.draw(c,(this||b).x,(this||b).y,(this||b).selected,(this||b).hover,f)||{}}},{key:"updateBoundingBox",value:function(c){(this||b).shape.updateBoundingBox((this||b).x,(this||b).y,c)}},{key:"resize",value:function(c){var f=this.getFormattingValues();(this||b).shape.resize(c,(this||b).selected,(this||b).hover,f)}},{key:"getItemsOnPoint",value:function(c){var f=[];return(this||b).labelModule.visible()&&O_((this||b).labelModule.getSize(),c)&&f.push({nodeId:(this||b).id,labelId:0}),O_((this||b).shape.boundingBox,c)&&f.push({nodeId:(this||b).id}),f}},{key:"isOverlappingWith",value:function(c){return(this||b).shape.left<c.right&&(this||b).shape.left+(this||b).shape.width>c.left&&(this||b).shape.top<c.bottom&&(this||b).shape.top+(this||b).shape.height>c.top}},{key:"isBoundingBoxOverlappingWith",value:function(c){return(this||b).shape.boundingBox.left<c.right&&(this||b).shape.boundingBox.right>c.left&&(this||b).shape.boundingBox.top<c.bottom&&(this||b).shape.boundingBox.bottom>c.top}}],[{key:"checkOpacity",value:function(c){return 0<=c&&c<=1}},{key:"checkCoordinateOrigin",value:function(c){return void 0===c||"center"===c||"top-left"===c}},{key:"updateGroupOptions",value:function(c,f,b){var w;if(void 0!==b){var x=c.group;if(void 0!==f&&void 0!==f.group&&x!==f.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"==typeof x||"string"==typeof x&&""!=x){var _=b.get(x);void 0!==_.opacity&&void 0===f.opacity&&(t.checkOpacity(_.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+_.opacity),_.opacity=void 0));var O=Cv(w=a_(f)).call(w,(function(c){return null!=f[c]}));O.push("font"),Am(O,c,_),c.color=Um(c.color)}}}},{key:"parseOptions",value:function(c,f){var b=arguments.length>2&&void 0!==arguments[2]&&arguments[2],w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},x=arguments.length>4?arguments[4]:void 0;if(Am(["color","fixed","shadow"],c,f,b),t.checkMass(f),void 0!==c.opacity&&(t.checkOpacity(c.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+c.opacity),c.opacity=void 0)),void 0!==f.opacity&&(t.checkOpacity(f.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+f.opacity),f.opacity=void 0)),f.shapeProperties&&!t.checkCoordinateOrigin(f.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+f.shapeProperties.coordinateOrigin),Qm(c,f,"shadow",w),void 0!==f.color&&null!==f.color){var _=Um(f.color);zm(c.color,_)}else!0===b&&null===f.color&&(c.color=Zm(w.color));void 0!==f.fixed&&null!==f.fixed&&("boolean"==typeof f.fixed?(c.fixed.x=f.fixed,c.fixed.y=f.fixed):(void 0!==f.fixed.x&&"boolean"==typeof f.fixed.x&&(c.fixed.x=f.fixed.x),void 0!==f.fixed.y&&"boolean"==typeof f.fixed.y&&(c.fixed.y=f.fixed.y))),!0===b&&null===f.font&&(c.font=Zm(w.font)),t.updateGroupOptions(c,f,x),void 0!==f.scaling&&Qm(c.scaling,f.scaling,"label",w.scaling)}},{key:"checkMass",value:function(c,f){if(void 0!==c.mass&&c.mass<=0){var b="";void 0!==f&&(b=" in node id: "+f),console.error("%cNegative or zero mass disallowed"+b+", setting mass to 1.",Zb),c.mass=1}}}]),t}();function oE(c,f){var b=void 0!==Tf&&Dh(c)||c["@@iterator"];if(!b){if(Wf(c)||(b=function(c,f){var b;if(c){if("string"==typeof c)return nE(c,f);var w=Ff(b=Object.prototype.toString.call(c)).call(b,8,-1);"Object"===w&&c.constructor&&(w=c.constructor.name);return"Map"===w||"Set"===w?hh(c):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?nE(c,f):void 0}}(c))||f&&c&&"number"==typeof c.length){b&&(c=b);var w=0,n=function(){};return{s:n,n:function(){return w>=c.length?{done:!0}:{done:!1,value:c[w++]}},e:function(c){throw c},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var x,_=!0,O=!1;return{s:function(){b=b.call(c)},n:function(){var c=b.next();return _=c.done,c},e:function(c){O=!0,x=c},f:function(){try{_||null==b.return||b.return()}finally{if(O)throw x}}}}function nE(c,f){(null==f||f>c.length)&&(f=c.length);for(var b=0,w=new Array(f);b<f;b++)w[b]=c[b];return w}var _E=function(){function t(c,f,w,x){var _,O=this||b;if(vh(this||b,t),(this||b).body=c,(this||b).images=f,(this||b).groups=w,(this||b).layoutEngine=x,(this||b).body.functions.createNode=dn(_=(this||b).create).call(_,this||b),(this||b).nodesListeners={add:function(c,f){O.add(f.items)},update:function(c,f){O.update(f.items,f.data,f.oldData)},remove:function(c,f){O.remove(f.items)}},(this||b).defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(c,f,b,w){if(f===c)return.5;var x=1/(f-c);return Math.max(0,(w-c)*x)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},(this||b).defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";(this||b).options=Zm((this||b).defaultOptions),this.bindEventListeners()}return wu(t,[{key:"bindEventListeners",value:function(){var c,f,w=this||b;(this||b).body.emitter.on("refreshNodes",dn(c=(this||b).refresh).call(c,this||b)),(this||b).body.emitter.on("refresh",dn(f=(this||b).refresh).call(f,this||b)),(this||b).body.emitter.on("destroy",(function(){Hm(w.nodesListeners,(function(c,f){w.body.data.nodes&&w.body.data.nodes.off(f,c)})),delete w.body.functions.createNode,delete w.nodesListeners.add,delete w.nodesListeners.update,delete w.nodesListeners.remove,delete w.nodesListeners}))}},{key:"setOptions",value:function(c){if(void 0!==c){if(xE.parseOptions((this||b).options,c),void 0!==c.opacity&&(Hk(c.opacity)||!qk(c.opacity)||c.opacity<0||c.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+c.opacity):(this||b).options.opacity=c.opacity),void 0!==c.shape)for(var f in(this||b).body.nodes)Object.prototype.hasOwnProperty.call((this||b).body.nodes,f)&&(this||b).body.nodes[f].updateShape();if(void 0!==c.font||void 0!==c.widthConstraint||void 0!==c.heightConstraint)for(var w=0,x=$f((this||b).body.nodes);w<x.length;w++){var _=x[w];(this||b).body.nodes[_].updateLabelModule(),(this||b).body.nodes[_].needsRefresh()}if(void 0!==c.size)for(var O in(this||b).body.nodes)Object.prototype.hasOwnProperty.call((this||b).body.nodes,O)&&(this||b).body.nodes[O].needsRefresh();void 0===c.hidden&&void 0===c.physics||(this||b).body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(c){var w=arguments.length>1&&void 0!==arguments[1]&&arguments[1],x=(this||b).body.data.nodes;if(f.isDataViewLike("id",c))(this||b).body.data.nodes=c;else if(Wf(c))(this||b).body.data.nodes=new f.DataSet,(this||b).body.data.nodes.add(c);else{if(c)throw new TypeError("Array or DataSet expected");(this||b).body.data.nodes=new f.DataSet}if(x&&Hm((this||b).nodesListeners,(function(c,f){x.off(f,c)})),(this||b).body.nodes={},(this||b).body.data.nodes){var _=this||b;Hm((this||b).nodesListeners,(function(c,f){_.body.data.nodes.on(f,c)}));var O=(this||b).body.data.nodes.getIds();this.add(O,!0)}!1===w&&(this||b).body.emitter.emit("_dataChanged")}},{key:"add",value:function(c){for(var f,w=arguments.length>1&&void 0!==arguments[1]&&arguments[1],x=[],_=0;_<c.length;_++){f=c[_];var O=(this||b).body.data.nodes.get(f),C=this.create(O);x.push(C),(this||b).body.nodes[f]=C}(this||b).layoutEngine.positionInitially(x),!1===w&&(this||b).body.emitter.emit("_dataChanged")}},{key:"update",value:function(c,f,w){for(var x=(this||b).body.nodes,_=!1,O=0;O<c.length;O++){var C=c[O],T=x[C],S=f[O];void 0!==T?T.setOptions(S)&&(_=!0):(_=!0,T=this.create(S),x[C]=T)}_||void 0===w||(_=Zk(f).call(f,(function(c,f){var b=w[f];return b&&b.level!==c.level}))),!0===_?(this||b).body.emitter.emit("_dataChanged"):(this||b).body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(c){for(var f=(this||b).body.nodes,w=0;w<c.length;w++)delete f[c[w]];(this||b).body.emitter.emit("_dataChanged")}},{key:"create",value:function(c){return new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:xE)(c,(this||b).body,(this||b).images,(this||b).groups,(this||b).options,(this||b).defaultOptions)}},{key:"refresh",value:function(){var c=this||b,f=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Hm((this||b).body.nodes,(function(b,w){var x=c.body.data.nodes.get(w);void 0!==x&&(!0===f&&b.setOptions({x:null,y:null}),b.setOptions({fixed:!1}),b.setOptions(x))}))}},{key:"getPositions",value:function(c){var f={};if(void 0!==c){if(!0===Wf(c)){for(var w=0;w<c.length;w++)if(void 0!==(this||b).body.nodes[c[w]]){var x=(this||b).body.nodes[c[w]];f[c[w]]={x:Math.round(x.x),y:Math.round(x.y)}}}else if(void 0!==(this||b).body.nodes[c]){var _=(this||b).body.nodes[c];f[c]={x:Math.round(_.x),y:Math.round(_.y)}}}else for(var O=0;O<(this||b).body.nodeIndices.length;O++){var C=(this||b).body.nodes[(this||b).body.nodeIndices[O]];f[(this||b).body.nodeIndices[O]]={x:Math.round(C.x),y:Math.round(C.y)}}return f}},{key:"getPosition",value:function(c){if(null==c)throw new TypeError("No id was specified for getPosition method.");if(null==(this||b).body.nodes[c])throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(c));return{x:Math.round((this||b).body.nodes[c].x),y:Math.round((this||b).body.nodes[c].y)}}},{key:"storePositions",value:function(){var c,f=[],w=(this||b).body.data.nodes.getDataSet(),x=oE(w.get());try{for(x.s();!(c=x.n()).done;){var _=c.value,O=_.id,C=(this||b).body.nodes[O],T=Math.round(C.x),S=Math.round(C.y);_.x===T&&_.y===S||f.push({id:O,x:T,y:S})}}catch(c){x.e(c)}finally{x.f()}w.update(f)}},{key:"getBoundingBox",value:function(c){if(void 0!==(this||b).body.nodes[c])return(this||b).body.nodes[c].shape.boundingBox}},{key:"getConnectedNodes",value:function(c,f){var w=[];if(void 0!==(this||b).body.nodes[c])for(var x=(this||b).body.nodes[c],_={},O=0;O<x.edges.length;O++){var C=x.edges[O];"to"!==f&&C.toId==x.id?void 0===_[C.fromId]&&(w.push(C.fromId),_[C.fromId]=!0):"from"!==f&&C.fromId==x.id&&void 0===_[C.toId]&&(w.push(C.toId),_[C.toId]=!0)}return w}},{key:"getConnectedEdges",value:function(c){var f=[];if(void 0!==(this||b).body.nodes[c])for(var w=(this||b).body.nodes[c],x=0;x<w.edges.length;x++)f.push(w.edges[x].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",c);return f}},{key:"moveNode",value:function(c,f,w){var x=this||b;void 0!==(this||b).body.nodes[c]?((this||b).body.nodes[c].x=Number(f),(this||b).body.nodes[c].y=Number(w),zg((function(){x.body.emitter.emit("startSimulation")}),0)):console.error("Node id supplied to moveNode does not exist. Provided: ",c)}}]),t}(),EE=ge,OE=$,CE=mt,TE=oi,lE=function(c){return void 0!==c&&(EE(c,"value")||EE(c,"writable"))},SE=U,ME=qr;Mi({target:"Reflect",stat:!0},{get:function t(c,f){var b,w,x=arguments.length<3?c:arguments[2];return TE(c)===x?c[f]:(b=SE.f(c,f))?lE(b)?b.value:void 0===b.get?void 0:OE(b.get,x):CE(w=ME(c))?t(w,f,x):void 0}});var PE=o(bt.Reflect.get),DE=o(sx);function vE(){var c;vE="undefined"!=typeof Reflect&&PE?X_(c=PE).call(c):function(c,f,b){var w=function(c,f){for(;!Object.prototype.hasOwnProperty.call(c,f)&&null!==(c=px(c)););return c}(c,f);if(w){var x=DE(w,f);return x.get?x.get.call(arguments.length<3?c:b):x.value}};return vE.apply(this||b,arguments)}var IE=Mi,BE=Math.hypot,FE=Math.abs,zE=Math.sqrt;IE({target:"Math",stat:!0,arity:2,forced:!!BE&&BE(1/0,NaN)!==1/0},{hypot:function(c,f){for(var b,w,x=0,_=0,O=arguments.length,C=0;_<O;)C<(b=FE(arguments[_++]))?(x=x*(w=C/b)*w+1,C=b):x+=b>0?(w=b/C)*w:b;return C===1/0?1/0:C*zE(x)}});var RE=o(bt.Math.hypot);function kE(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var WE=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"transform",value:function(c,f){Wf(c)||(c=[c]);for(var b=f.point.x,w=f.point.y,x=f.angle,_=f.length,O=0;O<c.length;++O){var C=c[O],T=C.x*Math.cos(x)-C.y*Math.sin(x),S=C.x*Math.sin(x)+C.y*Math.cos(x);C.x=b+_*T,C.y=w+_*S}}},{key:"drawPath",value:function(c,f){c.beginPath(),c.moveTo(f[0].x,f[0].y);for(var b=1;b<f.length;++b)c.lineTo(f[b].x,f[b].y);c.closePath()}}]),t}(),qE=function(c){cx(i,c);var f=kE(i);function i(){return vh(this||b,i),f.apply(this||b,arguments)}return wu(i,null,[{key:"draw",value:function(c,f){if(f.image){c.save(),c.translate(f.point.x,f.point.y),c.rotate(Math.PI/2+f.angle);var b=null!=f.imageWidth?f.imageWidth:f.image.width,w=null!=f.imageHeight?f.imageHeight:f.image.height;f.image.drawImageAtPosition(c,1,-b/2,0,b,w),c.restore()}return!1}}]),i}(WE),YE=function(c){cx(i,c);var f=kE(i);function i(){return vh(this||b,i),f.apply(this||b,arguments)}return wu(i,null,[{key:"draw",value:function(c,f){var b=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return WE.transform(b,f),WE.drawPath(c,b),!0}}]),i}(WE),KE=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"draw",value:function(c,f){var b=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return WE.transform(b,f),WE.drawPath(c,b),!0}}]),t}(),QE=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"draw",value:function(c,f){var b={x:-.4,y:0};WE.transform(b,f),c.strokeStyle=c.fillStyle,c.fillStyle="rgba(0, 0, 0, 0)";var w=Math.PI,x=f.angle-w/2,_=f.angle+w/2;return c.beginPath(),c.arc(b.x,b.y,.4*f.length,x,_,!1),c.stroke(),!0}}]),t}(),$E=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"draw",value:function(c,f){var b={x:-.3,y:0};WE.transform(b,f),c.strokeStyle=c.fillStyle,c.fillStyle="rgba(0, 0, 0, 0)";var w=Math.PI,x=f.angle+w/2,_=f.angle+3*w/2;return c.beginPath(),c.arc(b.x,b.y,.4*f.length,x,_,!1),c.stroke(),!0}}]),t}(),JE=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"draw",value:function(c,f){var b=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return WE.transform(b,f),WE.drawPath(c,b),!0}}]),t}(),tO=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"draw",value:function(c,f){var b=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return WE.transform(b,f),WE.drawPath(c,b),!0}}]),t}(),eO=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"draw",value:function(c,f){var b={x:-.4,y:0};return WE.transform(b,f),Vo(c,b.x,b.y,.4*f.length),!0}}]),t}(),iO=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"draw",value:function(c,f){var b=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return WE.transform(b,f),WE.drawPath(c,b),!0}}]),t}(),oO=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"draw",value:function(c,f){var b=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return WE.transform(b,f),WE.drawPath(c,b),!0}}]),t}(),nO=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"draw",value:function(c,f){var b=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return WE.transform(b,f),WE.drawPath(c,b),!0}}]),t}(),rO=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"draw",value:function(c,f){var b=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return WE.transform(b,f),WE.drawPath(c,b),!0}}]),t}(),sO=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"draw",value:function(c,f){var b;switch(f.type&&(b=f.type.toLowerCase()),b){case"image":return qE.draw(c,f);case"circle":return eO.draw(c,f);case"box":return oO.draw(c,f);case"crow":return KE.draw(c,f);case"curve":return QE.draw(c,f);case"diamond":return nO.draw(c,f);case"inv_curve":return $E.draw(c,f);case"triangle":return JE.draw(c,f);case"inv_triangle":return tO.draw(c,f);case"bar":return iO.draw(c,f);case"vee":return rO.draw(c,f);default:return YE.draw(c,f)}}}]),t}();function NE(c,f){var b=$f(c);if(Qk){var w=Qk(c);f&&(w=Cv(w).call(w,(function(f){return ax(c,f).enumerable}))),b.push.apply(b,w)}return b}function AE(c){for(var f=1;f<arguments.length;f++){var b,w,x=null!=arguments[f]?arguments[f]:{};f%2?vp(b=NE(Object(x),!0)).call(b,(function(f){s_(c,f,x[f])})):yx?Bx(c,yx(x)):vp(w=NE(Object(x))).call(w,(function(f){zx(c,f,ax(x,f))}))}return c}var hO=function(){function t(c,f,w){vh(this||b,t),(this||b)._body=f,(this||b)._labelModule=w,(this||b).color={},(this||b).colorDirty=!0,(this||b).hoverWidth=1.5,(this||b).selectionWidth=2,this.setOptions(c),(this||b).fromPoint=(this||b).from,(this||b).toPoint=(this||b).to}return wu(t,[{key:"connect",value:function(){(this||b).from=(this||b)._body.nodes[(this||b).options.from],(this||b).to=(this||b)._body.nodes[(this||b).options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(c){(this||b).options=c,(this||b).from=(this||b)._body.nodes[(this||b).options.from],(this||b).to=(this||b)._body.nodes[(this||b).options.to],(this||b).id=(this||b).options.id}},{key:"drawLine",value:function(c,f,b,w){var x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getViaNode();c.strokeStyle=this.getColor(c,f),c.lineWidth=f.width,!1!==f.dashes?this._drawDashedLine(c,f,x):this._drawLine(c,f,x)}},{key:"_drawLine",value:function(c,f,w,x,_){if((this||b).from!=(this||b).to)this._line(c,f,w,x,_);else{var O=df(this._getCircleData(c),3),C=O[0],T=O[1],S=O[2];this._circle(c,f,C,T,S)}}},{key:"_drawDashedLine",value:function(c,f,w,x,_){c.lineCap="round";var O=Wf(f.dashes)?f.dashes:[5,5];if(void 0!==c.setLineDash){if(c.save(),c.setLineDash(O),c.lineDashOffset=0,(this||b).from!=(this||b).to)this._line(c,f,w);else{var C=df(this._getCircleData(c),3),T=C[0],S=C[1],M=C[2];this._circle(c,f,T,S,M)}c.setLineDash([0]),c.lineDashOffset=0,c.restore()}else{if((this||b).from!=(this||b).to)Xo(c,(this||b).from.x,(this||b).from.y,(this||b).to.x,(this||b).to.y,O);else{var P=df(this._getCircleData(c),3),D=P[0],I=P[1],B=P[2];this._circle(c,f,D,I,B)}this.enableShadow(c,f),c.stroke(),this.disableShadow(c,f)}}},{key:"findBorderPosition",value:function(c,f,w){return(this||b).from!=(this||b).to?this._findBorderPosition(c,f,w):this._findBorderPositionCircle(c,f,w)}},{key:"findBorderPositions",value:function(c){if((this||b).from!=(this||b).to)return{from:this._findBorderPosition((this||b).from,c),to:this._findBorderPosition((this||b).to,c)};var f,w=df(Ff(f=this._getCircleData(c)).call(f,0,2),2),x=w[0],_=w[1];return{from:this._findBorderPositionCircle((this||b).from,c,{x:x,y:_,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle((this||b).from,c,{x:x,y:_,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(c){var f=(this||b).options.selfReference.size;void 0!==c&&void 0===(this||b).from.shape.width&&(this||b).from.shape.resize(c);var w=S_(c,(this||b).options.selfReference.angle,f,(this||b).from);return[w.x,w.y,f]}},{key:"_pointOnCircle",value:function(c,f,b,w){var x=2*w*Math.PI;return{x:c+b*Math.cos(x),y:f-b*Math.sin(x)}}},{key:"_findBorderPositionCircle",value:function(c,f,w){var x,_=w.x,O=w.y,C=w.low,T=w.high,S=w.direction,M=(this||b).options.selfReference.size,P=.5*(C+T),D=0;!0===(this||b).options.arrowStrikethrough&&(-1===S?D=(this||b).options.endPointOffset.from:1===S&&(D=(this||b).options.endPointOffset.to));var I=0;do{P=.5*(C+T),x=this._pointOnCircle(_,O,M,P);var B=Math.atan2(c.y-x.y,c.x-x.x),F=c.distanceToBorder(f,B)+D-Math.sqrt(Math.pow(x.x-c.x,2)+Math.pow(x.y-c.y,2));if(Math.abs(F)<.05)break;F>0?S>0?C=P:T=P:S>0?T=P:C=P,++I}while(C<=T&&I<10);return AE(AE({},x),{},{t:P})}},{key:"getLineWidth",value:function(c,f){return!0===c?Math.max((this||b).selectionWidth,.3/(this||b)._body.view.scale):!0===f?Math.max((this||b).hoverWidth,.3/(this||b)._body.view.scale):Math.max((this||b).options.width,.3/(this||b)._body.view.scale)}},{key:"getColor",value:function(c,f){if(!1!==f.inheritsColor){if("both"===f.inheritsColor&&(this||b).from.id!==(this||b).to.id){var w=c.createLinearGradient((this||b).from.x,(this||b).from.y,(this||b).to.x,(this||b).to.y),x=(this||b).from.options.color.highlight.border,_=(this||b).to.options.color.highlight.border;return!1===(this||b).from.selected&&!1===(this||b).to.selected?(x=Vm((this||b).from.options.color.border,f.opacity),_=Vm((this||b).to.options.color.border,f.opacity)):!0===(this||b).from.selected&&!1===(this||b).to.selected?_=(this||b).to.options.color.border:!1===(this||b).from.selected&&!0===(this||b).to.selected&&(x=(this||b).from.options.color.border),w.addColorStop(0,x),w.addColorStop(1,_),w}return"to"===f.inheritsColor?Vm((this||b).to.options.color.border,f.opacity):Vm((this||b).from.options.color.border,f.opacity)}return Vm(f.color,f.opacity)}},{key:"_circle",value:function(c,f,w,x,_){this.enableShadow(c,f);var O=0,C=2*Math.PI;if(!(this||b).options.selfReference.renderBehindTheNode){var T=(this||b).options.selfReference.angle,S=(this||b).options.selfReference.angle+Math.PI,M=this._findBorderPositionCircle((this||b).from,c,{x:w,y:x,low:T,high:S,direction:-1}),P=this._findBorderPositionCircle((this||b).from,c,{x:w,y:x,low:T,high:S,direction:1});O=Math.atan2(M.y-x,M.x-w),C=Math.atan2(P.y-x,P.x-w)}c.beginPath(),c.arc(w,x,_,O,C,!1),c.stroke(),this.disableShadow(c,f)}},{key:"getDistanceToEdge",value:function(c,f,w,x,_,O){if((this||b).from!=(this||b).to)return this._getDistanceToEdge(c,f,w,x,_,O);var C=df(this._getCircleData(void 0),3),T=C[0],S=C[1],M=C[2],P=T-_,D=S-O;return Math.abs(Math.sqrt(P*P+D*D)-M)}},{key:"_getDistanceToLine",value:function(c,f,b,w,x,_){var O=b-c,C=w-f,T=((x-c)*O+(_-f)*C)/(O*O+C*C);T>1?T=1:T<0&&(T=0);var S=c+T*O-x,M=f+T*C-_;return Math.sqrt(S*S+M*M)}},{key:"getArrowData",value:function(c,f,w,x,_,O){var C,T,S,M,P,D,I,B=O.width;"from"===f?(S=(this||b).from,M=(this||b).to,P=O.fromArrowScale<0,D=Math.abs(O.fromArrowScale),I=O.fromArrowType):"to"===f?(S=(this||b).to,M=(this||b).from,P=O.toArrowScale<0,D=Math.abs(O.toArrowScale),I=O.toArrowType):(S=(this||b).to,M=(this||b).from,P=O.middleArrowScale<0,D=Math.abs(O.middleArrowScale),I=O.middleArrowType);var F=15*D+3*B;if(S!=M){var z=F/RE(S.x-M.x,S.y-M.y);if("middle"!==f)if(!0===(this||b).options.smooth.enabled){var N=this._findBorderPosition(S,c,{via:w}),A=this.getPoint(N.t+z*("from"===f?1:-1),w);C=Math.atan2(N.y-A.y,N.x-A.x),T=N}else C=Math.atan2(S.y-M.y,S.x-M.x),T=this._findBorderPosition(S,c);else{var R=(P?-z:z)/2,j=this.getPoint(.5+R,w),H=this.getPoint(.5-R,w);C=Math.atan2(j.y-H.y,j.x-H.x),T=this.getPoint(.5,w)}}else{var W=df(this._getCircleData(c),3),V=W[0],q=W[1],U=W[2];if("from"===f){var X=(this||b).options.selfReference.angle,K=(this||b).options.selfReference.angle+Math.PI,Z=this._findBorderPositionCircle((this||b).from,c,{x:V,y:q,low:X,high:K,direction:-1});C=-2*Z.t*Math.PI+1.5*Math.PI+.1*Math.PI,T=Z}else if("to"===f){var $=(this||b).options.selfReference.angle,J=(this||b).options.selfReference.angle+Math.PI,tt=this._findBorderPositionCircle((this||b).from,c,{x:V,y:q,low:$,high:J,direction:1});C=-2*tt.t*Math.PI+1.5*Math.PI-1.1*Math.PI,T=tt}else{var et=(this||b).options.selfReference.angle/(2*Math.PI);T=this._pointOnCircle(V,q,U,et),C=-2*et*Math.PI+1.5*Math.PI+.1*Math.PI}}return{point:T,core:{x:T.x-.9*F*Math.cos(C),y:T.y-.9*F*Math.sin(C)},angle:C,length:F,type:I}}},{key:"drawArrowHead",value:function(c,f,b,w,x){c.strokeStyle=this.getColor(c,f),c.fillStyle=c.strokeStyle,c.lineWidth=f.width,sO.draw(c,x)&&(this.enableShadow(c,f),Ug(c).call(c),this.disableShadow(c,f))}},{key:"enableShadow",value:function(c,f){!0===f.shadow&&(c.shadowColor=f.shadowColor,c.shadowBlur=f.shadowSize,c.shadowOffsetX=f.shadowX,c.shadowOffsetY=f.shadowY)}},{key:"disableShadow",value:function(c,f){!0===f.shadow&&(c.shadowColor="rgba(0,0,0,0)",c.shadowBlur=0,c.shadowOffsetX=0,c.shadowOffsetY=0)}},{key:"drawBackground",value:function(c,f){if(!1!==f.background){var b={strokeStyle:c.strokeStyle,lineWidth:c.lineWidth,dashes:c.dashes};c.strokeStyle=f.backgroundColor,c.lineWidth=f.backgroundSize,this.setStrokeDashed(c,f.backgroundDashes),c.stroke(),c.strokeStyle=b.strokeStyle,c.lineWidth=b.lineWidth,c.dashes=b.dashes,this.setStrokeDashed(c,f.dashes)}}},{key:"setStrokeDashed",value:function(c,f){if(!1!==f)if(void 0!==c.setLineDash){var b=Wf(f)?f:[5,5];c.setLineDash(b)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else void 0!==c.setLineDash?c.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),t}();function jE(c,f){var b=$f(c);if(Qk){var w=Qk(c);f&&(w=Cv(w).call(w,(function(f){return ax(c,f).enumerable}))),b.push.apply(b,w)}return b}function LE(c){for(var f=1;f<arguments.length;f++){var b,w,x=null!=arguments[f]?arguments[f]:{};f%2?vp(b=jE(Object(x),!0)).call(b,(function(f){s_(c,f,x[f])})):yx?Bx(c,yx(x)):vp(w=jE(Object(x))).call(w,(function(f){zx(c,f,ax(x,f))}))}return c}function HE(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var lO=function(c){cx(i,c);var f=HE(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"_findBorderPositionBezier",value:function(c,f){var w,x,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),O=!1,C=1,T=0,S=(this||b).to,M=(this||b).options.endPointOffset?(this||b).options.endPointOffset.to:0;c.id===(this||b).from.id&&(S=(this||b).from,O=!0,M=(this||b).options.endPointOffset?(this||b).options.endPointOffset.from:0),!1===(this||b).options.arrowStrikethrough&&(M=0);var P=0;do{x=.5*(T+C),w=this.getPoint(x,_);var D=Math.atan2(S.y-w.y,S.x-w.x),I=S.distanceToBorder(f,D)+M-Math.sqrt(Math.pow(w.x-S.x,2)+Math.pow(w.y-S.y,2));if(Math.abs(I)<.2)break;I<0?!1===O?T=x:C=x:!1===O?C=x:T=x,++P}while(T<=C&&P<10);return LE(LE({},w),{},{t:x})}},{key:"_getDistanceToBezierEdge",value:function(c,f,b,w,x,_,O){var C,T,S,M,P,D=1e9,I=c,B=f;for(T=1;T<10;T++)S=.1*T,M=Math.pow(1-S,2)*c+2*S*(1-S)*O.x+Math.pow(S,2)*b,P=Math.pow(1-S,2)*f+2*S*(1-S)*O.y+Math.pow(S,2)*w,T>0&&(D=(C=this._getDistanceToLine(I,B,M,P,x,_))<D?C:D),I=M,B=P;return D}},{key:"_bezierCurve",value:function(c,f,w,x){c.beginPath(),c.moveTo((this||b).fromPoint.x,(this||b).fromPoint.y),null!=w&&null!=w.x?null!=x&&null!=x.x?c.bezierCurveTo(w.x,w.y,x.x,x.y,(this||b).toPoint.x,(this||b).toPoint.y):c.quadraticCurveTo(w.x,w.y,(this||b).toPoint.x,(this||b).toPoint.y):c.lineTo((this||b).toPoint.x,(this||b).toPoint.y),this.drawBackground(c,f),this.enableShadow(c,f),c.stroke(),this.disableShadow(c,f)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),i}(hO);function VE(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var cO=function(c){cx(i,c);var f=VE(i);function i(c,w,x){var _;return vh(this||b,i),(_=f.call(this||b,c,w,x)).via=_.via,_._boundFunction=function(){_.positionBezierNode()},_._body.emitter.on("_repositionBezierNodes",_._boundFunction),_}return wu(i,[{key:"setOptions",value:function(c){vE(px(i.prototype),"setOptions",this||b).call(this||b,c);var f=!1;(this||b).options.physics!==c.physics&&(f=!0),(this||b).options=c,(this||b).id=(this||b).options.id,(this||b).from=(this||b)._body.nodes[(this||b).options.from],(this||b).to=(this||b)._body.nodes[(this||b).options.to],this.setupSupportNode(),this.connect(),!0===f&&((this||b).via.setOptions({physics:(this||b).options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){(this||b).from=(this||b)._body.nodes[(this||b).options.from],(this||b).to=(this||b)._body.nodes[(this||b).options.to],void 0===(this||b).from||void 0===(this||b).to||!1===(this||b).options.physics||(this||b).from.id===(this||b).to.id?(this||b).via.setOptions({physics:!1}):(this||b).via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return(this||b)._body.emitter.off("_repositionBezierNodes",(this||b)._boundFunction),void 0!==(this||b).via&&(delete(this||b)._body.nodes[(this||b).via.id],(this||b).via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===(this||b).via){var c="edgeId:"+(this||b).id,f=(this||b)._body.functions.createNode({id:c,shape:"circle",physics:!0,hidden:!0});(this||b)._body.nodes[c]=f,(this||b).via=f,(this||b).via.parentEdgeId=(this||b).id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==(this||b).via&&void 0!==(this||b).from&&void 0!==(this||b).to?((this||b).via.x=.5*((this||b).from.x+(this||b).to.x),(this||b).via.y=.5*((this||b).from.y+(this||b).to.y)):void 0!==(this||b).via&&((this||b).via.x=0,(this||b).via.y=0)}},{key:"_line",value:function(c,f,b){this._bezierCurve(c,f,b)}},{key:"_getViaCoordinates",value:function(){return(this||b).via}},{key:"getViaNode",value:function(){return(this||b).via}},{key:"getPoint",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(this||b).via;if((this||b).from===(this||b).to){var w=df(this._getCircleData(),3),x=w[0],_=w[1],O=w[2],C=2*Math.PI*(1-c);return{x:x+O*Math.sin(C),y:_+O-O*(1-Math.cos(C))}}return{x:Math.pow(1-c,2)*(this||b).fromPoint.x+2*c*(1-c)*f.x+Math.pow(c,2)*(this||b).toPoint.x,y:Math.pow(1-c,2)*(this||b).fromPoint.y+2*c*(1-c)*f.y+Math.pow(c,2)*(this||b).toPoint.y}}},{key:"_findBorderPosition",value:function(c,f){return this._findBorderPositionBezier(c,f,(this||b).via)}},{key:"_getDistanceToEdge",value:function(c,f,w,x,_,O){return this._getDistanceToBezierEdge(c,f,w,x,_,O,(this||b).via)}}]),i}(lO);function UE(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var uO=function(c){cx(i,c);var f=UE(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"_line",value:function(c,f,b){this._bezierCurve(c,f,b)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var c,f,w=(this||b).options.smooth.roundness,x=(this||b).options.smooth.type,_=Math.abs((this||b).from.x-(this||b).to.x),O=Math.abs((this||b).from.y-(this||b).to.y);if("discrete"===x||"diagonalCross"===x){var C,T;C=T=_<=O?w*O:w*_,(this||b).from.x>(this||b).to.x&&(C=-C),(this||b).from.y>=(this||b).to.y&&(T=-T);var S=(this||b).from.x+C,M=(this||b).from.y+T;return"discrete"===x&&(_<=O?S=_<w*O?(this||b).from.x:S:M=O<w*_?(this||b).from.y:M),{x:S,y:M}}if("straightCross"===x){var P=(1-w)*_,D=(1-w)*O;return _<=O?(P=0,(this||b).from.y<(this||b).to.y&&(D=-D)):((this||b).from.x<(this||b).to.x&&(P=-P),D=0),{x:(this||b).to.x+P,y:(this||b).to.y+D}}if("horizontal"===x){var I=(1-w)*_;return(this||b).from.x<(this||b).to.x&&(I=-I),{x:(this||b).to.x+I,y:(this||b).from.y}}if("vertical"===x){var B=(1-w)*O;return(this||b).from.y<(this||b).to.y&&(B=-B),{x:(this||b).from.x,y:(this||b).to.y+B}}if("curvedCW"===x){_=(this||b).to.x-(this||b).from.x,O=(this||b).from.y-(this||b).to.y;var F=Math.sqrt(_*_+O*O),z=Math.PI,N=(Math.atan2(O,_)+(.5*w+.5)*z)%(2*z);return{x:(this||b).from.x+(.5*w+.5)*F*Math.sin(N),y:(this||b).from.y+(.5*w+.5)*F*Math.cos(N)}}if("curvedCCW"===x){_=(this||b).to.x-(this||b).from.x,O=(this||b).from.y-(this||b).to.y;var A=Math.sqrt(_*_+O*O),R=Math.PI,j=(Math.atan2(O,_)+(.5*-w+.5)*R)%(2*R);return{x:(this||b).from.x+(.5*w+.5)*A*Math.sin(j),y:(this||b).from.y+(.5*w+.5)*A*Math.cos(j)}}c=f=_<=O?w*O:w*_,(this||b).from.x>(this||b).to.x&&(c=-c),(this||b).from.y>=(this||b).to.y&&(f=-f);var H=(this||b).from.x+c,W=(this||b).from.y+f;return _<=O?H=(this||b).from.x<=(this||b).to.x?(this||b).to.x<H?(this||b).to.x:H:(this||b).to.x>H?(this||b).to.x:H:W=(this||b).from.y>=(this||b).to.y?(this||b).to.y>W?(this||b).to.y:W:(this||b).to.y<W?(this||b).to.y:W,{x:H,y:W}}},{key:"_findBorderPosition",value:function(c,f){var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(c,f,b.via)}},{key:"_getDistanceToEdge",value:function(c,f,b,w,x,_){var O=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(c,f,b,w,x,_,O)}},{key:"getPoint",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),w=c;return{x:Math.pow(1-w,2)*(this||b).fromPoint.x+2*w*(1-w)*f.x+Math.pow(w,2)*(this||b).toPoint.x,y:Math.pow(1-w,2)*(this||b).fromPoint.y+2*w*(1-w)*f.y+Math.pow(w,2)*(this||b).toPoint.y}}}]),i}(lO);function XE(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var fO=function(c){cx(i,c);var f=XE(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"_getDistanceToBezierEdge2",value:function(c,f,b,w,x,_,O,C){for(var T=1e9,S=c,M=f,P=[0,0,0,0],D=1;D<10;D++){var I=.1*D;P[0]=Math.pow(1-I,3),P[1]=3*I*Math.pow(1-I,2),P[2]=3*Math.pow(I,2)*(1-I),P[3]=Math.pow(I,3);var B=P[0]*c+P[1]*O.x+P[2]*C.x+P[3]*b,F=P[0]*f+P[1]*O.y+P[2]*C.y+P[3]*w;if(D>0){var z=this._getDistanceToLine(S,M,B,F,x,_);T=z<T?z:T}S=B,M=F}return T}}]),i}(lO);function GE(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var vO=function(c){cx(i,c);var f=GE(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"_line",value:function(c,f,b){var w=b[0],x=b[1];this._bezierCurve(c,f,w,x)}},{key:"_getViaCoordinates",value:function(){var c,f,w,x,_=(this||b).from.x-(this||b).to.x,O=(this||b).from.y-(this||b).to.y,C=(this||b).options.smooth.roundness;return(Math.abs(_)>Math.abs(O)||!0===(this||b).options.smooth.forceDirection||"horizontal"===(this||b).options.smooth.forceDirection)&&"vertical"!==(this||b).options.smooth.forceDirection?(f=(this||b).from.y,x=(this||b).to.y,c=(this||b).from.x-C*_,w=(this||b).to.x+C*_):(f=(this||b).from.y-C*O,x=(this||b).to.y+C*O,c=(this||b).from.x,w=(this||b).to.x),[{x:c,y:f},{x:w,y:x}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(c,f){return this._findBorderPositionBezier(c,f)}},{key:"_getDistanceToEdge",value:function(c,f,b,w,x,_){var O=df(arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),2),C=O[0],T=O[1];return this._getDistanceToBezierEdge2(c,f,b,w,x,_,C,T)}},{key:"getPoint",value:function(c){var f=df(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),2),w=f[0],x=f[1],_=c,O=[Math.pow(1-_,3),3*_*Math.pow(1-_,2),3*Math.pow(_,2)*(1-_),Math.pow(_,3)];return{x:O[0]*(this||b).fromPoint.x+O[1]*w.x+O[2]*x.x+O[3]*(this||b).toPoint.x,y:O[0]*(this||b).fromPoint.y+O[1]*w.y+O[2]*x.y+O[3]*(this||b).toPoint.y}}}]),i}(fO);function ZE(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var gO=function(c){cx(i,c);var f=ZE(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"_line",value:function(c,f){c.beginPath(),c.moveTo((this||b).fromPoint.x,(this||b).fromPoint.y),c.lineTo((this||b).toPoint.x,(this||b).toPoint.y),this.enableShadow(c,f),c.stroke(),this.disableShadow(c,f)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(c){return{x:(1-c)*(this||b).fromPoint.x+c*(this||b).toPoint.x,y:(1-c)*(this||b).fromPoint.y+c*(this||b).toPoint.y}}},{key:"_findBorderPosition",value:function(c,f){var w=(this||b).to,x=(this||b).from;c.id===(this||b).from.id&&(w=(this||b).from,x=(this||b).to);var _=Math.atan2(w.y-x.y,w.x-x.x),O=w.x-x.x,C=w.y-x.y,T=Math.sqrt(O*O+C*C),S=(T-c.distanceToBorder(f,_))/T;return{x:(1-S)*x.x+S*w.x,y:(1-S)*x.y+S*w.y,t:0}}},{key:"_getDistanceToEdge",value:function(c,f,b,w,x,_){return this._getDistanceToLine(c,f,b,w,x,_)}}]),i}(hO),mO=function(){function t(c,f,w,x,_){if(vh(this||b,t),void 0===f)throw new Error("No body provided");(this||b).options=Zm(x),(this||b).globalOptions=x,(this||b).defaultOptions=_,(this||b).body=f,(this||b).imagelist=w,(this||b).id=void 0,(this||b).fromId=void 0,(this||b).toId=void 0,(this||b).selected=!1,(this||b).hover=!1,(this||b).labelDirty=!0,(this||b).baseWidth=(this||b).options.width,(this||b).baseFontSize=(this||b).options.font.size,(this||b).from=void 0,(this||b).to=void 0,(this||b).edgeType=void 0,(this||b).connected=!1,(this||b).labelModule=new k_((this||b).body,(this||b).options,!0),this.setOptions(c)}return wu(t,[{key:"setOptions",value:function(c){if(c){var f=void 0!==c.physics&&(this||b).options.physics!==c.physics||void 0!==c.hidden&&((this||b).options.hidden||!1)!==(c.hidden||!1)||void 0!==c.from&&(this||b).options.from!==c.from||void 0!==c.to&&(this||b).options.to!==c.to;t.parseOptions((this||b).options,c,!0,(this||b).globalOptions),void 0!==c.id&&((this||b).id=c.id),void 0!==c.from&&((this||b).fromId=c.from),void 0!==c.to&&((this||b).toId=c.to),void 0!==c.title&&((this||b).title=c.title),void 0!==c.value&&(c.value=e_(c.value));var w=[c,(this||b).options,(this||b).defaultOptions];return(this||b).chooser=E_("edge",w),this.updateLabelModule(c),f=this.updateEdgeType()||f,this._setInteractionWidths(),this.connect(),f}}},{key:"getFormattingValues",value:function(){var c=!0===(this||b).options.arrows.to||!0===(this||b).options.arrows.to.enabled,f=!0===(this||b).options.arrows.from||!0===(this||b).options.arrows.from.enabled,w=!0===(this||b).options.arrows.middle||!0===(this||b).options.arrows.middle.enabled,x=(this||b).options.color.inherit,_={toArrow:c,toArrowScale:(this||b).options.arrows.to.scaleFactor,toArrowType:(this||b).options.arrows.to.type,toArrowSrc:(this||b).options.arrows.to.src,toArrowImageWidth:(this||b).options.arrows.to.imageWidth,toArrowImageHeight:(this||b).options.arrows.to.imageHeight,middleArrow:w,middleArrowScale:(this||b).options.arrows.middle.scaleFactor,middleArrowType:(this||b).options.arrows.middle.type,middleArrowSrc:(this||b).options.arrows.middle.src,middleArrowImageWidth:(this||b).options.arrows.middle.imageWidth,middleArrowImageHeight:(this||b).options.arrows.middle.imageHeight,fromArrow:f,fromArrowScale:(this||b).options.arrows.from.scaleFactor,fromArrowType:(this||b).options.arrows.from.type,fromArrowSrc:(this||b).options.arrows.from.src,fromArrowImageWidth:(this||b).options.arrows.from.imageWidth,fromArrowImageHeight:(this||b).options.arrows.from.imageHeight,arrowStrikethrough:(this||b).options.arrowStrikethrough,color:x?void 0:(this||b).options.color.color,inheritsColor:x,opacity:(this||b).options.color.opacity,hidden:(this||b).options.hidden,length:(this||b).options.length,shadow:(this||b).options.shadow.enabled,shadowColor:(this||b).options.shadow.color,shadowSize:(this||b).options.shadow.size,shadowX:(this||b).options.shadow.x,shadowY:(this||b).options.shadow.y,dashes:(this||b).options.dashes,width:(this||b).options.width,background:(this||b).options.background.enabled,backgroundColor:(this||b).options.background.color,backgroundSize:(this||b).options.background.size,backgroundDashes:(this||b).options.background.dashes};if((this||b).selected||(this||b).hover)if(!0===(this||b).chooser){if((this||b).selected){var O=(this||b).options.selectionWidth;"function"==typeof O?_.width=O(_.width):"number"==typeof O&&(_.width+=O),_.width=Math.max(_.width,.3/(this||b).body.view.scale),_.color=(this||b).options.color.highlight,_.shadow=(this||b).options.shadow.enabled}else if((this||b).hover){var C=(this||b).options.hoverWidth;"function"==typeof C?_.width=C(_.width):"number"==typeof C&&(_.width+=C),_.width=Math.max(_.width,.3/(this||b).body.view.scale),_.color=(this||b).options.color.hover,_.shadow=(this||b).options.shadow.enabled}}else"function"==typeof(this||b).chooser&&(this.chooser(_,(this||b).options.id,(this||b).selected,(this||b).hover),void 0!==_.color&&(_.inheritsColor=!1),!1===_.shadow&&(_.shadowColor===(this||b).options.shadow.color&&_.shadowSize===(this||b).options.shadow.size&&_.shadowX===(this||b).options.shadow.x&&_.shadowY===(this||b).options.shadow.y||(_.shadow=!0)));else _.shadow=(this||b).options.shadow.enabled,_.width=Math.max(_.width,.3/(this||b).body.view.scale);return _}},{key:"updateLabelModule",value:function(c){var f=[c,(this||b).options,(this||b).globalOptions,(this||b).defaultOptions];(this||b).labelModule.update((this||b).options,f),void 0!==(this||b).labelModule.baseSize&&((this||b).baseFontSize=(this||b).labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var c=(this||b).options.smooth,f=!1,w=!0;return void 0!==(this||b).edgeType&&(((this||b).edgeType instanceof cO&&!0===c.enabled&&"dynamic"===c.type||(this||b).edgeType instanceof vO&&!0===c.enabled&&"cubicBezier"===c.type||(this||b).edgeType instanceof uO&&!0===c.enabled&&"dynamic"!==c.type&&"cubicBezier"!==c.type||(this||b).edgeType instanceof gO&&!1===c.type.enabled)&&(w=!1),!0===w&&(f=this.cleanup())),!0===w?!0===c.enabled?"dynamic"===c.type?(f=!0,(this||b).edgeType=new cO((this||b).options,(this||b).body,(this||b).labelModule)):"cubicBezier"===c.type?(this||b).edgeType=new vO((this||b).options,(this||b).body,(this||b).labelModule):(this||b).edgeType=new uO((this||b).options,(this||b).body,(this||b).labelModule):(this||b).edgeType=new gO((this||b).options,(this||b).body,(this||b).labelModule):(this||b).edgeType.setOptions((this||b).options),f}},{key:"connect",value:function(){this.disconnect(),(this||b).from=(this||b).body.nodes[(this||b).fromId]||void 0,(this||b).to=(this||b).body.nodes[(this||b).toId]||void 0,(this||b).connected=void 0!==(this||b).from&&void 0!==(this||b).to,!0===(this||b).connected?((this||b).from.attachEdge(this||b),(this||b).to.attachEdge(this||b)):((this||b).from&&(this||b).from.detachEdge(this||b),(this||b).to&&(this||b).to.detachEdge(this||b)),(this||b).edgeType.connect()}},{key:"disconnect",value:function(){(this||b).from&&((this||b).from.detachEdge(this||b),(this||b).from=void 0),(this||b).to&&((this||b).to.detachEdge(this||b),(this||b).to=void 0),(this||b).connected=!1}},{key:"getTitle",value:function(){return(this||b).title}},{key:"isSelected",value:function(){return(this||b).selected}},{key:"getValue",value:function(){return(this||b).options.value}},{key:"setValueRange",value:function(c,f,w){if(void 0!==(this||b).options.value){var x=(this||b).options.scaling.customScalingFunction(c,f,w,(this||b).options.value),_=(this||b).options.scaling.max-(this||b).options.scaling.min;if(!0===(this||b).options.scaling.label.enabled){var O=(this||b).options.scaling.label.max-(this||b).options.scaling.label.min;(this||b).options.font.size=(this||b).options.scaling.label.min+x*O}(this||b).options.width=(this||b).options.scaling.min+x*_}else(this||b).options.width=(this||b).baseWidth,(this||b).options.font.size=(this||b).baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof(this||b).options.hoverWidth?(this||b).edgeType.hoverWidth=(this||b).options.hoverWidth((this||b).options.width):(this||b).edgeType.hoverWidth=(this||b).options.hoverWidth+(this||b).options.width,"function"==typeof(this||b).options.selectionWidth?(this||b).edgeType.selectionWidth=(this||b).options.selectionWidth((this||b).options.width):(this||b).edgeType.selectionWidth=(this||b).options.selectionWidth+(this||b).options.width}},{key:"draw",value:function(c){var f=this.getFormattingValues();if(!f.hidden){var w=(this||b).edgeType.getViaNode();(this||b).edgeType.drawLine(c,f,(this||b).selected,(this||b).hover,w),this.drawLabel(c,w)}}},{key:"drawArrows",value:function(c){var f=this.getFormattingValues();if(!f.hidden){var w=(this||b).edgeType.getViaNode(),x={};(this||b).edgeType.fromPoint=(this||b).edgeType.from,(this||b).edgeType.toPoint=(this||b).edgeType.to,f.fromArrow&&(x.from=(this||b).edgeType.getArrowData(c,"from",w,(this||b).selected,(this||b).hover,f),!1===f.arrowStrikethrough&&((this||b).edgeType.fromPoint=x.from.core),f.fromArrowSrc&&(x.from.image=(this||b).imagelist.load(f.fromArrowSrc)),f.fromArrowImageWidth&&(x.from.imageWidth=f.fromArrowImageWidth),f.fromArrowImageHeight&&(x.from.imageHeight=f.fromArrowImageHeight)),f.toArrow&&(x.to=(this||b).edgeType.getArrowData(c,"to",w,(this||b).selected,(this||b).hover,f),!1===f.arrowStrikethrough&&((this||b).edgeType.toPoint=x.to.core),f.toArrowSrc&&(x.to.image=(this||b).imagelist.load(f.toArrowSrc)),f.toArrowImageWidth&&(x.to.imageWidth=f.toArrowImageWidth),f.toArrowImageHeight&&(x.to.imageHeight=f.toArrowImageHeight)),f.middleArrow&&(x.middle=(this||b).edgeType.getArrowData(c,"middle",w,(this||b).selected,(this||b).hover,f),f.middleArrowSrc&&(x.middle.image=(this||b).imagelist.load(f.middleArrowSrc)),f.middleArrowImageWidth&&(x.middle.imageWidth=f.middleArrowImageWidth),f.middleArrowImageHeight&&(x.middle.imageHeight=f.middleArrowImageHeight)),f.fromArrow&&(this||b).edgeType.drawArrowHead(c,f,(this||b).selected,(this||b).hover,x.from),f.middleArrow&&(this||b).edgeType.drawArrowHead(c,f,(this||b).selected,(this||b).hover,x.middle),f.toArrow&&(this||b).edgeType.drawArrowHead(c,f,(this||b).selected,(this||b).hover,x.to)}}},{key:"drawLabel",value:function(c,f){if(void 0!==(this||b).options.label){var w,x=(this||b).from,_=(this||b).to;if((this||b).labelModule.differentState((this||b).selected,(this||b).hover)&&(this||b).labelModule.getTextSize(c,(this||b).selected,(this||b).hover),x.id!=_.id){(this||b).labelModule.pointToSelf=!1,w=(this||b).edgeType.getPoint(.5,f),c.save();var O=this._getRotation(c);0!=O.angle&&(c.translate(O.x,O.y),c.rotate(O.angle)),(this||b).labelModule.draw(c,w.x,w.y,(this||b).selected,(this||b).hover),c.restore()}else{(this||b).labelModule.pointToSelf=!0;var C=S_(c,(this||b).options.selfReference.angle,(this||b).options.selfReference.size,x);w=this._pointOnCircle(C.x,C.y,(this||b).options.selfReference.size,(this||b).options.selfReference.angle),(this||b).labelModule.draw(c,w.x,w.y,(this||b).selected,(this||b).hover)}}}},{key:"getItemsOnPoint",value:function(c){var f=[];if((this||b).labelModule.visible()){var w=this._getRotation();O_((this||b).labelModule.getSize(),c,w)&&f.push({edgeId:(this||b).id,labelId:0})}var x={left:c.x,top:c.y};return this.isOverlappingWith(x)&&f.push({edgeId:(this||b).id}),f}},{key:"isOverlappingWith",value:function(c){if((this||b).connected){var f=(this||b).from.x,w=(this||b).from.y,x=(this||b).to.x,_=(this||b).to.y,O=c.left,C=c.top;return(this||b).edgeType.getDistanceToEdge(f,w,x,_,O,C)<10}return!1}},{key:"_getRotation",value:function(c){var f=(this||b).edgeType.getViaNode(),w=(this||b).edgeType.getPoint(.5,f);void 0!==c&&(this||b).labelModule.calculateLabelSize(c,(this||b).selected,(this||b).hover,w.x,w.y);var x={x:w.x,y:(this||b).labelModule.size.yLine,angle:0};if(!(this||b).labelModule.visible())return x;if("horizontal"===(this||b).options.font.align)return x;var _=(this||b).from.y-(this||b).to.y,O=(this||b).from.x-(this||b).to.x,C=Math.atan2(_,O);return(C<-1&&O<0||C>0&&O<0)&&(C+=Math.PI),x.angle=C,x}},{key:"_pointOnCircle",value:function(c,f,b,w){return{x:c+b*Math.cos(w),y:f-b*Math.sin(w)}}},{key:"select",value:function(){(this||b).selected=!0}},{key:"unselect",value:function(){(this||b).selected=!1}},{key:"cleanup",value:function(){return(this||b).edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete(this||b).body.edges[(this||b).id]}},{key:"endPointsValid",value:function(){return void 0!==(this||b).body.nodes[(this||b).fromId]&&void 0!==(this||b).body.nodes[(this||b).toId]}}],[{key:"parseOptions",value:function(c,f){var b=arguments.length>2&&void 0!==arguments[2]&&arguments[2],w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},x=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Nm(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],c,f,b),void 0!==f.endPointOffset&&void 0!==f.endPointOffset.from&&(qk(f.endPointOffset.from)?c.endPointOffset.from=f.endPointOffset.from:(c.endPointOffset.from=void 0!==w.endPointOffset.from?w.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),void 0!==f.endPointOffset&&void 0!==f.endPointOffset.to&&(qk(f.endPointOffset.to)?c.endPointOffset.to=f.endPointOffset.to:(c.endPointOffset.to=void 0!==w.endPointOffset.to?w.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),C_(f.label)?c.label=f.label:C_(c.label)||(c.label=void 0),Qm(c,f,"smooth",w),Qm(c,f,"shadow",w),Qm(c,f,"background",w),void 0!==f.dashes&&null!==f.dashes?c.dashes=f.dashes:!0===b&&null===f.dashes&&(c.dashes=lg(w.dashes)),void 0!==f.scaling&&null!==f.scaling?(void 0!==f.scaling.min&&(c.scaling.min=f.scaling.min),void 0!==f.scaling.max&&(c.scaling.max=f.scaling.max),Qm(c.scaling,f.scaling,"label",w.scaling)):!0===b&&null===f.scaling&&(c.scaling=lg(w.scaling)),void 0!==f.arrows&&null!==f.arrows)if("string"==typeof f.arrows){var _=f.arrows.toLowerCase();c.arrows.to.enabled=-1!=ag(_).call(_,"to"),c.arrows.middle.enabled=-1!=ag(_).call(_,"middle"),c.arrows.from.enabled=-1!=ag(_).call(_,"from")}else{if("object"!==gu(f.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+fg(f.arrows));Qm(c.arrows,f.arrows,"to",w.arrows),Qm(c.arrows,f.arrows,"middle",w.arrows),Qm(c.arrows,f.arrows,"from",w.arrows)}else!0===b&&null===f.arrows&&(c.arrows=lg(w.arrows));if(void 0!==f.color&&null!==f.color){var O=Im(f.color)?{color:f.color,highlight:f.color,hover:f.color,inherit:!1,opacity:1}:f.color,C=c.color;if(x)Rm(C,w.color,!1,b);else for(var T in C)Object.prototype.hasOwnProperty.call(C,T)&&delete C[T];if(Im(C))C.color=C,C.highlight=C,C.hover=C,C.inherit=!1,void 0===O.opacity&&(C.opacity=1);else{var S=!1;void 0!==O.color&&(C.color=O.color,S=!0),void 0!==O.highlight&&(C.highlight=O.highlight,S=!0),void 0!==O.hover&&(C.hover=O.hover,S=!0),void 0!==O.inherit&&(C.inherit=O.inherit),void 0!==O.opacity&&(C.opacity=Math.min(1,Math.max(0,O.opacity))),!0===S?C.inherit=!1:void 0===C.inherit&&(C.inherit="from")}}else!0===b&&null===f.color&&(c.color=Zm(w.color));!0===b&&null===f.font&&(c.font=Zm(w.font)),Object.prototype.hasOwnProperty.call(f,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),c.selfReference.size=f.selfReferenceSize)}}]),t}(),wO=function(){function t(c,f,w){var x,_=this||b;vh(this||b,t),(this||b).body=c,(this||b).images=f,(this||b).groups=w,(this||b).body.functions.createEdge=dn(x=(this||b).create).call(x,this||b),(this||b).edgesListeners={add:function(c,f){_.add(f.items)},update:function(c,f){_.update(f.items)},remove:function(c,f){_.remove(f.items)}},(this||b).options={},(this||b).defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(c,f,b,w){if(f===c)return.5;var x=1/(f-c);return Math.max(0,(w-c)*x)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Rm((this||b).options,(this||b).defaultOptions),this.bindEventListeners()}return wu(t,[{key:"bindEventListeners",value:function(){var c,f,w=this||b;(this||b).body.emitter.on("_forceDisableDynamicCurves",(function(c){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"dynamic"===c&&(c="continuous");var b=!1;for(var x in w.body.edges)if(Object.prototype.hasOwnProperty.call(w.body.edges,x)){var _=w.body.edges[x],O=w.body.data.edges.get(x);if(null!=O){var C=O.smooth;void 0!==C&&!0===C.enabled&&"dynamic"===C.type&&(void 0===c?_.setOptions({smooth:!1}):_.setOptions({smooth:{type:c}}),b=!0)}}!0===f&&!0===b&&w.body.emitter.emit("_dataChanged")})),(this||b).body.emitter.on("_dataUpdated",(function(){w.reconnectEdges()})),(this||b).body.emitter.on("refreshEdges",dn(c=(this||b).refresh).call(c,this||b)),(this||b).body.emitter.on("refresh",dn(f=(this||b).refresh).call(f,this||b)),(this||b).body.emitter.on("destroy",(function(){Hm(w.edgesListeners,(function(c,f){w.body.data.edges&&w.body.data.edges.off(f,c)})),delete w.body.functions.createEdge,delete w.edgesListeners.add,delete w.edgesListeners.update,delete w.edgesListeners.remove,delete w.edgesListeners}))}},{key:"setOptions",value:function(c){if(void 0!==c){mO.parseOptions((this||b).options,c,!0,(this||b).defaultOptions,!0);var f=!1;if(void 0!==c.smooth)for(var w in(this||b).body.edges)Object.prototype.hasOwnProperty.call((this||b).body.edges,w)&&(f=(this||b).body.edges[w].updateEdgeType()||f);if(void 0!==c.font)for(var x in(this||b).body.edges)Object.prototype.hasOwnProperty.call((this||b).body.edges,x)&&(this||b).body.edges[x].updateLabelModule();void 0===c.hidden&&void 0===c.physics&&!0!==f||(this||b).body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(c){var w=this||b,x=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=(this||b).body.data.edges;if(f.isDataViewLike("id",c))(this||b).body.data.edges=c;else if(Wf(c))(this||b).body.data.edges=new f.DataSet,(this||b).body.data.edges.add(c);else{if(c)throw new TypeError("Array or DataSet expected");(this||b).body.data.edges=new f.DataSet}if(_&&Hm((this||b).edgesListeners,(function(c,f){_.off(f,c)})),(this||b).body.edges={},(this||b).body.data.edges){Hm((this||b).edgesListeners,(function(c,f){w.body.data.edges.on(f,c)}));var O=(this||b).body.data.edges.getIds();this.add(O,!0)}(this||b).body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===x&&(this||b).body.emitter.emit("_dataChanged")}},{key:"add",value:function(c){for(var f=arguments.length>1&&void 0!==arguments[1]&&arguments[1],w=(this||b).body.edges,x=(this||b).body.data.edges,_=0;_<c.length;_++){var O=c[_],C=w[O];C&&C.disconnect();var T=x.get(O,{showInternalIds:!0});w[O]=this.create(T)}(this||b).body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===f&&(this||b).body.emitter.emit("_dataChanged")}},{key:"update",value:function(c){for(var f=(this||b).body.edges,w=(this||b).body.data.edges,x=!1,_=0;_<c.length;_++){var O=c[_],C=w.get(O),T=f[O];void 0!==T?(T.disconnect(),x=T.setOptions(C)||x,T.connect()):((this||b).body.edges[O]=this.create(C),x=!0)}!0===x?((this||b).body.emitter.emit("_adjustEdgesForHierarchicalLayout"),(this||b).body.emitter.emit("_dataChanged")):(this||b).body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(c){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!==c.length){var w=(this||b).body.edges;Hm(c,(function(c){var f=w[c];void 0!==f&&f.remove()})),f&&(this||b).body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var c=this||b;Hm((this||b).body.edges,(function(f,b){var w=c.body.data.edges.get(b);void 0!==w&&f.setOptions(w)}))}},{key:"create",value:function(c){return new mO(c,(this||b).body,(this||b).images,(this||b).options,(this||b).defaultOptions)}},{key:"reconnectEdges",value:function(){var c,f=(this||b).body.nodes,w=(this||b).body.edges;for(c in f)Object.prototype.hasOwnProperty.call(f,c)&&(f[c].edges=[]);for(c in w)if(Object.prototype.hasOwnProperty.call(w,c)){var x=w[c];x.from=null,x.to=null,x.connect()}}},{key:"getConnectedNodes",value:function(c){var f=[];if(void 0!==(this||b).body.edges[c]){var w=(this||b).body.edges[c];void 0!==w.fromId&&f.push(w.fromId),void 0!==w.toId&&f.push(w.toId)}return f}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var c=this||b,f=[];Hm((this||b).body.edges,(function(b,w){var x=c.body.nodes[b.toId],_=c.body.nodes[b.fromId];void 0!==x&&!0===x.isCluster||void 0!==_&&!0===_.isCluster||void 0!==x&&void 0!==_||f.push(w)})),this.remove(f,!1)}},{key:"_addMissingEdges",value:function(){var c=(this||b).body.data.edges;if(null!=c){var f=(this||b).body.edges,w=[];vp(c).call(c,(function(c,b){void 0===f[b]&&w.push(b)})),this.add(w,!0)}}}]),t}(),kO=function(){function t(c,f,w){vh(this||b,t),(this||b).body=c,(this||b).physicsBody=f,(this||b).barnesHutTree,this.setOptions(w),(this||b)._rng=Em("BARNES HUT SOLVER")}return wu(t,[{key:"setOptions",value:function(c){(this||b).options=c,(this||b).thetaInversed=1/(this||b).options.theta,(this||b).overlapAvoidanceFactor=1-Math.max(0,Math.min(1,(this||b).options.avoidOverlap))}},{key:"solve",value:function(){if(0!==(this||b).options.gravitationalConstant&&(this||b).physicsBody.physicsNodeIndices.length>0){var c,f=(this||b).body.nodes,w=(this||b).physicsBody.physicsNodeIndices,x=w.length,_=this._formBarnesHutTree(f,w);(this||b).barnesHutTree=_;for(var O=0;O<x;O++)(c=f[w[O]]).options.mass>0&&this._getForceContributions(_.root,c)}}},{key:"_getForceContributions",value:function(c,f){this._getForceContribution(c.children.NW,f),this._getForceContribution(c.children.NE,f),this._getForceContribution(c.children.SW,f),this._getForceContribution(c.children.SE,f)}},{key:"_getForceContribution",value:function(c,f){if(c.childrenCount>0){var w=c.centerOfMass.x-f.x,x=c.centerOfMass.y-f.y,_=Math.sqrt(w*w+x*x);_*c.calcSize>(this||b).thetaInversed?this._calculateForces(_,w,x,f,c):4===c.childrenCount?this._getForceContributions(c,f):c.children.data.id!=f.id&&this._calculateForces(_,w,x,f,c)}}},{key:"_calculateForces",value:function(c,f,w,x,_){0===c&&(f=c=.1),(this||b).overlapAvoidanceFactor<1&&x.shape.radius&&(c=Math.max(.1+(this||b).overlapAvoidanceFactor*x.shape.radius,c-x.shape.radius));var O=(this||b).options.gravitationalConstant*_.mass*x.options.mass/Math.pow(c,3),C=f*O,T=w*O;(this||b).physicsBody.forces[x.id].x+=C,(this||b).physicsBody.forces[x.id].y+=T}},{key:"_formBarnesHutTree",value:function(c,f){for(var b,w=f.length,x=c[f[0]].x,_=c[f[0]].y,O=c[f[0]].x,C=c[f[0]].y,T=1;T<w;T++){var S=c[f[T]],M=S.x,P=S.y;S.options.mass>0&&(M<x&&(x=M),M>O&&(O=M),P<_&&(_=P),P>C&&(C=P))}var D=Math.abs(O-x)-Math.abs(C-_);D>0?(_-=.5*D,C+=.5*D):(x+=.5*D,O-=.5*D);var I=Math.max(1e-5,Math.abs(O-x)),B=.5*I,F=.5*(x+O),z=.5*(_+C),N={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:F-B,maxX:F+B,minY:z-B,maxY:z+B},size:I,calcSize:1/I,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(N.root);for(var A=0;A<w;A++)(b=c[f[A]]).options.mass>0&&this._placeInTree(N.root,b);return N}},{key:"_updateBranchMass",value:function(c,f){var b=c.centerOfMass,w=c.mass+f.options.mass,x=1/w;b.x=b.x*c.mass+f.x*f.options.mass,b.x*=x,b.y=b.y*c.mass+f.y*f.options.mass,b.y*=x,c.mass=w;var _=Math.max(Math.max(f.height,f.radius),f.width);c.maxWidth=c.maxWidth<_?_:c.maxWidth}},{key:"_placeInTree",value:function(c,f,b){1==b&&void 0!==b||this._updateBranchMass(c,f);var w,x=c.children.NW.range;w=x.maxX>f.x?x.maxY>f.y?"NW":"SW":x.maxY>f.y?"NE":"SE",this._placeInRegion(c,f,w)}},{key:"_placeInRegion",value:function(c,f,b){var w=c.children[b];switch(w.childrenCount){case 0:w.children.data=f,w.childrenCount=1,this._updateBranchMass(w,f);break;case 1:w.children.data.x===f.x&&w.children.data.y===f.y?(f.x+=this._rng(),f.y+=this._rng()):(this._splitBranch(w),this._placeInTree(w,f));break;case 4:this._placeInTree(w,f)}}},{key:"_splitBranch",value:function(c){var f=null;1===c.childrenCount&&(f=c.children.data,c.mass=0,c.centerOfMass.x=0,c.centerOfMass.y=0),c.childrenCount=4,c.children.data=null,this._insertRegion(c,"NW"),this._insertRegion(c,"NE"),this._insertRegion(c,"SW"),this._insertRegion(c,"SE"),null!=f&&this._placeInTree(c,f)}},{key:"_insertRegion",value:function(c,f){var b,w,x,_,O=.5*c.size;switch(f){case"NW":b=c.range.minX,w=c.range.minX+O,x=c.range.minY,_=c.range.minY+O;break;case"NE":b=c.range.minX+O,w=c.range.maxX,x=c.range.minY,_=c.range.minY+O;break;case"SW":b=c.range.minX,w=c.range.minX+O,x=c.range.minY+O,_=c.range.maxY;break;case"SE":b=c.range.minX+O,w=c.range.maxX,x=c.range.minY+O,_=c.range.maxY}c.children[f]={centerOfMass:{x:0,y:0},mass:0,range:{minX:b,maxX:w,minY:x,maxY:_},size:.5*c.size,calcSize:2*c.calcSize,children:{data:null},maxWidth:0,level:c.level+1,childrenCount:0}}},{key:"_debug",value:function(c,f){void 0!==(this||b).barnesHutTree&&(c.lineWidth=1,this._drawBranch((this||b).barnesHutTree.root,c,f))}},{key:"_drawBranch",value:function(c,f,b){void 0===b&&(b="#FF0000"),4===c.childrenCount&&(this._drawBranch(c.children.NW,f),this._drawBranch(c.children.NE,f),this._drawBranch(c.children.SE,f),this._drawBranch(c.children.SW,f)),f.strokeStyle=b,f.beginPath(),f.moveTo(c.range.minX,c.range.minY),f.lineTo(c.range.maxX,c.range.minY),f.stroke(),f.beginPath(),f.moveTo(c.range.maxX,c.range.minY),f.lineTo(c.range.maxX,c.range.maxY),f.stroke(),f.beginPath(),f.moveTo(c.range.maxX,c.range.maxY),f.lineTo(c.range.minX,c.range.maxY),f.stroke(),f.beginPath(),f.moveTo(c.range.minX,c.range.maxY),f.lineTo(c.range.minX,c.range.minY),f.stroke()}}]),t}(),xO=function(){function t(c,f,w){vh(this||b,t),(this||b)._rng=Em("REPULSION SOLVER"),(this||b).body=c,(this||b).physicsBody=f,this.setOptions(w)}return wu(t,[{key:"setOptions",value:function(c){(this||b).options=c}},{key:"solve",value:function(){for(var c,f,w,x,_,O,C,T,S=(this||b).body.nodes,M=(this||b).physicsBody.physicsNodeIndices,P=(this||b).physicsBody.forces,D=(this||b).options.nodeDistance,I=-2/3/D,B=0;B<M.length-1;B++){C=S[M[B]];for(var F=B+1;F<M.length;F++)c=(T=S[M[F]]).x-C.x,f=T.y-C.y,0===(w=Math.sqrt(c*c+f*f))&&(c=w=.1*this._rng()),w<2*D&&(O=w<.5*D?1:I*w+1.3333333333333333,x=c*(O/=w),_=f*O,P[C.id].x-=x,P[C.id].y-=_,P[T.id].x+=x,P[T.id].y+=_)}}}]),t}(),_O=function(){function t(c,f,w){vh(this||b,t),(this||b).body=c,(this||b).physicsBody=f,this.setOptions(w)}return wu(t,[{key:"setOptions",value:function(c){(this||b).options=c,(this||b).overlapAvoidanceFactor=Math.max(0,Math.min(1,(this||b).options.avoidOverlap||0))}},{key:"solve",value:function(){for(var c=(this||b).body.nodes,f=(this||b).physicsBody.physicsNodeIndices,w=(this||b).physicsBody.forces,x=(this||b).options.nodeDistance,_=0;_<f.length-1;_++)for(var O=c[f[_]],C=_+1;C<f.length;C++){var T=c[f[C]];if(O.level===T.level){var S=x+(this||b).overlapAvoidanceFactor*((O.shape.radius||0)/2+(T.shape.radius||0)/2),M=T.x-O.x,P=T.y-O.y,D=Math.sqrt(M*M+P*P),I=void 0;I=D<S?-Math.pow(.05*D,2)+Math.pow(.05*S,2):0,0!==D&&(I/=D);var B=M*I,F=P*I;w[O.id].x-=B,w[O.id].y-=F,w[T.id].x+=B,w[T.id].y+=F}}}}]),t}(),CO=function(){function t(c,f,w){vh(this||b,t),(this||b).body=c,(this||b).physicsBody=f,this.setOptions(w)}return wu(t,[{key:"setOptions",value:function(c){(this||b).options=c}},{key:"solve",value:function(){for(var c,f,w,x,_,O=(this||b).physicsBody.physicsEdgeIndices,C=(this||b).body.edges,T=0;T<O.length;T++)!0===(f=C[O[T]]).connected&&f.toId!==f.fromId&&void 0!==(this||b).body.nodes[f.toId]&&void 0!==(this||b).body.nodes[f.fromId]&&(void 0!==f.edgeType.via?(c=void 0===f.options.length?(this||b).options.springLength:f.options.length,w=f.to,x=f.edgeType.via,_=f.from,this._calculateSpringForce(w,x,.5*c),this._calculateSpringForce(x,_,.5*c)):(c=void 0===f.options.length?1.5*(this||b).options.springLength:f.options.length,this._calculateSpringForce(f.from,f.to,c)))}},{key:"_calculateSpringForce",value:function(c,f,w){var x=c.x-f.x,_=c.y-f.y,O=Math.max(Math.sqrt(x*x+_*_),.01),C=(this||b).options.springConstant*(w-O)/O,T=x*C,S=_*C;void 0!==(this||b).physicsBody.forces[c.id]&&((this||b).physicsBody.forces[c.id].x+=T,(this||b).physicsBody.forces[c.id].y+=S),void 0!==(this||b).physicsBody.forces[f.id]&&((this||b).physicsBody.forces[f.id].x-=T,(this||b).physicsBody.forces[f.id].y-=S)}}]),t}(),SO=function(){function t(c,f,w){vh(this||b,t),(this||b).body=c,(this||b).physicsBody=f,this.setOptions(w)}return wu(t,[{key:"setOptions",value:function(c){(this||b).options=c}},{key:"solve",value:function(){for(var c,f,w,x,_,O,C,T,S,M,P=(this||b).body.edges,D=.5,I=(this||b).physicsBody.physicsEdgeIndices,B=(this||b).physicsBody.physicsNodeIndices,F=(this||b).physicsBody.forces,z=0;z<B.length;z++){var N=B[z];F[N].springFx=0,F[N].springFy=0}for(var A=0;A<I.length;A++)!0===(f=P[I[A]]).connected&&(c=void 0===f.options.length?(this||b).options.springLength:f.options.length,w=f.from.x-f.to.x,x=f.from.y-f.to.y,T=0===(T=Math.sqrt(w*w+x*x))?.01:T,_=w*(C=(this||b).options.springConstant*(c-T)/T),O=x*C,f.to.level!=f.from.level?(void 0!==F[f.toId]&&(F[f.toId].springFx-=_,F[f.toId].springFy-=O),void 0!==F[f.fromId]&&(F[f.fromId].springFx+=_,F[f.fromId].springFy+=O)):(void 0!==F[f.toId]&&(F[f.toId].x-=D*_,F[f.toId].y-=D*O),void 0!==F[f.fromId]&&(F[f.fromId].x+=D*_,F[f.fromId].y+=D*O)));C=1;for(var R=0;R<B.length;R++){var j=B[R];S=Math.min(C,Math.max(-C,F[j].springFx)),M=Math.min(C,Math.max(-C,F[j].springFy)),F[j].x+=S,F[j].y+=M}for(var H=0,W=0,V=0;V<B.length;V++){var q=B[V];H+=F[q].x,W+=F[q].y}for(var U=H/B.length,X=W/B.length,K=0;K<B.length;K++){var Z=B[K];F[Z].x-=U,F[Z].y-=X}}}]),t}(),MO=function(){function t(c,f,w){vh(this||b,t),(this||b).body=c,(this||b).physicsBody=f,this.setOptions(w)}return wu(t,[{key:"setOptions",value:function(c){(this||b).options=c}},{key:"solve",value:function(){for(var c,f,w,x,_=(this||b).body.nodes,O=(this||b).physicsBody.physicsNodeIndices,C=(this||b).physicsBody.forces,T=0;T<O.length;T++)c=-(x=_[O[T]]).x,f=-x.y,w=Math.sqrt(c*c+f*f),this._calculateForces(w,c,f,C,x)}},{key:"_calculateForces",value:function(c,f,w,x,_){var O=0===c?0:(this||b).options.centralGravity/c;x[_.id].x=f*O,x[_.id].y=w*O}}]),t}();function aO(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var IO=function(c){cx(i,c);var f=aO(i);function i(c,w,x){var _;return vh(this||b,i),(_=f.call(this||b,c,w,x))._rng=Em("FORCE ATLAS 2 BASED REPULSION SOLVER"),_}return wu(i,[{key:"_calculateForces",value:function(c,f,w,x,_){0===c&&(f=c=.1*this._rng()),(this||b).overlapAvoidanceFactor<1&&x.shape.radius&&(c=Math.max(.1+(this||b).overlapAvoidanceFactor*x.shape.radius,c-x.shape.radius));var O=x.edges.length+1,C=(this||b).options.gravitationalConstant*_.mass*x.options.mass*O/Math.pow(c,2),T=f*C,S=w*C;(this||b).physicsBody.forces[x.id].x+=T,(this||b).physicsBody.forces[x.id].y+=S}}]),i}(kO);function dO(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var BO=function(c){cx(i,c);var f=dO(i);function i(c,w,x){return vh(this||b,i),f.call(this||b,c,w,x)}return wu(i,[{key:"_calculateForces",value:function(c,f,w,x,_){if(c>0){var O=_.edges.length+1,C=(this||b).options.centralGravity*O*_.options.mass;x[_.id].x=f*C,x[_.id].y=w*C}}}]),i}(MO),FO=function(){function t(c){vh(this||b,t),(this||b).body=c,(this||b).physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},(this||b).physicsEnabled=!0,(this||b).simulationInterval=1e3/60,(this||b).requiresTimeout=!0,(this||b).previousStates={},(this||b).referenceState={},(this||b).freezeCache={},(this||b).renderTimer=void 0,(this||b).adaptiveTimestep=!1,(this||b).adaptiveTimestepEnabled=!1,(this||b).adaptiveCounter=0,(this||b).adaptiveInterval=3,(this||b).stabilized=!1,(this||b).startedStabilization=!1,(this||b).stabilizationIterations=0,(this||b).ready=!1,(this||b).options={},(this||b).defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},No((this||b).options,(this||b).defaultOptions),(this||b).timestep=.5,(this||b).layoutFailed=!1,this.bindEventListeners()}return wu(t,[{key:"bindEventListeners",value:function(){var c=this||b;(this||b).body.emitter.on("initPhysics",(function(){c.initPhysics()})),(this||b).body.emitter.on("_layoutFailed",(function(){c.layoutFailed=!0})),(this||b).body.emitter.on("resetPhysics",(function(){c.stopSimulation(),c.ready=!1})),(this||b).body.emitter.on("disablePhysics",(function(){c.physicsEnabled=!1,c.stopSimulation()})),(this||b).body.emitter.on("restorePhysics",(function(){c.setOptions(c.options),!0===c.ready&&c.startSimulation()})),(this||b).body.emitter.on("startSimulation",(function(){!0===c.ready&&c.startSimulation()})),(this||b).body.emitter.on("stopSimulation",(function(){c.stopSimulation()})),(this||b).body.emitter.on("destroy",(function(){c.stopSimulation(!1),c.body.emitter.off()})),(this||b).body.emitter.on("_dataChanged",(function(){c.updatePhysicsData()}))}},{key:"setOptions",value:function(c){if(void 0!==c)if(!1===c)(this||b).options.enabled=!1,(this||b).physicsEnabled=!1,this.stopSimulation();else if(!0===c)(this||b).options.enabled=!0,(this||b).physicsEnabled=!0,this.startSimulation();else{(this||b).physicsEnabled=!0,Am(["stabilization"],(this||b).options,c),Qm((this||b).options,c,"stabilization"),void 0===c.enabled&&((this||b).options.enabled=!0),!1===(this||b).options.enabled&&((this||b).physicsEnabled=!1,this.stopSimulation());var f=(this||b).options.wind;f&&(("number"!=typeof f.x||Hk(f.x))&&(f.x=0),("number"!=typeof f.y||Hk(f.y))&&(f.y=0)),(this||b).timestep=(this||b).options.timestep}this.init()}},{key:"init",value:function(){var c;"forceAtlas2Based"===(this||b).options.solver?(c=(this||b).options.forceAtlas2Based,(this||b).nodesSolver=new IO((this||b).body,(this||b).physicsBody,c),(this||b).edgesSolver=new CO((this||b).body,(this||b).physicsBody,c),(this||b).gravitySolver=new BO((this||b).body,(this||b).physicsBody,c)):"repulsion"===(this||b).options.solver?(c=(this||b).options.repulsion,(this||b).nodesSolver=new xO((this||b).body,(this||b).physicsBody,c),(this||b).edgesSolver=new CO((this||b).body,(this||b).physicsBody,c),(this||b).gravitySolver=new MO((this||b).body,(this||b).physicsBody,c)):"hierarchicalRepulsion"===(this||b).options.solver?(c=(this||b).options.hierarchicalRepulsion,(this||b).nodesSolver=new _O((this||b).body,(this||b).physicsBody,c),(this||b).edgesSolver=new SO((this||b).body,(this||b).physicsBody,c),(this||b).gravitySolver=new MO((this||b).body,(this||b).physicsBody,c)):(c=(this||b).options.barnesHut,(this||b).nodesSolver=new kO((this||b).body,(this||b).physicsBody,c),(this||b).edgesSolver=new CO((this||b).body,(this||b).physicsBody,c),(this||b).gravitySolver=new MO((this||b).body,(this||b).physicsBody,c)),(this||b).modelOptions=c}},{key:"initPhysics",value:function(){!0===(this||b).physicsEnabled&&!0===(this||b).options.enabled?!0===(this||b).options.stabilization.enabled?this.stabilize():((this||b).stabilized=!1,(this||b).ready=!0,(this||b).body.emitter.emit("fit",{},(this||b).layoutFailed),this.startSimulation()):((this||b).ready=!0,(this||b).body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){var c;!0===(this||b).physicsEnabled&&!0===(this||b).options.enabled?((this||b).stabilized=!1,(this||b).adaptiveTimestep=!1,(this||b).body.emitter.emit("_resizeNodes"),void 0===(this||b).viewFunction&&((this||b).viewFunction=dn(c=(this||b).simulationStep).call(c,this||b),(this||b).body.emitter.on("initRedraw",(this||b).viewFunction),(this||b).body.emitter.emit("_startRendering"))):(this||b).body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(this||b).stabilized=!0,!0===c&&this._emitStabilized(),void 0!==(this||b).viewFunction&&((this||b).body.emitter.off("initRedraw",(this||b).viewFunction),(this||b).viewFunction=void 0,!0===c&&(this||b).body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var c=ip();this.physicsTick(),(ip()-c<.4*(this||b).simulationInterval||!0===(this||b).runDoubleSpeed)&&!1===(this||b).stabilized&&(this.physicsTick(),(this||b).runDoubleSpeed=!0),!0===(this||b).stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var c=this||b,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(this||b).stabilizationIterations;((this||b).stabilizationIterations>1||!0===(this||b).startedStabilization)&&zg((function(){c.body.emitter.emit("stabilized",{iterations:f}),c.startedStabilization=!1,c.stabilizationIterations=0}),0)}},{key:"physicsStep",value:function(){(this||b).gravitySolver.solve(),(this||b).nodesSolver.solve(),(this||b).edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?(this||b).timestep=1.2*(this||b).timestep:(this||b).timestep/1.2<(this||b).options.timestep?(this||b).timestep=(this||b).options.timestep:((this||b).adaptiveCounter=-1,(this||b).timestep=Math.max((this||b).options.timestep,(this||b).timestep/1.2))}},{key:"physicsTick",value:function(){if(this._startStabilizing(),!0!==(this||b).stabilized){!0===(this||b).adaptiveTimestep&&!0===(this||b).adaptiveTimestepEnabled?((this||b).adaptiveCounter%(this||b).adaptiveInterval==0?((this||b).timestep=2*(this||b).timestep,this.physicsStep(),this.revert(),(this||b).timestep=.5*(this||b).timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),(this||b).adaptiveCounter+=1):((this||b).timestep=(this||b).options.timestep,this.physicsStep());!0===(this||b).stabilized&&this.revert(),(this||b).stabilizationIterations++}}},{key:"updatePhysicsData",value:function(){(this||b).physicsBody.forces={},(this||b).physicsBody.physicsNodeIndices=[],(this||b).physicsBody.physicsEdgeIndices=[];var c=(this||b).body.nodes,f=(this||b).body.edges;for(var w in c)Object.prototype.hasOwnProperty.call(c,w)&&!0===c[w].options.physics&&(this||b).physicsBody.physicsNodeIndices.push(c[w].id);for(var x in f)Object.prototype.hasOwnProperty.call(f,x)&&!0===f[x].options.physics&&(this||b).physicsBody.physicsEdgeIndices.push(f[x].id);for(var _=0;_<(this||b).physicsBody.physicsNodeIndices.length;_++){var O=(this||b).physicsBody.physicsNodeIndices[_];(this||b).physicsBody.forces[O]={x:0,y:0},void 0===(this||b).physicsBody.velocities[O]&&((this||b).physicsBody.velocities[O]={x:0,y:0})}for(var C in(this||b).physicsBody.velocities)void 0===c[C]&&delete(this||b).physicsBody.velocities[C]}},{key:"revert",value:function(){var c=$f((this||b).previousStates),f=(this||b).body.nodes,w=(this||b).physicsBody.velocities;(this||b).referenceState={};for(var x=0;x<c.length;x++){var _=c[x];void 0!==f[_]?!0===f[_].options.physics&&((this||b).referenceState[_]={positions:{x:f[_].x,y:f[_].y}},w[_].x=(this||b).previousStates[_].vx,w[_].y=(this||b).previousStates[_].vy,f[_].x=(this||b).previousStates[_].x,f[_].y=(this||b).previousStates[_].y):delete(this||b).previousStates[_]}}},{key:"_evaluateStepQuality",value:function(){var c,f,w=(this||b).body.nodes,x=(this||b).referenceState;for(var _ in(this||b).referenceState)if(Object.prototype.hasOwnProperty.call((this||b).referenceState,_)&&void 0!==w[_]&&(c=w[_].x-x[_].positions.x,f=w[_].y-x[_].positions.y,Math.sqrt(Math.pow(c,2)+Math.pow(f,2))>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var c=(this||b).physicsBody.physicsNodeIndices,f=0,w=0,x=0;x<c.length;x++){var _=c[x],O=this._performStep(_);f=Math.max(f,O),w+=O}(this||b).adaptiveTimestepEnabled=w/c.length<5,(this||b).stabilized=f<(this||b).options.minVelocity}},{key:"calculateComponentVelocity",value:function(c,f,w){c+=(f-(this||b).modelOptions.damping*c)/w*(this||b).timestep;var x=(this||b).options.maxVelocity||1e9;return Math.abs(c)>x&&(c=c>0?x:-x),c}},{key:"_performStep",value:function(c){var f=(this||b).body.nodes[c],w=(this||b).physicsBody.forces[c];(this||b).options.wind&&(w.x+=(this||b).options.wind.x,w.y+=(this||b).options.wind.y);var x=(this||b).physicsBody.velocities[c];return(this||b).previousStates[c]={x:f.x,y:f.y,vx:x.x,vy:x.y},!1===f.options.fixed.x?(x.x=this.calculateComponentVelocity(x.x,w.x,f.options.mass),f.x+=x.x*(this||b).timestep):(w.x=0,x.x=0),!1===f.options.fixed.y?(x.y=this.calculateComponentVelocity(x.y,w.y,f.options.mass),f.y+=x.y*(this||b).timestep):(w.y=0,x.y=0),Math.sqrt(Math.pow(x.x,2)+Math.pow(x.y,2))}},{key:"_freezeNodes",value:function(){var c=(this||b).body.nodes;for(var f in c)if(Object.prototype.hasOwnProperty.call(c,f)&&c[f].x&&c[f].y){var w=c[f].options.fixed;(this||b).freezeCache[f]={x:w.x,y:w.y},w.x=!0,w.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var c=(this||b).body.nodes;for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&void 0!==(this||b).freezeCache[f]&&(c[f].options.fixed.x=(this||b).freezeCache[f].x,c[f].options.fixed.y=(this||b).freezeCache[f].y);(this||b).freezeCache={}}},{key:"stabilize",value:function(){var c=this||b,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(this||b).options.stabilization.iterations;"number"!=typeof f&&(f=(this||b).options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",f)),0!==(this||b).physicsBody.physicsNodeIndices.length?((this||b).adaptiveTimestep=(this||b).options.adaptiveTimestep,(this||b).body.emitter.emit("_resizeNodes"),this.stopSimulation(),(this||b).stabilized=!1,(this||b).body.emitter.emit("_blockRedraw"),(this||b).targetIterations=f,!0===(this||b).options.stabilization.onlyDynamicEdges&&this._freezeNodes(),(this||b).stabilizationIterations=0,zg((function(){return c._stabilizationBatch()}),0)):(this||b).ready=!0}},{key:"_startStabilizing",value:function(){return!0!==(this||b).startedStabilization&&((this||b).body.emitter.emit("startStabilizing"),(this||b).startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var c=this||b,e=function(){return!1===c.stabilized&&c.stabilizationIterations<c.targetIterations},i=function(){c.body.emitter.emit("stabilizationProgress",{iterations:c.stabilizationIterations,total:c.targetIterations})};this._startStabilizing()&&i();for(var f,w=0;e()&&w<(this||b).options.stabilization.updateInterval;)this.physicsTick(),w++;i(),e()?zg(dn(f=(this||b)._stabilizationBatch).call(f,this||b),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){(this||b).body.emitter.emit("_allowRedraw"),!0===(this||b).options.stabilization.fit&&(this||b).body.emitter.emit("fit"),!0===(this||b).options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),(this||b).body.emitter.emit("stabilizationIterationsDone"),(this||b).body.emitter.emit("_requestRedraw"),!0===(this||b).stabilized?this._emitStabilized():this.startSimulation(),(this||b).ready=!0}},{key:"_drawForces",value:function(c){for(var f=0;f<(this||b).physicsBody.physicsNodeIndices.length;f++){var w=(this||b).physicsBody.physicsNodeIndices[f],x=(this||b).body.nodes[w],_=(this||b).physicsBody.forces[w],O=Math.sqrt(Math.pow(_.x,2)+Math.pow(_.x,2)),C=Math.min(Math.max(5,O),15),T=3*C,S=Km((180-180*Math.min(1,Math.max(0,.03*O)))/360,1,1),M={x:x.x+20*_.x,y:x.y+20*_.y};c.lineWidth=C,c.strokeStyle=S,c.beginPath(),c.moveTo(x.x,x.y),c.lineTo(M.x,M.y),c.stroke();var P=Math.atan2(_.y,_.x);c.fillStyle=S,sO.draw(c,{type:"arrow",point:M,angle:P,length:T}),Ug(c).call(c)}}}]),t}();let zO;const NO=new Uint8Array(16);function pO(){if(!zO&&(zO="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zO))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zO(NO)}const AO=[];for(let c=0;c<256;++c)AO.push((c+256).toString(16).slice(1));var RO={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function yO(c,f,b){if(RO.randomUUID&&!f&&!c)return RO.randomUUID();const w=(c=c||{}).random||(c.rng||pO)();if(w[6]=15&w[6]|64,w[8]=63&w[8]|128,f){b=b||0;for(let c=0;c<16;++c)f[b+c]=w[c];return f}return function(c,f=0){return AO[c[f+0]]+AO[c[f+1]]+AO[c[f+2]]+AO[c[f+3]]+"-"+AO[c[f+4]]+AO[c[f+5]]+"-"+AO[c[f+6]]+AO[c[f+7]]+"-"+AO[c[f+8]]+AO[c[f+9]]+"-"+AO[c[f+10]]+AO[c[f+11]]+AO[c[f+12]]+AO[c[f+13]]+AO[c[f+14]]+AO[c[f+15]]}(w)}var jO=function(){function t(){vh(this||b,t)}return wu(t,null,[{key:"getRange",value:function(c){var f,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],w=1e9,x=-1e9,_=1e9,O=-1e9;if(b.length>0)for(var C=0;C<b.length;C++)_>(f=c[b[C]]).shape.boundingBox.left&&(_=f.shape.boundingBox.left),O<f.shape.boundingBox.right&&(O=f.shape.boundingBox.right),w>f.shape.boundingBox.top&&(w=f.shape.boundingBox.top),x<f.shape.boundingBox.bottom&&(x=f.shape.boundingBox.bottom);return 1e9===_&&-1e9===O&&1e9===w&&-1e9===x&&(w=0,x=0,_=0,O=0),{minX:_,maxX:O,minY:w,maxY:x}}},{key:"getRangeCore",value:function(c){var f,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],w=1e9,x=-1e9,_=1e9,O=-1e9;if(b.length>0)for(var C=0;C<b.length;C++)_>(f=c[b[C]]).x&&(_=f.x),O<f.x&&(O=f.x),w>f.y&&(w=f.y),x<f.y&&(x=f.y);return 1e9===_&&-1e9===O&&1e9===w&&-1e9===x&&(w=0,x=0,_=0,O=0),{minX:_,maxX:O,minY:w,maxY:x}}},{key:"findCenter",value:function(c){return{x:.5*(c.maxX+c.minX),y:.5*(c.maxY+c.minY)}}},{key:"cloneOptions",value:function(c,f){var b={};return void 0===f||"node"===f?(Rm(b,c.options,!0),b.x=c.x,b.y=c.y,b.amountOfConnections=c.edges.length):Rm(b,c.options,!0),b}}]),t}();function bO(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var LO=function(c){cx(i,c);var f=bO(i);function i(c,w,x,_,O,C){var T;return vh(this||b,i),(T=f.call(this||b,c,w,x,_,O,C)).isCluster=!0,T.containedNodes={},T.containedEdges={},T}return wu(i,[{key:"_openChildCluster",value:function(c){var f=this||b,w=(this||b).body.nodes[c];if(void 0===(this||b).containedNodes[c])throw new Error("node with id: "+c+" not in current cluster");if(!w.isCluster)throw new Error("node with id: "+c+" is not a cluster");delete(this||b).containedNodes[c],Hm(w.edges,(function(c){delete f.containedEdges[c.id]})),Hm(w.containedNodes,(function(c,b){f.containedNodes[b]=c})),w.containedNodes={},Hm(w.containedEdges,(function(c,b){f.containedEdges[b]=c})),w.containedEdges={},Hm(w.edges,(function(c){Hm(f.edges,(function(b){var w,x,_=ag(w=b.clusteringEdgeReplacingIds).call(w,c.id);-1!==_&&(Hm(c.clusteringEdgeReplacingIds,(function(c){b.clusteringEdgeReplacingIds.push(c),f.body.edges[c].edgeReplacedById=b.id})),Kp(x=b.clusteringEdgeReplacingIds).call(x,_,1))}))})),w.edges=[]}}]),i}(xE),HO=function(){function t(c){var f=this||b;vh(this||b,t),(this||b).body=c,(this||b).clusteredNodes={},(this||b).clusteredEdges={},(this||b).options={},(this||b).defaultOptions={},No((this||b).options,(this||b).defaultOptions),(this||b).body.emitter.on("_resetData",(function(){f.clusteredNodes={},f.clusteredEdges={}}))}return wu(t,[{key:"clusterByHubsize",value:function(c,f){void 0===c?c=this._getHubSize():"object"===gu(c)&&(f=this._checkOptions(c),c=this._getHubSize());for(var w=[],x=0;x<(this||b).body.nodeIndices.length;x++){var _=(this||b).body.nodes[(this||b).body.nodeIndices[x]];_.edges.length>=c&&w.push(_.id)}for(var O=0;O<w.length;O++)this.clusterByConnection(w[O],f,!0);(this||b).body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var c=this||b,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},w=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===f.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");f=this._checkOptions(f);var x={},_={};Hm((this||b).body.nodes,(function(b,w){b.options&&!0===f.joinCondition(b.options)&&(x[w]=b,Hm(b.edges,(function(f){void 0===c.clusteredEdges[f.id]&&(_[f.id]=f)})))})),this._cluster(x,_,f,w)}},{key:"clusterByEdgeCount",value:function(c,f){var w=this||b,x=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];f=this._checkOptions(f);for(var _,O,C,T=[],S={},d=function(){var b={},x={},P=w.body.nodeIndices[M],D=w.body.nodes[P];if(void 0===S[P]){C=0,O=[];for(var I=0;I<D.edges.length;I++)_=D.edges[I],void 0===w.clusteredEdges[_.id]&&(_.toId!==_.fromId&&C++,O.push(_));if(C===c){for(var p=function(c){if(void 0===f.joinCondition||null===f.joinCondition)return!0;var b=jO.cloneOptions(c);return f.joinCondition(b)},B=!0,F=0;F<O.length;F++){_=O[F];var z=w._getConnectedId(_,P);if(!p(D)){B=!1;break}x[_.id]=_,b[P]=D,b[z]=w.body.nodes[z],S[P]=!0}if($f(b).length>0&&$f(x).length>0&&!0===B){var N=function(){for(var c=0;c<T.length;++c)for(var f in b)if(void 0!==T[c].nodes[f])return T[c]}();if(void 0!==N){for(var A in b)void 0===N.nodes[A]&&(N.nodes[A]=b[A]);for(var R in x)void 0===N.edges[R]&&(N.edges[R]=x[R])}else T.push({nodes:b,edges:x})}}}},M=0;M<(this||b).body.nodeIndices.length;M++)d();for(var P=0;P<T.length;P++)this._cluster(T[P].nodes,T[P].edges,f,!1);!0===x&&(this||b).body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(c){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,c,f)}},{key:"clusterBridges",value:function(c){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,c,f)}},{key:"clusterByConnection",value:function(c,f){var w,x=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===c)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===(this||b).body.nodes[c])throw new Error("The nodeId given to clusterByConnection does not exist!");var _=(this||b).body.nodes[c];void 0===(f=this._checkOptions(f,_)).clusterNodeProperties.x&&(f.clusterNodeProperties.x=_.x),void 0===f.clusterNodeProperties.y&&(f.clusterNodeProperties.y=_.y),void 0===f.clusterNodeProperties.fixed&&(f.clusterNodeProperties.fixed={},f.clusterNodeProperties.fixed.x=_.options.fixed.x,f.clusterNodeProperties.fixed.y=_.options.fixed.y);var O={},C={},T=_.id,S=jO.cloneOptions(_);O[T]=_;for(var M=0;M<_.edges.length;M++){var P=_.edges[M];if(void 0===(this||b).clusteredEdges[P.id]){var D=this._getConnectedId(P,T);if(void 0===(this||b).clusteredNodes[D])if(D!==T)if(void 0===f.joinCondition)C[P.id]=P,O[D]=(this||b).body.nodes[D];else{var I=jO.cloneOptions((this||b).body.nodes[D]);!0===f.joinCondition(S,I)&&(C[P.id]=P,O[D]=(this||b).body.nodes[D])}else C[P.id]=P}}var B=Kf(w=$f(O)).call(w,(function(c){return O[c].id}));for(var F in O)if(Object.prototype.hasOwnProperty.call(O,F))for(var z=O[F],N=0;N<z.edges.length;N++){var A=z.edges[N];ag(B).call(B,this._getConnectedId(A,z.id))>-1&&(C[A.id]=A)}this._cluster(O,C,f,x)}},{key:"_createClusterEdges",value:function(c,f,w,x){for(var _,O,C,T,S,M,P=$f(c),D=[],I=0;I<P.length;I++){C=c[O=P[I]];for(var B=0;B<C.edges.length;B++)_=C.edges[B],void 0===(this||b).clusteredEdges[_.id]&&(_.toId==_.fromId?f[_.id]=_:_.toId==O?(T=w.id,M=S=_.fromId):(T=_.toId,S=w.id,M=T),void 0===c[M]&&D.push({edge:_,fromId:S,toId:T}))}for(var F=[],v=function(c){for(var f=0;f<F.length;f++){var b=F[f],w=c.fromId===b.fromId&&c.toId===b.toId,x=c.fromId===b.toId&&c.toId===b.fromId;if(w||x)return b}return null},z=0;z<D.length;z++){var N=D[z],A=N.edge,R=v(N);null===R?(R=this._createClusteredEdge(N.fromId,N.toId,A,x),F.push(R)):R.clusteringEdgeReplacingIds.push(A.id),(this||b).body.edges[A.id].edgeReplacedById=R.id,this._backupEdgeOptions(A),A.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===c.clusterEdgeProperties&&(c.clusterEdgeProperties={}),void 0===c.clusterNodeProperties&&(c.clusterNodeProperties={}),c}},{key:"_cluster",value:function(c,f,w){var x=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=[];for(var O in c)Object.prototype.hasOwnProperty.call(c,O)&&void 0!==(this||b).clusteredNodes[O]&&_.push(O);for(var C=0;C<_.length;++C)delete c[_[C]];if(0!=$f(c).length&&(1!=$f(c).length||1==w.clusterNodeProperties.allowSingleNodeCluster)){var T=Rm({},w.clusterNodeProperties);if(void 0!==w.processProperties){var S=[];for(var M in c)if(Object.prototype.hasOwnProperty.call(c,M)){var P=jO.cloneOptions(c[M]);S.push(P)}var D=[];for(var I in f)if(Object.prototype.hasOwnProperty.call(f,I)&&"clusterEdge:"!==I.substr(0,12)){var B=jO.cloneOptions(f[I],"edge");D.push(B)}if(!(T=w.processProperties(T,S,D)))throw new Error("The processProperties function does not return properties!")}void 0===T.id&&(T.id="cluster:"+yO());var F=T.id;void 0===T.label&&(T.label="cluster");var z=void 0;void 0===T.x&&(z=this._getClusterPosition(c),T.x=z.x),void 0===T.y&&(void 0===z&&(z=this._getClusterPosition(c)),T.y=z.y),T.id=F;var N=(this||b).body.functions.createNode(T,LO);N.containedNodes=c,N.containedEdges=f,N.clusterEdgeProperties=w.clusterEdgeProperties,(this||b).body.nodes[T.id]=N,this._clusterEdges(c,f,T,w.clusterEdgeProperties),T.id=void 0,!0===x&&(this||b).body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(c){void 0===(this||b).clusteredEdges[c.id]&&((this||b).clusteredEdges[c.id]={physics:c.options.physics})}},{key:"_restoreEdge",value:function(c){var f=(this||b).clusteredEdges[c.id];void 0!==f&&(c.setOptions({physics:f.physics}),delete(this||b).clusteredEdges[c.id])}},{key:"isCluster",value:function(c){return void 0!==(this||b).body.nodes[c]?!0===(this||b).body.nodes[c].isCluster:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(c){for(var f,b=$f(c),w=c[b[0]].x,x=c[b[0]].x,_=c[b[0]].y,O=c[b[0]].y,C=1;C<b.length;C++)w=(f=c[b[C]]).x<w?f.x:w,x=f.x>x?f.x:x,_=f.y<_?f.y:_,O=f.y>O?f.y:O;return{x:.5*(w+x),y:.5*(_+O)}}},{key:"openCluster",value:function(c,f){var w=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===c)throw new Error("No clusterNodeId supplied to openCluster.");var x=(this||b).body.nodes[c];if(void 0===x)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==x.isCluster||void 0===x.containedNodes||void 0===x.containedEdges)throw new Error("The node:"+c+" is not a valid cluster.");var _=this.findNode(c),O=ag(_).call(_,c)-1;if(O>=0){var C=_[O];return(this||b).body.nodes[C]._openChildCluster(c),delete(this||b).body.nodes[c],void(!0===w&&(this||b).body.emitter.emit("_dataChanged"))}var T=x.containedNodes,S=x.containedEdges;if(void 0!==f&&void 0!==f.releaseFunction&&"function"==typeof f.releaseFunction){var M={},P={x:x.x,y:x.y};for(var D in T)if(Object.prototype.hasOwnProperty.call(T,D)){var I=(this||b).body.nodes[D];M[D]={x:I.x,y:I.y}}var B=f.releaseFunction(P,M);for(var F in T)if(Object.prototype.hasOwnProperty.call(T,F)){var z=(this||b).body.nodes[F];void 0!==B[F]&&(z.x=void 0===B[F].x?x.x:B[F].x,z.y=void 0===B[F].y?x.y:B[F].y)}}else Hm(T,(function(c){!1===c.options.fixed.x&&(c.x=x.x),!1===c.options.fixed.y&&(c.y=x.y)}));for(var N in T)if(Object.prototype.hasOwnProperty.call(T,N)){var A=(this||b).body.nodes[N];A.vx=x.vx,A.vy=x.vy,A.setOptions({physics:!0}),delete(this||b).clusteredNodes[N]}for(var R=[],j=0;j<x.edges.length;j++)R.push(x.edges[j]);for(var H=0;H<R.length;H++){for(var W=R[H],V=this._getConnectedId(W,c),q=(this||b).clusteredNodes[V],U=0;U<W.clusteringEdgeReplacingIds.length;U++){var X=W.clusteringEdgeReplacingIds[U],K=(this||b).body.edges[X];if(void 0!==K)if(void 0!==q){var Z=(this||b).body.nodes[q.clusterId];Z.containedEdges[K.id]=K,delete S[K.id];var $=K.fromId,J=K.toId;K.toId==V?J=q.clusterId:$=q.clusterId,this._createClusteredEdge($,J,K,Z.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(K)}W.remove()}for(var tt in S)Object.prototype.hasOwnProperty.call(S,tt)&&this._restoreEdge(S[tt]);delete(this||b).body.nodes[c],!0===w&&(this||b).body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(c){var f=[];if(!0===this.isCluster(c)){var w=(this||b).body.nodes[c].containedNodes;for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&f.push((this||b).body.nodes[x].id)}return f}},{key:"findNode",value:function(c){for(var f,w=[],x=0;void 0!==(this||b).clusteredNodes[c]&&x<100;){if(void 0===(f=(this||b).body.nodes[c]))return[];w.push(f.id),c=(this||b).clusteredNodes[c].clusterId,x++}return void 0===(f=(this||b).body.nodes[c])?[]:(w.push(f.id),Ep(w).call(w),w)}},{key:"updateClusteredNode",value:function(c,f){if(void 0===c)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===f)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===(this||b).body.nodes[c])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");(this||b).body.nodes[c].setOptions(f),(this||b).body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(c,f){if(void 0===c)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===f)throw new Error("No newOptions supplied to updateEdge.");if(void 0===(this||b).body.edges[c])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var w=this.getClusteredEdges(c),x=0;x<w.length;x++)(this||b).body.edges[w[x]].setOptions(f);(this||b).body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(c){for(var f=[],w=0;void 0!==c&&void 0!==(this||b).body.edges[c]&&w<100;)f.push((this||b).body.edges[c].id),c=(this||b).body.edges[c].edgeReplacedById,w++;return Ep(f).call(f),f}},{key:"getBaseEdge",value:function(c){return this.getBaseEdges(c)[0]}},{key:"getBaseEdges",value:function(c){for(var f=[c],w=[],x=[],_=0;f.length>0&&_<100;){var O=f.pop();if(void 0!==O){var C=(this||b).body.edges[O];if(void 0!==C){_++;var T=C.clusteringEdgeReplacingIds;if(void 0===T)x.push(O);else for(var S=0;S<T.length;++S){var M=T[S];-1===ag(f).call(f,T)&&-1===ag(w).call(w,T)&&f.push(M)}w.push(O)}}}return x}},{key:"_getConnectedId",value:function(c,f){return c.toId!=f?c.toId:(c.fromId,c.fromId)}},{key:"_getHubSize",value:function(){for(var c=0,f=0,w=0,x=0,_=0;_<(this||b).body.nodeIndices.length;_++){var O=(this||b).body.nodes[(this||b).body.nodeIndices[_]];O.edges.length>x&&(x=O.edges.length),c+=O.edges.length,f+=Math.pow(O.edges.length,2),w+=1}c/=w;var C=(f/=w)-Math.pow(c,2),T=Math.sqrt(C),S=Math.floor(c+2*T);return S>x&&(S=x),S}},{key:"_createClusteredEdge",value:function(c,f,w,x,_){var O=jO.cloneOptions(w,"edge");Rm(O,x),O.from=c,O.to=f,O.id="clusterEdge:"+yO(),void 0!==_&&Rm(O,_);var C=(this||b).body.functions.createEdge(O);return C.clusteringEdgeReplacingIds=[w.id],C.connect(),(this||b).body.edges[C.id]=C,C}},{key:"_clusterEdges",value:function(c,f,w,x){if(f instanceof mO){var _=f,O={};O[_.id]=_,f=O}if(c instanceof xE){var C=c,T={};T[C.id]=C,c=T}if(null==w)throw new Error("_clusterEdges: parameter clusterNode required");for(var S in void 0===x&&(x=w.clusterEdgeProperties),this._createClusterEdges(c,f,w,x),f)if(Object.prototype.hasOwnProperty.call(f,S)&&void 0!==(this||b).body.edges[S]){var M=(this||b).body.edges[S];this._backupEdgeOptions(M),M.setOptions({physics:!1})}for(var P in c)Object.prototype.hasOwnProperty.call(c,P)&&((this||b).clusteredNodes[P]={clusterId:w.id,node:(this||b).body.nodes[P]},(this||b).body.nodes[P].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(c){if(void 0!==c){var f=(this||b).clusteredNodes[c];if(void 0!==f){var w=f.clusterId;if(void 0!==w)return(this||b).body.nodes[w]}}}},{key:"_filter",value:function(c,f){var b=[];return Hm(c,(function(c){f(c)&&b.push(c)})),b}},{key:"_updateState",value:function(){var c,f=this||b,w=[],x={},n=function(c){Hm(f.body.nodes,(function(f){!0===f.isCluster&&c(f)}))};for(c in(this||b).clusteredNodes)Object.prototype.hasOwnProperty.call((this||b).clusteredNodes,c)&&void 0===(this||b).body.nodes[c]&&w.push(c);n((function(c){for(var f=0;f<w.length;f++)delete c.containedNodes[w[f]]}));for(var _=0;_<w.length;_++)delete(this||b).clusteredNodes[w[_]];Hm((this||b).clusteredEdges,(function(c){var b=f.body.edges[c];void 0!==b&&b.endPointsValid()||(x[c]=c)})),n((function(c){Hm(c.containedEdges,(function(c,f){c.endPointsValid()||x[f]||(x[f]=f)}))})),Hm((this||b).body.edges,(function(c,b){var w=!0,_=c.clusteringEdgeReplacingIds;if(void 0!==_){var O=0;Hm(_,(function(c){var b=f.body.edges[c];void 0!==b&&b.endPointsValid()&&(O+=1)})),w=O>0}c.endPointsValid()&&w||(x[b]=b)})),n((function(c){Hm(x,(function(b){delete c.containedEdges[b],Hm(c.edges,(function(w,_){w.id!==b?w.clusteringEdgeReplacingIds=f._filter(w.clusteringEdgeReplacingIds,(function(c){return!x[c]})):c.edges[_]=null})),c.edges=f._filter(c.edges,(function(c){return null!==c}))}))})),Hm(x,(function(c){delete f.clusteredEdges[c]})),Hm(x,(function(c){delete f.body.edges[c]})),Hm($f((this||b).body.edges),(function(c){var b=f.body.edges[c],w=f._isClusteredNode(b.fromId)||f._isClusteredNode(b.toId);if(w!==f._isClusteredEdge(b.id))if(w){var x=f._getClusterNodeForNode(b.fromId);void 0!==x&&f._clusterEdges(f.body.nodes[b.fromId],b,x);var _=f._getClusterNodeForNode(b.toId);void 0!==_&&f._clusterEdges(f.body.nodes[b.toId],b,_)}else delete f._clusterEdges[c],f._restoreEdge(b)}));for(var O=!1,C=!0,h=function(){var c=[];n((function(f){var b=$f(f.containedNodes).length,w=!0===f.options.allowSingleNodeCluster;(w&&b<1||!w&&b<2)&&c.push(f.id)}));for(var b=0;b<c.length;++b)f.openCluster(c[b],{},!1);C=c.length>0,O=O||C};C;)h();O&&this._updateState()}},{key:"_isClusteredNode",value:function(c){return void 0!==(this||b).clusteredNodes[c]}},{key:"_isClusteredEdge",value:function(c){return void 0!==(this||b).clusteredEdges[c]}}]),t}();var WO=function(){function t(c,f){var w;vh(this||b,t),void 0!==window&&(w=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===w?function(c){c()}:w,(this||b).body=c,(this||b).canvas=f,(this||b).redrawRequested=!1,(this||b).renderTimer=void 0,(this||b).requiresTimeout=!0,(this||b).renderingActive=!1,(this||b).renderRequests=0,(this||b).allowRedraw=!0,(this||b).dragging=!1,(this||b).zooming=!1,(this||b).options={},(this||b).defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},No((this||b).options,(this||b).defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return wu(t,[{key:"bindEventListeners",value:function(){var c,f=this||b;(this||b).body.emitter.on("dragStart",(function(){f.dragging=!0})),(this||b).body.emitter.on("dragEnd",(function(){f.dragging=!1})),(this||b).body.emitter.on("zoom",(function(){f.zooming=!0,window.clearTimeout(f.zoomTimeoutId),f.zoomTimeoutId=zg((function(){var c;f.zooming=!1,dn(c=f._requestRedraw).call(c,f)()}),250)})),(this||b).body.emitter.on("_resizeNodes",(function(){f._resizeNodes()})),(this||b).body.emitter.on("_redraw",(function(){!1===f.renderingActive&&f._redraw()})),(this||b).body.emitter.on("_blockRedraw",(function(){f.allowRedraw=!1})),(this||b).body.emitter.on("_allowRedraw",(function(){f.allowRedraw=!0,f.redrawRequested=!1})),(this||b).body.emitter.on("_requestRedraw",dn(c=(this||b)._requestRedraw).call(c,this||b)),(this||b).body.emitter.on("_startRendering",(function(){f.renderRequests+=1,f.renderingActive=!0,f._startRendering()})),(this||b).body.emitter.on("_stopRendering",(function(){f.renderRequests-=1,f.renderingActive=f.renderRequests>0,f.renderTimer=void 0})),(this||b).body.emitter.on("destroy",(function(){f.renderRequests=0,f.allowRedraw=!1,f.renderingActive=!1,!0===f.requiresTimeout?clearTimeout(f.renderTimer):window.cancelAnimationFrame(f.renderTimer),f.body.emitter.off()}))}},{key:"setOptions",value:function(c){void 0!==c&&Nm(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],(this||b).options,c)}},{key:"_requestNextFrame",value:function(c,f){if("undefined"!=typeof window){var w,x=window;return!0===(this||b).requiresTimeout?w=zg(c,f):x.requestAnimationFrame&&(w=x.requestAnimationFrame(c)),w}}},{key:"_startRendering",value:function(){var c;!0===(this||b).renderingActive&&void 0===(this||b).renderTimer&&((this||b).renderTimer=this._requestNextFrame(dn(c=(this||b)._renderStep).call(c,this||b),(this||b).simulationInterval))}},{key:"_renderStep",value:function(){!0===(this||b).renderingActive&&((this||b).renderTimer=void 0,!0===(this||b).requiresTimeout&&this._startRendering(),this._redraw(),!1===(this||b).requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){(this||b).body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var c=this||b;!0!==(this||b).redrawRequested&&!1===(this||b).renderingActive&&!0===(this||b).allowRedraw&&((this||b).redrawRequested=!0,this._requestNextFrame((function(){c._redraw(!1)}),0))}},{key:"_redraw",value:function(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===(this||b).allowRedraw){(this||b).body.emitter.emit("initRedraw"),(this||b).redrawRequested=!1;var f={drawExternalLabels:null};0!==(this||b).canvas.frame.canvas.width&&0!==(this||b).canvas.frame.canvas.height||(this||b).canvas.setSize(),(this||b).canvas.setTransform();var w=(this||b).canvas.getContext(),x=(this||b).canvas.frame.canvas.clientWidth,_=(this||b).canvas.frame.canvas.clientHeight;if(w.clearRect(0,0,x,_),0===(this||b).canvas.frame.clientWidth)return;if(w.save(),w.translate((this||b).body.view.translation.x,(this||b).body.view.translation.y),w.scale((this||b).body.view.scale,(this||b).body.view.scale),w.beginPath(),(this||b).body.emitter.emit("beforeDrawing",w),w.closePath(),!1===c&&(!1===(this||b).dragging||!0===(this||b).dragging&&!1===(this||b).options.hideEdgesOnDrag)&&(!1===(this||b).zooming||!0===(this||b).zooming&&!1===(this||b).options.hideEdgesOnZoom)&&this._drawEdges(w),!1===(this||b).dragging||!0===(this||b).dragging&&!1===(this||b).options.hideNodesOnDrag){var O=this._drawNodes(w,c).drawExternalLabels;f.drawExternalLabels=O}!1===c&&(!1===(this||b).dragging||!0===(this||b).dragging&&!1===(this||b).options.hideEdgesOnDrag)&&(!1===(this||b).zooming||!0===(this||b).zooming&&!1===(this||b).options.hideEdgesOnZoom)&&this._drawArrows(w),null!=f.drawExternalLabels&&f.drawExternalLabels(),!1===c&&this._drawSelectionBox(w),w.beginPath(),(this||b).body.emitter.emit("afterDrawing",w),w.closePath(),w.restore(),!0===c&&w.clearRect(0,0,x,_)}}},{key:"_resizeNodes",value:function(){(this||b).canvas.setTransform();var c=(this||b).canvas.getContext();c.save(),c.translate((this||b).body.view.translation.x,(this||b).body.view.translation.y),c.scale((this||b).body.view.scale,(this||b).body.view.scale);var f,w=(this||b).body.nodes;for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&((f=w[x]).resize(c),f.updateBoundingBox(c,f.selected));c.restore()}},{key:"_drawNodes",value:function(c){for(var f,w,x=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=(this||b).body.nodes,O=(this||b).body.nodeIndices,C=[],T=[],S=(this||b).canvas.DOMtoCanvas({x:-20,y:-20}),M=(this||b).canvas.DOMtoCanvas({x:(this||b).canvas.frame.canvas.clientWidth+20,y:(this||b).canvas.frame.canvas.clientHeight+20}),P={top:S.y,left:S.x,bottom:M.y,right:M.x},D=[],I=0;I<O.length;I++)if((f=_[O[I]]).hover)T.push(O[I]);else if(f.isSelected())C.push(O[I]);else if(!0===x){var B=f.draw(c);null!=B.drawExternalLabel&&D.push(B.drawExternalLabel)}else if(!0===f.isBoundingBoxOverlappingWith(P)){var F=f.draw(c);null!=F.drawExternalLabel&&D.push(F.drawExternalLabel)}else f.updateBoundingBox(c,f.selected);var z=C.length,N=T.length;for(w=0;w<z;w++){var A=(f=_[C[w]]).draw(c);null!=A.drawExternalLabel&&D.push(A.drawExternalLabel)}for(w=0;w<N;w++){var R=(f=_[T[w]]).draw(c);null!=R.drawExternalLabel&&D.push(R.drawExternalLabel)}return{drawExternalLabels:function(){for(var c=0,f=D;c<f.length;c++)(0,f[c])()}}}},{key:"_drawEdges",value:function(c){for(var f=(this||b).body.edges,w=(this||b).body.edgeIndices,x=0;x<w.length;x++){var _=f[w[x]];!0===_.connected&&_.draw(c)}}},{key:"_drawArrows",value:function(c){for(var f=(this||b).body.edges,w=(this||b).body.edgeIndices,x=0;x<w.length;x++){var _=f[w[x]];!0===_.connected&&_.drawArrows(c)}}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var c=navigator.userAgent.toLowerCase();(this||b).requiresTimeout=!1,(-1!=ag(c).call(c,"msie 9.0")||-1!=ag(c).call(c,"safari")&&ag(c).call(c,"chrome")<=-1)&&((this||b).requiresTimeout=!0)}else(this||b).requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(c){if((this||b).body.selectionBox.show){c.beginPath();var f=(this||b).body.selectionBox.position.end.x-(this||b).body.selectionBox.position.start.x,w=(this||b).body.selectionBox.position.end.y-(this||b).body.selectionBox.position.start.y;c.rect((this||b).body.selectionBox.position.start.x,(this||b).body.selectionBox.position.start.y,f,w),c.fillStyle="rgba(151, 194, 252, 0.2)",c.fillRect((this||b).body.selectionBox.position.start.x,(this||b).body.selectionBox.position.start.y,f,w),c.strokeStyle="rgba(151, 194, 252, 1)",c.stroke()}else c.closePath()}}]),t}(),VO=o(bt.setInterval);function EO(c,f){f.inputHandler=function(c){c.isFirst&&f(c)},c.on("hammer.input",f.inputHandler)}function OO(c,f){return f.inputHandler=function(c){c.isFinal&&f(c)},c.on("hammer.input",f.inputHandler)}var qO=function(){function t(c){vh(this||b,t),(this||b).body=c,(this||b).pixelRatio=1,(this||b).cameraState={},(this||b).initialized=!1,(this||b).canvasViewCenter={},(this||b)._cleanupCallbacks=[],(this||b).options={},(this||b).defaultOptions={autoResize:!0,height:"100%",width:"100%"},No((this||b).options,(this||b).defaultOptions),this.bindEventListeners()}return wu(t,[{key:"bindEventListeners",value:function(){var c,f=this||b;(this||b).body.emitter.once("resize",(function(c){0!==c.width&&(f.body.view.translation.x=.5*c.width),0!==c.height&&(f.body.view.translation.y=.5*c.height)})),(this||b).body.emitter.on("setSize",dn(c=(this||b).setSize).call(c,this||b)),(this||b).body.emitter.on("destroy",(function(){f.hammerFrame.destroy(),f.hammer.destroy(),f._cleanUp()}))}},{key:"setOptions",value:function(c){var f=this||b;void 0!==c&&Nm(["width","height","autoResize"],(this||b).options,c);if(this._cleanUp(),!0===(this||b).options.autoResize){var w;if(window.ResizeObserver){var x=new ResizeObserver((function(){!0===f.setSize()&&f.body.emitter.emit("_requestRedraw")})),_=(this||b).frame;x.observe(_),(this||b)._cleanupCallbacks.push((function(){x.unobserve(_)}))}else{var O=VO((function(){!0===f.setSize()&&f.body.emitter.emit("_requestRedraw")}),1e3);(this||b)._cleanupCallbacks.push((function(){clearInterval(O)}))}var C=dn(w=(this||b)._onResize).call(w,this||b);window.addEventListener("resize",C),(this||b)._cleanupCallbacks.push((function(){window.removeEventListener("resize",C)}))}}},{key:"_cleanUp",value:function(){var c,f,w;vp(c=Ep(f=Kp(w=(this||b)._cleanupCallbacks).call(w,0)).call(f)).call(c,(function(c){try{c()}catch(c){console.error(c)}}))}},{key:"_onResize",value:function(){this.setSize(),(this||b).body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(this||b).pixelRatio;!0===(this||b).initialized&&((this||b).cameraState.previousWidth=(this||b).frame.canvas.width/c,(this||b).cameraState.previousHeight=(this||b).frame.canvas.height/c,(this||b).cameraState.scale=(this||b).body.view.scale,(this||b).cameraState.position=this.DOMtoCanvas({x:.5*(this||b).frame.canvas.width/c,y:.5*(this||b).frame.canvas.height/c}))}},{key:"_setCameraState",value:function(){if(void 0!==(this||b).cameraState.scale&&0!==(this||b).frame.canvas.clientWidth&&0!==(this||b).frame.canvas.clientHeight&&0!==(this||b).pixelRatio&&(this||b).cameraState.previousWidth>0&&(this||b).cameraState.previousHeight>0){var c=(this||b).frame.canvas.width/(this||b).pixelRatio/(this||b).cameraState.previousWidth,f=(this||b).frame.canvas.height/(this||b).pixelRatio/(this||b).cameraState.previousHeight,w=(this||b).cameraState.scale;1!=c&&1!=f?w=.5*(this||b).cameraState.scale*(c+f):1!=c?w=(this||b).cameraState.scale*c:1!=f&&(w=(this||b).cameraState.scale*f),(this||b).body.view.scale=w;var x=this.DOMtoCanvas({x:.5*(this||b).frame.canvas.clientWidth,y:.5*(this||b).frame.canvas.clientHeight}),_={x:x.x-(this||b).cameraState.position.x,y:x.y-(this||b).cameraState.position.y};(this||b).body.view.translation.x+=_.x*(this||b).body.view.scale,(this||b).body.view.translation.y+=_.y*(this||b).body.view.scale}}},{key:"_prepareValue",value:function(c){if("number"==typeof c)return c+"px";if("string"==typeof c){if(-1!==ag(c).call(c,"%")||-1!==ag(c).call(c,"px"))return c;if(-1===ag(c).call(c,"%"))return c+"px"}throw new Error("Could not use the value supplied for width or height:"+c)}},{key:"_create",value:function(){for(;(this||b).body.container.hasChildNodes();)(this||b).body.container.removeChild((this||b).body.container.firstChild);if((this||b).frame=document.createElement("div"),(this||b).frame.className="vis-network",(this||b).frame.style.position="relative",(this||b).frame.style.overflow="hidden",(this||b).frame.tabIndex=0,(this||b).frame.canvas=document.createElement("canvas"),(this||b).frame.canvas.style.position="relative",(this||b).frame.appendChild((this||b).frame.canvas),(this||b).frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var c=document.createElement("DIV");c.style.color="red",c.style.fontWeight="bold",c.style.padding="10px",c.innerText="Error: your browser does not support HTML canvas",(this||b).frame.canvas.appendChild(c)}(this||b).body.container.appendChild((this||b).frame),(this||b).body.view.scale=1,(this||b).body.view.translation={x:.5*(this||b).frame.canvas.clientWidth,y:.5*(this||b).frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var c=this||b;void 0!==(this||b).hammer&&(this||b).hammer.destroy(),(this||b).drag={},(this||b).pinch={},(this||b).hammer=new Kb((this||b).frame.canvas),(this||b).hammer.get("pinch").set({enable:!0}),(this||b).hammer.get("pan").set({threshold:5,direction:Kb.DIRECTION_ALL}),EO((this||b).hammer,(function(f){c.body.eventListeners.onTouch(f)})),(this||b).hammer.on("tap",(function(f){c.body.eventListeners.onTap(f)})),(this||b).hammer.on("doubletap",(function(f){c.body.eventListeners.onDoubleTap(f)})),(this||b).hammer.on("press",(function(f){c.body.eventListeners.onHold(f)})),(this||b).hammer.on("panstart",(function(f){c.body.eventListeners.onDragStart(f)})),(this||b).hammer.on("panmove",(function(f){c.body.eventListeners.onDrag(f)})),(this||b).hammer.on("panend",(function(f){c.body.eventListeners.onDragEnd(f)})),(this||b).hammer.on("pinch",(function(f){c.body.eventListeners.onPinch(f)})),(this||b).frame.canvas.addEventListener("wheel",(function(f){c.body.eventListeners.onMouseWheel(f)})),(this||b).frame.canvas.addEventListener("mousemove",(function(f){c.body.eventListeners.onMouseMove(f)})),(this||b).frame.canvas.addEventListener("contextmenu",(function(f){c.body.eventListeners.onContext(f)})),(this||b).hammerFrame=new Kb((this||b).frame),OO((this||b).hammerFrame,(function(f){c.body.eventListeners.onRelease(f)}))}},{key:"setSize",value:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(this||b).options.width,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(this||b).options.height;c=this._prepareValue(c),f=this._prepareValue(f);var w=!1,x=(this||b).frame.canvas.width,_=(this||b).frame.canvas.height,O=(this||b).pixelRatio;if(this._setPixelRatio(),c!=(this||b).options.width||f!=(this||b).options.height||(this||b).frame.style.width!=c||(this||b).frame.style.height!=f)this._getCameraState(O),(this||b).frame.style.width=c,(this||b).frame.style.height=f,(this||b).frame.canvas.style.width="100%",(this||b).frame.canvas.style.height="100%",(this||b).frame.canvas.width=Math.round((this||b).frame.canvas.clientWidth*(this||b).pixelRatio),(this||b).frame.canvas.height=Math.round((this||b).frame.canvas.clientHeight*(this||b).pixelRatio),(this||b).options.width=c,(this||b).options.height=f,(this||b).canvasViewCenter={x:.5*(this||b).frame.clientWidth,y:.5*(this||b).frame.clientHeight},w=!0;else{var C=Math.round((this||b).frame.canvas.clientWidth*(this||b).pixelRatio),T=Math.round((this||b).frame.canvas.clientHeight*(this||b).pixelRatio);(this||b).frame.canvas.width===C&&(this||b).frame.canvas.height===T||this._getCameraState(O),(this||b).frame.canvas.width!==C&&((this||b).frame.canvas.width=C,w=!0),(this||b).frame.canvas.height!==T&&((this||b).frame.canvas.height=T,w=!0)}return!0===w&&((this||b).body.emitter.emit("resize",{width:Math.round((this||b).frame.canvas.width/(this||b).pixelRatio),height:Math.round((this||b).frame.canvas.height/(this||b).pixelRatio),oldWidth:Math.round(x/(this||b).pixelRatio),oldHeight:Math.round(_/(this||b).pixelRatio)}),this._setCameraState()),(this||b).initialized=!0,w}},{key:"getContext",value:function(){return(this||b).frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var c=this.getContext();if(void 0===c)throw new Error("Could not get canvax context");var f=1;return"undefined"!=typeof window&&(f=window.devicePixelRatio||1),f/(c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){(this||b).pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var c=this.getContext();if(void 0===c)throw new Error("Could not get canvax context");c.setTransform((this||b).pixelRatio,0,0,(this||b).pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(c){return(c-(this||b).body.view.translation.x)/(this||b).body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(c){return c*(this||b).body.view.scale+(this||b).body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(c){return(c-(this||b).body.view.translation.y)/(this||b).body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(c){return c*(this||b).body.view.scale+(this||b).body.view.translation.y}},{key:"canvasToDOM",value:function(c){return{x:this._XconvertCanvasToDOM(c.x),y:this._YconvertCanvasToDOM(c.y)}}},{key:"DOMtoCanvas",value:function(c){return{x:this._XconvertDOMtoCanvas(c.x),y:this._YconvertDOMtoCanvas(c.y)}}}]),t}();var UO=function(){function t(c,f){var w,x,_=this||b;vh(this||b,t),(this||b).body=c,(this||b).canvas=f,(this||b).animationSpeed=1/(this||b).renderRefreshRate,(this||b).animationEasingFunction="easeInOutQuint",(this||b).easingTime=0,(this||b).sourceScale=0,(this||b).targetScale=0,(this||b).sourceTranslation=0,(this||b).targetTranslation=0,(this||b).lockedOnNodeId=void 0,(this||b).lockedOnNodeOffset=void 0,(this||b).touchTime=0,(this||b).viewFunction=void 0,(this||b).body.emitter.on("fit",dn(w=(this||b).fit).call(w,this||b)),(this||b).body.emitter.on("animationFinished",(function(){_.body.emitter.emit("_stopRendering")})),(this||b).body.emitter.on("unlockNode",dn(x=(this||b).releaseNode).call(x,this||b))}return wu(t,[{key:"setOptions",value:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(this||b).options=c}},{key:"fit",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c=function(c,f){var b=No({nodes:f,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},null!=c?c:{});if(!Wf(b.nodes))throw new TypeError("Nodes has to be an array of ids.");if(0===b.nodes.length&&(b.nodes=f),!("number"==typeof b.minZoomLevel&&b.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!("number"==typeof b.maxZoomLevel&&b.minZoomLevel<=b.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return b}(c,(this||b).body.nodeIndices);var w,x,_=(this||b).canvas.frame.canvas.clientWidth,O=(this||b).canvas.frame.canvas.clientHeight;if(0===_||0===O)x=1,w=jO.getRange((this||b).body.nodes,c.nodes);else if(!0===f){var C=0;for(var T in(this||b).body.nodes)Object.prototype.hasOwnProperty.call((this||b).body.nodes,T)&&!0===(this||b).body.nodes[T].predefinedPosition&&(C+=1);if(C>.5*(this||b).body.nodeIndices.length)return void this.fit(c,!1);w=jO.getRange((this||b).body.nodes,c.nodes),x=12.662/((this||b).body.nodeIndices.length+7.4147)+.0964822,x*=Math.min(_/600,O/600)}else{(this||b).body.emitter.emit("_resizeNodes"),w=jO.getRange((this||b).body.nodes,c.nodes);var S=_/(1.1*Math.abs(w.maxX-w.minX)),M=O/(1.1*Math.abs(w.maxY-w.minY));x=S<=M?S:M}x>c.maxZoomLevel?x=c.maxZoomLevel:x<c.minZoomLevel&&(x=c.minZoomLevel);var P={position:jO.findCenter(w),scale:x,animation:c.animation};this.moveTo(P)}},{key:"focus",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==(this||b).body.nodes[c]){var w={x:(this||b).body.nodes[c].x,y:(this||b).body.nodes[c].y};f.position=w,f.lockedOnNode=c,this.moveTo(f)}else console.error("Node: "+c+" cannot be found.")}},{key:"moveTo",value:function(c){if(void 0!==c){if(null!=c.offset){if(null!=c.offset.x){if(c.offset.x=+c.offset.x,!qk(c.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else c.offset.x=0;if(null!=c.offset.y){if(c.offset.y=+c.offset.y,!qk(c.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else c.offset.x=0}else c.offset={x:0,y:0};if(null!=c.position){if(null!=c.position.x){if(c.position.x=+c.position.x,!qk(c.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else c.position.x=0;if(null!=c.position.y){if(c.position.y=+c.position.y,!qk(c.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else c.position.x=0}else c.position=this.getViewPosition();if(null!=c.scale){if(c.scale=+c.scale,!(c.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else c.scale=(this||b).body.view.scale;void 0===c.animation&&(c.animation={duration:0}),!1===c.animation&&(c.animation={duration:0}),!0===c.animation&&(c.animation={}),void 0===c.animation.duration&&(c.animation.duration=1e3),void 0===c.animation.easingFunction&&(c.animation.easingFunction="easeInOutQuad"),this.animateView(c)}else c={}}},{key:"animateView",value:function(c){if(void 0!==c){(this||b).animationEasingFunction=c.animation.easingFunction,this.releaseNode(),!0===c.locked&&((this||b).lockedOnNodeId=c.lockedOnNode,(this||b).lockedOnNodeOffset=c.offset),0!=(this||b).easingTime&&this._transitionRedraw(!0),(this||b).sourceScale=(this||b).body.view.scale,(this||b).sourceTranslation=(this||b).body.view.translation,(this||b).targetScale=c.scale,(this||b).body.view.scale=(this||b).targetScale;var f,w,x=(this||b).canvas.DOMtoCanvas({x:.5*(this||b).canvas.frame.canvas.clientWidth,y:.5*(this||b).canvas.frame.canvas.clientHeight}),_=x.x-c.position.x,O=x.y-c.position.y;(this||b).targetTranslation={x:(this||b).sourceTranslation.x+_*(this||b).targetScale+c.offset.x,y:(this||b).sourceTranslation.y+O*(this||b).targetScale+c.offset.y},0===c.animation.duration?null!=(this||b).lockedOnNodeId?((this||b).viewFunction=dn(f=(this||b)._lockedRedraw).call(f,this||b),(this||b).body.emitter.on("initRedraw",(this||b).viewFunction)):((this||b).body.view.scale=(this||b).targetScale,(this||b).body.view.translation=(this||b).targetTranslation,(this||b).body.emitter.emit("_requestRedraw")):((this||b).animationSpeed=1/(60*c.animation.duration*.001)||1/60,(this||b).animationEasingFunction=c.animation.easingFunction,(this||b).viewFunction=dn(w=(this||b)._transitionRedraw).call(w,this||b),(this||b).body.emitter.on("initRedraw",(this||b).viewFunction),(this||b).body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var c=(this||b).body.nodes[(this||b).lockedOnNodeId].x,f=(this||b).body.nodes[(this||b).lockedOnNodeId].y,w=(this||b).canvas.DOMtoCanvas({x:.5*(this||b).canvas.frame.canvas.clientWidth,y:.5*(this||b).canvas.frame.canvas.clientHeight}),x=w.x-c,_=w.y-f,O=(this||b).body.view.translation,C={x:O.x+x*(this||b).body.view.scale+(this||b).lockedOnNodeOffset.x,y:O.y+_*(this||b).body.view.scale+(this||b).lockedOnNodeOffset.y};(this||b).body.view.translation=C}},{key:"releaseNode",value:function(){void 0!==(this||b).lockedOnNodeId&&void 0!==(this||b).viewFunction&&((this||b).body.emitter.off("initRedraw",(this||b).viewFunction),(this||b).lockedOnNodeId=void 0,(this||b).lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this||b).easingTime+=(this||b).animationSpeed,(this||b).easingTime=!0===c?1:(this||b).easingTime;var f=yb[(this||b).animationEasingFunction]((this||b).easingTime);if((this||b).body.view.scale=(this||b).sourceScale+((this||b).targetScale-(this||b).sourceScale)*f,(this||b).body.view.translation={x:(this||b).sourceTranslation.x+((this||b).targetTranslation.x-(this||b).sourceTranslation.x)*f,y:(this||b).sourceTranslation.y+((this||b).targetTranslation.y-(this||b).sourceTranslation.y)*f},(this||b).easingTime>=1){var w;((this||b).body.emitter.off("initRedraw",(this||b).viewFunction),(this||b).easingTime=0,null!=(this||b).lockedOnNodeId)&&((this||b).viewFunction=dn(w=(this||b)._lockedRedraw).call(w,this||b),(this||b).body.emitter.on("initRedraw",(this||b).viewFunction));(this||b).body.emitter.emit("animationFinished")}}},{key:"getScale",value:function(){return(this||b).body.view.scale}},{key:"getViewPosition",value:function(){return(this||b).canvas.DOMtoCanvas({x:.5*(this||b).canvas.frame.canvas.clientWidth,y:.5*(this||b).canvas.frame.canvas.clientHeight})}}]),t}();function TO(c){var f,b=c&&c.preventDefault||!1,w=c&&c.container||window,x={},_={keydown:{},keyup:{}},O={};for(f=97;f<=122;f++)O[String.fromCharCode(f)]={code:f-97+65,shift:!1};for(f=65;f<=90;f++)O[String.fromCharCode(f)]={code:f,shift:!0};for(f=0;f<=9;f++)O[""+f]={code:48+f,shift:!1};for(f=1;f<=12;f++)O["F"+f]={code:111+f,shift:!1};for(f=0;f<=9;f++)O["num"+f]={code:96+f,shift:!1};O["num*"]={code:106,shift:!1},O["num+"]={code:107,shift:!1},O["num-"]={code:109,shift:!1},O["num/"]={code:111,shift:!1},O["num."]={code:110,shift:!1},O.left={code:37,shift:!1},O.up={code:38,shift:!1},O.right={code:39,shift:!1},O.down={code:40,shift:!1},O.space={code:32,shift:!1},O.enter={code:13,shift:!1},O.shift={code:16,shift:void 0},O.esc={code:27,shift:!1},O.backspace={code:8,shift:!1},O.tab={code:9,shift:!1},O.ctrl={code:17,shift:!1},O.alt={code:18,shift:!1},O.delete={code:46,shift:!1},O.pageup={code:33,shift:!1},O.pagedown={code:34,shift:!1},O["="]={code:187,shift:!1},O["-"]={code:189,shift:!1},O["]"]={code:221,shift:!1},O["["]={code:219,shift:!1};var a=function(c){d(c,"keydown")},h=function(c){d(c,"keyup")},d=function(c,f){if(void 0!==_[f][c.keyCode]){for(var w=_[f][c.keyCode],x=0;x<w.length;x++)(void 0===w[x].shift||1==w[x].shift&&1==c.shiftKey||0==w[x].shift&&0==c.shiftKey)&&w[x].fn(c);1==b&&c.preventDefault()}};return x.bind=function(c,f,b){if(void 0===b&&(b="keydown"),void 0===O[c])throw new Error("unsupported key: "+c);void 0===_[b][O[c].code]&&(_[b][O[c].code]=[]),_[b][O[c].code].push({fn:f,shift:O[c].shift})},x.bindAll=function(c,f){for(var b in void 0===f&&(f="keydown"),O)O.hasOwnProperty(b)&&x.bind(b,c,f)},x.getKey=function(c){for(var f in O)if(O.hasOwnProperty(f)){if(1==c.shiftKey&&1==O[f].shift&&c.keyCode==O[f].code)return f;if(0==c.shiftKey&&0==O[f].shift&&c.keyCode==O[f].code)return f;if(c.keyCode==O[f].code&&"shift"==f)return f}return"unknown key, currently not supported"},x.unbind=function(c,f,b){if(void 0===b&&(b="keydown"),void 0===O[c])throw new Error("unsupported key: "+c);if(void 0!==f){var w=[],x=_[b][O[c].code];if(void 0!==x)for(var C=0;C<x.length;C++)x[C].fn==f&&x[C].shift==O[c].shift||w.push(_[b][O[c].code][C]);_[b][O[c].code]=w}else _[b][O[c].code]=[]},x.reset=function(){_={keydown:{},keyup:{}}},x.destroy=function(){_={keydown:{},keyup:{}},w.removeEventListener("keydown",a,!0),w.removeEventListener("keyup",h,!0)},w.addEventListener("keydown",a,!0),w.addEventListener("keyup",h,!0),x}var YO=function(){function t(c,f){var w=this||b;vh(this||b,t),(this||b).body=c,(this||b).canvas=f,(this||b).iconsCreated=!1,(this||b).navigationHammers=[],(this||b).boundFunctions={},(this||b).touchTime=0,(this||b).activated=!1,(this||b).body.emitter.on("activate",(function(){w.activated=!0,w.configureKeyboardBindings()})),(this||b).body.emitter.on("deactivate",(function(){w.activated=!1,w.configureKeyboardBindings()})),(this||b).body.emitter.on("destroy",(function(){void 0!==w.keycharm&&w.keycharm.destroy()})),(this||b).options={}}return wu(t,[{key:"setOptions",value:function(c){void 0!==c&&((this||b).options=c,this.create())}},{key:"create",value:function(){!0===(this||b).options.navigationButtons?!1===(this||b).iconsCreated&&this.loadNavigationElements():!0===(this||b).iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=(this||b).navigationHammers.length){for(var c=0;c<(this||b).navigationHammers.length;c++)(this||b).navigationHammers[c].destroy();(this||b).navigationHammers=[]}(this||b).navigationDOM&&(this||b).navigationDOM.wrapper&&(this||b).navigationDOM.wrapper.parentNode&&(this||b).navigationDOM.wrapper.parentNode.removeChild((this||b).navigationDOM.wrapper),(this||b).iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var c=this||b;this.cleanNavigation(),(this||b).navigationDOM={};var f=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],w=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];(this||b).navigationDOM.wrapper=document.createElement("div"),(this||b).navigationDOM.wrapper.className="vis-navigation",(this||b).canvas.frame.appendChild((this||b).navigationDOM.wrapper);for(var x=0;x<f.length;x++){(this||b).navigationDOM[f[x]]=document.createElement("div"),(this||b).navigationDOM[f[x]].className="vis-button vis-"+f[x],(this||b).navigationDOM.wrapper.appendChild((this||b).navigationDOM[f[x]]);var _,O,C=new Kb((this||b).navigationDOM[f[x]]);"_fit"===w[x]?EO(C,dn(_=(this||b)._fit).call(_,this||b)):EO(C,dn(O=(this||b).bindToRedraw).call(O,this||b,w[x]));(this||b).navigationHammers.push(C)}var T=new Kb((this||b).canvas.frame);OO(T,(function(){c._stopMovement()})),(this||b).navigationHammers.push(T),(this||b).iconsCreated=!0}},{key:"bindToRedraw",value:function(c){var f;void 0===(this||b).boundFunctions[c]&&((this||b).boundFunctions[c]=dn(f=(this||b)[c]).call(f,this||b),(this||b).body.emitter.on("initRedraw",(this||b).boundFunctions[c]),(this||b).body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(c){void 0!==(this||b).boundFunctions[c]&&((this||b).body.emitter.off("initRedraw",(this||b).boundFunctions[c]),(this||b).body.emitter.emit("_stopRendering"),delete(this||b).boundFunctions[c])}},{key:"_fit",value:function(){(new Date).valueOf()-(this||b).touchTime>700&&((this||b).body.emitter.emit("fit",{duration:700}),(this||b).touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var c in(this||b).boundFunctions)Object.prototype.hasOwnProperty.call((this||b).boundFunctions,c)&&((this||b).body.emitter.off("initRedraw",(this||b).boundFunctions[c]),(this||b).body.emitter.emit("_stopRendering"));(this||b).boundFunctions={}}},{key:"_moveUp",value:function(){(this||b).body.view.translation.y+=(this||b).options.keyboard.speed.y}},{key:"_moveDown",value:function(){(this||b).body.view.translation.y-=(this||b).options.keyboard.speed.y}},{key:"_moveLeft",value:function(){(this||b).body.view.translation.x+=(this||b).options.keyboard.speed.x}},{key:"_moveRight",value:function(){(this||b).body.view.translation.x-=(this||b).options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var c=(this||b).body.view.scale,f=(this||b).body.view.scale*(1+(this||b).options.keyboard.speed.zoom),w=(this||b).body.view.translation,x=f/c,_=(1-x)*(this||b).canvas.canvasViewCenter.x+w.x*x,O=(1-x)*(this||b).canvas.canvasViewCenter.y+w.y*x;(this||b).body.view.scale=f,(this||b).body.view.translation={x:_,y:O},(this||b).body.emitter.emit("zoom",{direction:"+",scale:(this||b).body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var c=(this||b).body.view.scale,f=(this||b).body.view.scale/(1+(this||b).options.keyboard.speed.zoom),w=(this||b).body.view.translation,x=f/c,_=(1-x)*(this||b).canvas.canvasViewCenter.x+w.x*x,O=(1-x)*(this||b).canvas.canvasViewCenter.y+w.y*x;(this||b).body.view.scale=f,(this||b).body.view.translation={x:_,y:O},(this||b).body.emitter.emit("zoom",{direction:"-",scale:(this||b).body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var c,f,w,x,_,O,C,T,S,M,P,D,I,B,F,z,N,A,R,j,H,W,V,q,U=this||b;(void 0!==(this||b).keycharm&&(this||b).keycharm.destroy(),!0===(this||b).options.keyboard.enabled)&&(!0===(this||b).options.keyboard.bindToWindow?(this||b).keycharm=TO({container:window,preventDefault:!0}):(this||b).keycharm=TO({container:(this||b).canvas.frame,preventDefault:!0}),(this||b).keycharm.reset(),!0===(this||b).activated&&(dn(c=(this||b).keycharm).call(c,"up",(function(){U.bindToRedraw("_moveUp")}),"keydown"),dn(f=(this||b).keycharm).call(f,"down",(function(){U.bindToRedraw("_moveDown")}),"keydown"),dn(w=(this||b).keycharm).call(w,"left",(function(){U.bindToRedraw("_moveLeft")}),"keydown"),dn(x=(this||b).keycharm).call(x,"right",(function(){U.bindToRedraw("_moveRight")}),"keydown"),dn(_=(this||b).keycharm).call(_,"=",(function(){U.bindToRedraw("_zoomIn")}),"keydown"),dn(O=(this||b).keycharm).call(O,"num+",(function(){U.bindToRedraw("_zoomIn")}),"keydown"),dn(C=(this||b).keycharm).call(C,"num-",(function(){U.bindToRedraw("_zoomOut")}),"keydown"),dn(T=(this||b).keycharm).call(T,"-",(function(){U.bindToRedraw("_zoomOut")}),"keydown"),dn(S=(this||b).keycharm).call(S,"[",(function(){U.bindToRedraw("_zoomOut")}),"keydown"),dn(M=(this||b).keycharm).call(M,"]",(function(){U.bindToRedraw("_zoomIn")}),"keydown"),dn(P=(this||b).keycharm).call(P,"pageup",(function(){U.bindToRedraw("_zoomIn")}),"keydown"),dn(D=(this||b).keycharm).call(D,"pagedown",(function(){U.bindToRedraw("_zoomOut")}),"keydown"),dn(I=(this||b).keycharm).call(I,"up",(function(){U.unbindFromRedraw("_moveUp")}),"keyup"),dn(B=(this||b).keycharm).call(B,"down",(function(){U.unbindFromRedraw("_moveDown")}),"keyup"),dn(F=(this||b).keycharm).call(F,"left",(function(){U.unbindFromRedraw("_moveLeft")}),"keyup"),dn(z=(this||b).keycharm).call(z,"right",(function(){U.unbindFromRedraw("_moveRight")}),"keyup"),dn(N=(this||b).keycharm).call(N,"=",(function(){U.unbindFromRedraw("_zoomIn")}),"keyup"),dn(A=(this||b).keycharm).call(A,"num+",(function(){U.unbindFromRedraw("_zoomIn")}),"keyup"),dn(R=(this||b).keycharm).call(R,"num-",(function(){U.unbindFromRedraw("_zoomOut")}),"keyup"),dn(j=(this||b).keycharm).call(j,"-",(function(){U.unbindFromRedraw("_zoomOut")}),"keyup"),dn(H=(this||b).keycharm).call(H,"[",(function(){U.unbindFromRedraw("_zoomOut")}),"keyup"),dn(W=(this||b).keycharm).call(W,"]",(function(){U.unbindFromRedraw("_zoomIn")}),"keyup"),dn(V=(this||b).keycharm).call(V,"pageup",(function(){U.unbindFromRedraw("_zoomIn")}),"keyup"),dn(q=(this||b).keycharm).call(q,"pagedown",(function(){U.unbindFromRedraw("_zoomOut")}),"keyup")))}}]),t}();function PO(c,f){var b=void 0!==Tf&&Dh(c)||c["@@iterator"];if(!b){if(Wf(c)||(b=function(c,f){var b;if(c){if("string"==typeof c)return DO(c,f);var w=Ff(b=Object.prototype.toString.call(c)).call(b,8,-1);"Object"===w&&c.constructor&&(w=c.constructor.name);return"Map"===w||"Set"===w?hh(c):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?DO(c,f):void 0}}(c))||f&&c&&"number"==typeof c.length){b&&(c=b);var w=0,n=function(){};return{s:n,n:function(){return w>=c.length?{done:!0}:{done:!1,value:c[w++]}},e:function(c){throw c},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var x,_=!0,O=!1;return{s:function(){b=b.call(c)},n:function(){var c=b.next();return _=c.done,c},e:function(c){O=!0,x=c},f:function(){try{_||null==b.return||b.return()}finally{if(O)throw x}}}}function DO(c,f){(null==f||f>c.length)&&(f=c.length);for(var b=0,w=new Array(f);b<f;b++)w[b]=c[b];return w}var XO=function(){function t(c,f,w){var x,_,O,C,T,S,M,P,D,I,B,F,z;vh(this||b,t),(this||b).body=c,(this||b).canvas=f,(this||b).selectionHandler=w,(this||b).navigationHandler=new YO(c,f),(this||b).body.eventListeners.onTap=dn(x=(this||b).onTap).call(x,this||b),(this||b).body.eventListeners.onTouch=dn(_=(this||b).onTouch).call(_,this||b),(this||b).body.eventListeners.onDoubleTap=dn(O=(this||b).onDoubleTap).call(O,this||b),(this||b).body.eventListeners.onHold=dn(C=(this||b).onHold).call(C,this||b),(this||b).body.eventListeners.onDragStart=dn(T=(this||b).onDragStart).call(T,this||b),(this||b).body.eventListeners.onDrag=dn(S=(this||b).onDrag).call(S,this||b),(this||b).body.eventListeners.onDragEnd=dn(M=(this||b).onDragEnd).call(M,this||b),(this||b).body.eventListeners.onMouseWheel=dn(P=(this||b).onMouseWheel).call(P,this||b),(this||b).body.eventListeners.onPinch=dn(D=(this||b).onPinch).call(D,this||b),(this||b).body.eventListeners.onMouseMove=dn(I=(this||b).onMouseMove).call(I,this||b),(this||b).body.eventListeners.onRelease=dn(B=(this||b).onRelease).call(B,this||b),(this||b).body.eventListeners.onContext=dn(F=(this||b).onContext).call(F,this||b),(this||b).touchTime=0,(this||b).drag={},(this||b).pinch={},(this||b).popup=void 0,(this||b).popupObj=void 0,(this||b).popupTimer=void 0,(this||b).body.functions.getPointer=dn(z=(this||b).getPointer).call(z,this||b),(this||b).options={},(this||b).defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},No((this||b).options,(this||b).defaultOptions),this.bindEventListeners()}return wu(t,[{key:"bindEventListeners",value:function(){var c=this||b;(this||b).body.emitter.on("destroy",(function(){clearTimeout(c.popupTimer),delete c.body.functions.getPointer}))}},{key:"setOptions",value:function(c){void 0!==c&&(Am(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],(this||b).options,c),Qm((this||b).options,c,"keyboard"),c.tooltip&&(No((this||b).options.tooltip,c.tooltip),c.tooltip.color&&((this||b).options.tooltip.color=Um(c.tooltip.color))));(this||b).navigationHandler.setOptions((this||b).options)}},{key:"getPointer",value:function(c){return{x:c.x-(f=(this||b).canvas.frame.canvas,f.getBoundingClientRect().left),y:c.y-Lm((this||b).canvas.frame.canvas)};var f}},{key:"onTouch",value:function(c){(new Date).valueOf()-(this||b).touchTime>50&&((this||b).drag.pointer=this.getPointer(c.center),(this||b).drag.pinched=!1,(this||b).pinch.scale=(this||b).body.view.scale,(this||b).touchTime=(new Date).valueOf())}},{key:"onTap",value:function(c){var f=this.getPointer(c.center),w=(this||b).selectionHandler.options.multiselect&&(c.changedPointers[0].ctrlKey||c.changedPointers[0].metaKey);this.checkSelectionChanges(f,w),(this||b).selectionHandler.commitAndEmit(f,c),(this||b).selectionHandler.generateClickEvent("click",c,f)}},{key:"onDoubleTap",value:function(c){var f=this.getPointer(c.center);(this||b).selectionHandler.generateClickEvent("doubleClick",c,f)}},{key:"onHold",value:function(c){var f=this.getPointer(c.center),w=(this||b).selectionHandler.options.multiselect;this.checkSelectionChanges(f,w),(this||b).selectionHandler.commitAndEmit(f,c),(this||b).selectionHandler.generateClickEvent("click",c,f),(this||b).selectionHandler.generateClickEvent("hold",c,f)}},{key:"onRelease",value:function(c){if((new Date).valueOf()-(this||b).touchTime>10){var f=this.getPointer(c.center);(this||b).selectionHandler.generateClickEvent("release",c,f),(this||b).touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(c){var f=this.getPointer({x:c.clientX,y:c.clientY});(this||b).selectionHandler.generateClickEvent("oncontext",c,f)}},{key:"checkSelectionChanges",value:function(c){!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?(this||b).selectionHandler.selectAdditionalOnPoint(c):(this||b).selectionHandler.selectOnPoint(c)}},{key:"_determineDifference",value:function(c,f){var i=function(c,f){for(var b=[],w=0;w<c.length;w++){var x=c[w];-1===ag(f).call(f,x)&&b.push(x)}return b};return{nodes:i(c.nodes,f.nodes),edges:i(c.edges,f.edges)}}},{key:"onDragStart",value:function(c){if(!(this||b).drag.dragging){void 0===(this||b).drag.pointer&&this.onTouch(c);var f=(this||b).selectionHandler.getNodeAt((this||b).drag.pointer);if((this||b).drag.dragging=!0,(this||b).drag.selection=[],(this||b).drag.translation=No({},(this||b).body.view.translation),(this||b).drag.nodeId=void 0,c.srcEvent.shiftKey){(this||b).body.selectionBox.show=!0;var w=this.getPointer(c.center);(this||b).body.selectionBox.position.start={x:(this||b).canvas._XconvertDOMtoCanvas(w.x),y:(this||b).canvas._YconvertDOMtoCanvas(w.y)},(this||b).body.selectionBox.position.end={x:(this||b).canvas._XconvertDOMtoCanvas(w.x),y:(this||b).canvas._YconvertDOMtoCanvas(w.y)}}else if(void 0!==f&&!0===(this||b).options.dragNodes){(this||b).drag.nodeId=f.id,!1===f.isSelected()&&(this||b).selectionHandler.setSelection({nodes:[f.id]}),(this||b).selectionHandler.generateClickEvent("dragStart",c,(this||b).drag.pointer);var x,_=PO((this||b).selectionHandler.getSelectedNodes());try{for(_.s();!(x=_.n()).done;){var O=x.value,C={id:O.id,node:O,x:O.x,y:O.y,xFixed:O.options.fixed.x,yFixed:O.options.fixed.y};O.options.fixed.x=!0,O.options.fixed.y=!0,(this||b).drag.selection.push(C)}}catch(c){_.e(c)}finally{_.f()}}else(this||b).selectionHandler.generateClickEvent("dragStart",c,(this||b).drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(c){var f=this||b;if(!0!==(this||b).drag.pinched){(this||b).body.emitter.emit("unlockNode");var w=this.getPointer(c.center),x=(this||b).drag.selection;if(x&&x.length&&!0===(this||b).options.dragNodes){(this||b).selectionHandler.generateClickEvent("dragging",c,w);var _=w.x-(this||b).drag.pointer.x,O=w.y-(this||b).drag.pointer.y;vp(x).call(x,(function(c){var b=c.node;!1===c.xFixed&&(b.x=f.canvas._XconvertDOMtoCanvas(f.canvas._XconvertCanvasToDOM(c.x)+_)),!1===c.yFixed&&(b.y=f.canvas._YconvertDOMtoCanvas(f.canvas._YconvertCanvasToDOM(c.y)+O))})),(this||b).body.emitter.emit("startSimulation")}else{if(c.srcEvent.shiftKey){if((this||b).selectionHandler.generateClickEvent("dragging",c,w,void 0,!0),void 0===(this||b).drag.pointer)return void this.onDragStart(c);(this||b).body.selectionBox.position.end={x:(this||b).canvas._XconvertDOMtoCanvas(w.x),y:(this||b).canvas._YconvertDOMtoCanvas(w.y)},(this||b).body.emitter.emit("_requestRedraw")}if(!0===(this||b).options.dragView&&!c.srcEvent.shiftKey){if((this||b).selectionHandler.generateClickEvent("dragging",c,w,void 0,!0),void 0===(this||b).drag.pointer)return void this.onDragStart(c);var C=w.x-(this||b).drag.pointer.x,T=w.y-(this||b).drag.pointer.y;(this||b).body.view.translation={x:(this||b).drag.translation.x+C,y:(this||b).drag.translation.y+T},(this||b).body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(c){var f=this||b;if((this||b).drag.dragging=!1,(this||b).body.selectionBox.show){var w;(this||b).body.selectionBox.show=!1;var x=(this||b).body.selectionBox.position,_={minX:Math.min(x.start.x,x.end.x),minY:Math.min(x.start.y,x.end.y),maxX:Math.max(x.start.x,x.end.x),maxY:Math.max(x.start.y,x.end.y)},O=Cv(w=(this||b).body.nodeIndices).call(w,(function(c){var b=f.body.nodes[c];return b.x>=_.minX&&b.x<=_.maxX&&b.y>=_.minY&&b.y<=_.maxY}));vp(O).call(O,(function(c){return f.selectionHandler.selectObject(f.body.nodes[c])}));var C=this.getPointer(c.center);(this||b).selectionHandler.commitAndEmit(C,c),(this||b).selectionHandler.generateClickEvent("dragEnd",c,this.getPointer(c.center),void 0,!0),(this||b).body.emitter.emit("_requestRedraw")}else{var T=(this||b).drag.selection;T&&T.length?(vp(T).call(T,(function(c){c.node.options.fixed.x=c.xFixed,c.node.options.fixed.y=c.yFixed})),(this||b).selectionHandler.generateClickEvent("dragEnd",c,this.getPointer(c.center)),(this||b).body.emitter.emit("startSimulation")):((this||b).selectionHandler.generateClickEvent("dragEnd",c,this.getPointer(c.center),void 0,!0),(this||b).body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(c){var f=this.getPointer(c.center);(this||b).drag.pinched=!0,void 0===(this||b).pinch.scale&&((this||b).pinch.scale=1);var w=(this||b).pinch.scale*c.scale;this.zoom(w,f)}},{key:"zoom",value:function(c,f){if(!0===(this||b).options.zoomView){var w=(this||b).body.view.scale;c<1e-5&&(c=1e-5),c>10&&(c=10);var x=void 0;void 0!==(this||b).drag&&!0===(this||b).drag.dragging&&(x=(this||b).canvas.DOMtoCanvas((this||b).drag.pointer));var _=(this||b).body.view.translation,O=c/w,C=(1-O)*f.x+_.x*O,T=(1-O)*f.y+_.y*O;if((this||b).body.view.scale=c,(this||b).body.view.translation={x:C,y:T},null!=x){var S=(this||b).canvas.canvasToDOM(x);(this||b).drag.pointer.x=S.x,(this||b).drag.pointer.y=S.y}(this||b).body.emitter.emit("_requestRedraw"),w<c?(this||b).body.emitter.emit("zoom",{direction:"+",scale:(this||b).body.view.scale,pointer:f}):(this||b).body.emitter.emit("zoom",{direction:"-",scale:(this||b).body.view.scale,pointer:f})}}},{key:"onMouseWheel",value:function(c){if(!0===(this||b).options.zoomView){if(0!==c.deltaY){var f=(this||b).body.view.scale;f*=1+(c.deltaY<0?1:-1)*(.1*(this||b).options.zoomSpeed);var w=this.getPointer({x:c.clientX,y:c.clientY});this.zoom(f,w)}c.preventDefault()}}},{key:"onMouseMove",value:function(c){var f=this||b,w=this.getPointer({x:c.clientX,y:c.clientY}),x=!1;void 0!==(this||b).popup&&(!1===(this||b).popup.hidden&&this._checkHidePopup(w),!1===(this||b).popup.hidden&&(x=!0,(this||b).popup.setPosition(w.x+3,w.y-5),(this||b).popup.show())),(this||b).options.keyboard.autoFocus&&!1===(this||b).options.keyboard.bindToWindow&&!0===(this||b).options.keyboard.enabled&&(this||b).canvas.frame.focus(),!1===x&&(void 0!==(this||b).popupTimer&&(clearInterval((this||b).popupTimer),(this||b).popupTimer=void 0),(this||b).drag.dragging||((this||b).popupTimer=zg((function(){return f._checkShowPopup(w)}),(this||b).options.tooltipDelay))),!0===(this||b).options.hover&&(this||b).selectionHandler.hoverObject(c,w)}},{key:"_checkShowPopup",value:function(c){var f=(this||b).canvas._XconvertDOMtoCanvas(c.x),w=(this||b).canvas._YconvertDOMtoCanvas(c.y),x={left:f,top:w,right:f,bottom:w},_=void 0===(this||b).popupObj?void 0:(this||b).popupObj.id,O=!1,C="node";if(void 0===(this||b).popupObj){for(var T,S=(this||b).body.nodeIndices,M=(this||b).body.nodes,P=[],D=0;D<S.length;D++)!0===(T=M[S[D]]).isOverlappingWith(x)&&(O=!0,void 0!==T.getTitle()&&P.push(S[D]));P.length>0&&((this||b).popupObj=M[P[P.length-1]],O=!0)}if(void 0===(this||b).popupObj&&!1===O){for(var I,B=(this||b).body.edgeIndices,F=(this||b).body.edges,z=[],N=0;N<B.length;N++)!0===(I=F[B[N]]).isOverlappingWith(x)&&!0===I.connected&&void 0!==I.getTitle()&&z.push(B[N]);z.length>0&&((this||b).popupObj=F[z[z.length-1]],C="edge")}void 0!==(this||b).popupObj?(this||b).popupObj.id!==_&&(void 0===(this||b).popup&&((this||b).popup=new Gb((this||b).canvas.frame)),(this||b).popup.popupTargetType=C,(this||b).popup.popupTargetId=(this||b).popupObj.id,(this||b).popup.setPosition(c.x+3,c.y-5),(this||b).popup.setText((this||b).popupObj.getTitle()),(this||b).popup.show(),(this||b).body.emitter.emit("showPopup",(this||b).popupObj.id)):void 0!==(this||b).popup&&((this||b).popup.hide(),(this||b).body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(c){var f=(this||b).selectionHandler._pointerToPositionObject(c),w=!1;if("node"===(this||b).popup.popupTargetType){if(void 0!==(this||b).body.nodes[(this||b).popup.popupTargetId]&&!0===(w=(this||b).body.nodes[(this||b).popup.popupTargetId].isOverlappingWith(f))){var x=(this||b).selectionHandler.getNodeAt(c);w=void 0!==x&&x.id===(this||b).popup.popupTargetId}}else void 0===(this||b).selectionHandler.getNodeAt(c)&&void 0!==(this||b).body.edges[(this||b).popup.popupTargetId]&&(w=(this||b).body.edges[(this||b).popup.popupTargetId].isOverlappingWith(f));!1===w&&((this||b).popupObj=void 0,(this||b).popup.hide(),(this||b).body.emitter.emit("hidePopup"))}}]),t}();ek("Set",(function(c){return function(){return c(this||b,arguments.length?arguments[0]:void 0)}}),Rk);var KO=o(bt.Set),QO=F,JO=ok,tC=jw.getWeakData,eC=Rw,iC=oi,oC=Y,nC=mt,rC=zw,sC=ge,aC=ir.set,hC=ir.getterFor,dC=Zd.find,lC=Zd.findIndex,cC=QO([].splice),uC=0,GO=function(c){return c.frozen||(c.frozen=new $O)},$O=function(){(this||b).entries=[]},ZO=function(c,f){return dC(c.entries,(function(c){return c[0]===f}))};$O.prototype={get:function(c){var f=ZO(this||b,c);if(f)return f[1]},has:function(c){return!!ZO(this||b,c)},set:function(c,f){var w=ZO(this||b,c);w?w[1]=f:(this||b).entries.push([c,f])},delete:function(c){var f=lC((this||b).entries,(function(f){return f[0]===c}));return~f&&cC((this||b).entries,f,1),!!~f}};var fC,pC={getConstructor:function(c,f,w,x){var _=c((function(c,b){eC(c,O),aC(c,{type:f,id:uC++,frozen:void 0}),oC(b)||rC(b,c[x],{that:c,AS_ENTRIES:w})})),O=_.prototype,C=hC(f),a=function(c,f,b){var w=C(c),x=tC(iC(f),!0);return!0===x?GO(w).set(f,b):x[w.id]=b,c};return JO(O,{delete:function(c){var f=C(this||b);if(!nC(c))return!1;var w=tC(c);return!0===w?GO(f).delete(c):w&&sC(w,f.id)&&delete w[f.id]},has:function(c){var f=C(this||b);if(!nC(c))return!1;var w=tC(c);return!0===w?GO(f).has(c):w&&sC(w,f.id)}}),JO(O,w?{get:function(c){var f=C(this||b);if(nC(c)){var w=tC(c);return!0===w?GO(f).get(c):w?w[f.id]:void 0}},set:function(c,f){return a(this||b,c,f)}}:{add:function(c){return a(this||b,c,!0)}}),_}},vC=kw,gC=x,yC=F,mC=ok,bC=jw,wC=ek,xC=pC,_C=mt,EC=ir.enforce,OC=s,CC=Ln,TC=Object,SC=Array.isArray,MC=TC.isExtensible,PC=TC.isFrozen,DC=TC.isSealed,IC=TC.freeze,BC=TC.seal,jC={},LC={},VC=!gC.ActiveXObject&&"ActiveXObject"in gC,kC=function(c){return function(){return c(this||b,arguments.length?arguments[0]:void 0)}},qC=wC("WeakMap",kC,xC),UC=qC.prototype,GC=yC(UC.set);if(CC)if(VC){fC=xC.getConstructor(kC,"WeakMap",!0),bC.enable();var ZC=yC(UC.delete),QC=yC(UC.has),$C=yC(UC.get);mC(UC,{delete:function(c){if(_C(c)&&!MC(c)){var f=EC(this||b);return f.frozen||(f.frozen=new fC),ZC(this||b,c)||f.frozen.delete(c)}return ZC(this||b,c)},has:function(c){if(_C(c)&&!MC(c)){var f=EC(this||b);return f.frozen||(f.frozen=new fC),QC(this||b,c)||f.frozen.has(c)}return QC(this||b,c)},get:function(c){if(_C(c)&&!MC(c)){var f=EC(this||b);return f.frozen||(f.frozen=new fC),QC(this||b,c)?$C(this||b,c):f.frozen.get(c)}return $C(this||b,c)},set:function(c,f){if(_C(c)&&!MC(c)){var w=EC(this||b);w.frozen||(w.frozen=new fC),QC(this||b,c)?GC(this||b,c,f):w.frozen.set(c,f)}else GC(this||b,c,f);return this||b}})}else vC&&OC((function(){var c=IC([]);return GC(new qC,c,1),!PC(c)}))&&mC(UC,{set:function(c,f){var w;return SC(c)&&(PC(c)?w=jC:DC(c)&&(w=LC)),GC(this||b,c,f),w===jC&&IC(c),w===LC&&BC(c),this||b}});var JC,nT,rT,hT,dT,lT=o(bt.WeakMap);function FC(c,f,b,w){if("a"===b&&!w)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof f?c!==f||!w:!f.has(c))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===b?w:"a"===b?w.call(c):w?w.value:f.get(c)}function zC(c,f,b,w,x){if("m"===w)throw new TypeError("Private method is not writable");if("a"===w&&!x)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof f?c!==f||!x:!f.has(c))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===w?x.call(c,b):x?x.value=b:f.set(c,b),b}function NC(c,f){var b=void 0!==Tf&&Dh(c)||c["@@iterator"];if(!b){if(Wf(c)||(b=function(c,f){var b;if(c){if("string"==typeof c)return AC(c,f);var w=Ff(b=Object.prototype.toString.call(c)).call(b,8,-1);"Object"===w&&c.constructor&&(w=c.constructor.name);return"Map"===w||"Set"===w?hh(c):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?AC(c,f):void 0}}(c))||f&&c&&"number"==typeof c.length){b&&(c=b);var w=0,n=function(){};return{s:n,n:function(){return w>=c.length?{done:!0}:{done:!1,value:c[w++]}},e:function(c){throw c},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var x,_=!0,O=!1;return{s:function(){b=b.call(c)},n:function(){var c=b.next();return _=c.done,c},e:function(c){O=!0,x=c},f:function(){try{_||null==b.return||b.return()}finally{if(O)throw x}}}}function AC(c,f){(null==f||f>c.length)&&(f=c.length);for(var b=0,w=new Array(f);b<f;b++)w[b]=c[b];return w}function RC(c,f){var b,w=new KO,x=NC(f);try{for(x.s();!(b=x.n()).done;){var _=b.value;c.has(_)||w.add(_)}}catch(c){x.e(c)}finally{x.f()}return w}"function"==typeof SuppressedError&&SuppressedError;var cT=function(){function t(){vh(this||b,t),JC.set(this||b,new KO),nT.set(this||b,new KO)}return wu(t,[{key:"size",get:function(){return FC(this||b,nT,"f").size}},{key:"add",value:function(){for(var c=arguments.length,f=new Array(c),w=0;w<c;w++)f[w]=arguments[w];for(var x=0,_=f;x<_.length;x++){var O=_[x];FC(this||b,nT,"f").add(O)}}},{key:"delete",value:function(){for(var c=arguments.length,f=new Array(c),w=0;w<c;w++)f[w]=arguments[w];for(var x=0,_=f;x<_.length;x++){var O=_[x];FC(this||b,nT,"f").delete(O)}}},{key:"clear",value:function(){FC(this||b,nT,"f").clear()}},{key:"getSelection",value:function(){return lf(FC(this||b,nT,"f"))}},{key:"getChanges",value:function(){return{added:lf(RC(FC(this||b,JC,"f"),FC(this||b,nT,"f"))),deleted:lf(RC(FC(this||b,nT,"f"),FC(this||b,JC,"f"))),previous:lf(new KO(FC(this||b,JC,"f"))),current:lf(new KO(FC(this||b,nT,"f")))}}},{key:"commit",value:function(){var c=this.getChanges();zC(this||b,JC,FC(this||b,nT,"f"),"f"),zC(this||b,nT,new KO(FC(this||b,JC,"f")),"f");var f,w=NC(c.added);try{for(w.s();!(f=w.n()).done;)f.value.select()}catch(c){w.e(c)}finally{w.f()}var x,_=NC(c.deleted);try{for(_.s();!(x=_.n()).done;)x.value.unselect()}catch(c){_.e(c)}finally{_.f()}return c}}]),t}();JC=new lT,nT=new lT;var uT=function(){function t(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};vh(this||b,t),rT.set(this||b,new cT),hT.set(this||b,new cT),dT.set(this||b,void 0),zC(this||b,dT,c,"f")}return wu(t,[{key:"sizeNodes",get:function(){return FC(this||b,rT,"f").size}},{key:"sizeEdges",get:function(){return FC(this||b,hT,"f").size}},{key:"getNodes",value:function(){return FC(this||b,rT,"f").getSelection()}},{key:"getEdges",value:function(){return FC(this||b,hT,"f").getSelection()}},{key:"addNodes",value:function(){var c;(c=FC(this||b,rT,"f")).add.apply(c,arguments)}},{key:"addEdges",value:function(){var c;(c=FC(this||b,hT,"f")).add.apply(c,arguments)}},{key:"deleteNodes",value:function(c){FC(this||b,rT,"f").delete(c)}},{key:"deleteEdges",value:function(c){FC(this||b,hT,"f").delete(c)}},{key:"clear",value:function(){FC(this||b,rT,"f").clear(),FC(this||b,hT,"f").clear()}},{key:"commit",value:function(){for(var c,f,w={nodes:FC(this||b,rT,"f").commit(),edges:FC(this||b,hT,"f").commit()},x=arguments.length,_=new Array(x),O=0;O<x;O++)_[O]=arguments[O];return(c=FC(this||b,dT,"f")).call.apply(c,Bf(f=[this||b,w]).call(f,_)),w}}]),t}();function HC(c,f){var b=void 0!==Tf&&Dh(c)||c["@@iterator"];if(!b){if(Wf(c)||(b=function(c,f){var b;if(c){if("string"==typeof c)return WC(c,f);var w=Ff(b=Object.prototype.toString.call(c)).call(b,8,-1);"Object"===w&&c.constructor&&(w=c.constructor.name);return"Map"===w||"Set"===w?hh(c):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?WC(c,f):void 0}}(c))||f&&c&&"number"==typeof c.length){b&&(c=b);var w=0,n=function(){};return{s:n,n:function(){return w>=c.length?{done:!0}:{done:!1,value:c[w++]}},e:function(c){throw c},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var x,_=!0,O=!1;return{s:function(){b=b.call(c)},n:function(){var c=b.next();return _=c.done,c},e:function(c){O=!0,x=c},f:function(){try{_||null==b.return||b.return()}finally{if(O)throw x}}}}function WC(c,f){(null==f||f>c.length)&&(f=c.length);for(var b=0,w=new Array(f);b<f;b++)w[b]=c[b];return w}rT=new lT,hT=new lT,dT=new lT;var fT=function(){function t(c,f){var w=this||b;vh(this||b,t),(this||b).body=c,(this||b).canvas=f,(this||b)._selectionAccumulator=new uT,(this||b).hoverObj={nodes:{},edges:{}},(this||b).options={},(this||b).defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},No((this||b).options,(this||b).defaultOptions),(this||b).body.emitter.on("_dataChanged",(function(){w.updateSelection()}))}return wu(t,[{key:"setOptions",value:function(c){void 0!==c&&Nm(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],(this||b).options,c)}},{key:"selectOnPoint",value:function(c){var f=!1;if(!0===(this||b).options.selectable){var w=this.getNodeAt(c)||this.getEdgeAt(c);this.unselectAll(),void 0!==w&&(f=this.selectObject(w)),(this||b).body.emitter.emit("_requestRedraw")}return f}},{key:"selectAdditionalOnPoint",value:function(c){var f=!1;if(!0===(this||b).options.selectable){var w=this.getNodeAt(c)||this.getEdgeAt(c);void 0!==w&&(f=!0,!0===w.isSelected()?this.deselectObject(w):this.selectObject(w),(this||b).body.emitter.emit("_requestRedraw"))}return f}},{key:"_initBaseEvent",value:function(c,f){var w={};return w.pointer={DOM:{x:f.x,y:f.y},canvas:(this||b).canvas.DOMtoCanvas(f)},w.event=c,w}},{key:"generateClickEvent",value:function(c,f,w,x){var _=arguments.length>4&&void 0!==arguments[4]&&arguments[4],O=this._initBaseEvent(f,w);if(!0===_)O.nodes=[],O.edges=[];else{var C=this.getSelection();O.nodes=C.nodes,O.edges=C.edges}void 0!==x&&(O.previousSelection=x),"click"==c&&(O.items=this.getClickedItems(w)),void 0!==f.controlEdge&&(O.controlEdge=f.controlEdge),(this||b).body.emitter.emit(c,O)}},{key:"selectObject",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(this||b).options.selectConnectedEdges;if(void 0!==c){if(c instanceof xE){var w;!0===f&&(w=(this||b)._selectionAccumulator).addEdges.apply(w,lf(c.edges));(this||b)._selectionAccumulator.addNodes(c)}else(this||b)._selectionAccumulator.addEdges(c);return!0}return!1}},{key:"deselectObject",value:function(c){!0===c.isSelected()&&(c.selected=!1,this._removeFromSelection(c))}},{key:"_getAllNodesOverlappingWith",value:function(c){for(var f=[],w=(this||b).body.nodes,x=0;x<(this||b).body.nodeIndices.length;x++){var _=(this||b).body.nodeIndices[x];w[_].isOverlappingWith(c)&&f.push(_)}return f}},{key:"_pointerToPositionObject",value:function(c){var f=(this||b).canvas.DOMtoCanvas(c);return{left:f.x-1,top:f.y+1,right:f.x+1,bottom:f.y-1}}},{key:"getNodeAt",value:function(c){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],w=this._pointerToPositionObject(c),x=this._getAllNodesOverlappingWith(w);return x.length>0?!0===f?(this||b).body.nodes[x[x.length-1]]:x[x.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(c,f){for(var w=(this||b).body.edges,x=0;x<(this||b).body.edgeIndices.length;x++){var _=(this||b).body.edgeIndices[x];w[_].isOverlappingWith(c)&&f.push(_)}}},{key:"_getAllEdgesOverlappingWith",value:function(c){var f=[];return this._getEdgesOverlappingWith(c,f),f}},{key:"getEdgeAt",value:function(c){for(var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],w=(this||b).canvas.DOMtoCanvas(c),x=10,_=null,O=(this||b).body.edges,C=0;C<(this||b).body.edgeIndices.length;C++){var T=(this||b).body.edgeIndices[C],S=O[T];if(S.connected){var M=S.from.x,P=S.from.y,D=S.to.x,I=S.to.y,B=S.edgeType.getDistanceToEdge(M,P,D,I,w.x,w.y);B<x&&(_=T,x=B)}}return null!==_?!0===f?(this||b).body.edges[_]:_:void 0}},{key:"_addToHover",value:function(c){c instanceof xE?(this||b).hoverObj.nodes[c.id]=c:(this||b).hoverObj.edges[c.id]=c}},{key:"_removeFromSelection",value:function(c){var f;c instanceof xE?((this||b)._selectionAccumulator.deleteNodes(c),(f=(this||b)._selectionAccumulator).deleteEdges.apply(f,lf(c.edges))):(this||b)._selectionAccumulator.deleteEdges(c)}},{key:"unselectAll",value:function(){(this||b)._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return(this||b)._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return(this||b)._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(c){for(var f=0;f<c.edges.length;f++){var b=c.edges[f];b.hover=!0,this._addToHover(b)}}},{key:"emitBlurEvent",value:function(c,f,w){var x=this._initBaseEvent(c,f);!0===w.hover&&(w.hover=!1,w instanceof xE?(x.node=w.id,(this||b).body.emitter.emit("blurNode",x)):(x.edge=w.id,(this||b).body.emitter.emit("blurEdge",x)))}},{key:"emitHoverEvent",value:function(c,f,w){var x=this._initBaseEvent(c,f),_=!1;return!1===w.hover&&(w.hover=!0,this._addToHover(w),_=!0,w instanceof xE?(x.node=w.id,(this||b).body.emitter.emit("hoverNode",x)):(x.edge=w.id,(this||b).body.emitter.emit("hoverEdge",x))),_}},{key:"hoverObject",value:function(c,f){var w=this.getNodeAt(f);void 0===w&&(w=this.getEdgeAt(f));var x=!1;for(var _ in(this||b).hoverObj.nodes)Object.prototype.hasOwnProperty.call((this||b).hoverObj.nodes,_)&&(void 0===w||w instanceof xE&&w.id!=_||w instanceof mO)&&(this.emitBlurEvent(c,f,(this||b).hoverObj.nodes[_]),delete(this||b).hoverObj.nodes[_],x=!0);for(var O in(this||b).hoverObj.edges)Object.prototype.hasOwnProperty.call((this||b).hoverObj.edges,O)&&(!0===x?((this||b).hoverObj.edges[O].hover=!1,delete(this||b).hoverObj.edges[O]):(void 0===w||w instanceof mO&&w.id!=O||w instanceof xE&&!w.hover)&&(this.emitBlurEvent(c,f,(this||b).hoverObj.edges[O]),delete(this||b).hoverObj.edges[O],x=!0));if(void 0!==w){var C=$f((this||b).hoverObj.edges).length,T=$f((this||b).hoverObj.nodes).length;(x||w instanceof mO&&0===C&&0===T||w instanceof xE&&0===C&&0===T)&&(x=this.emitHoverEvent(c,f,w)),w instanceof xE&&!0===(this||b).options.hoverConnectedEdges&&this._hoverConnectedEdges(w)}!0===x&&(this||b).body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){(this||b)._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(c,f){var w=!1,x=(this||b)._selectionAccumulator.commit(),_={nodes:x.nodes.previous,edges:x.edges.previous};x.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",f,c,_),w=!0),x.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",f,c,_),w=!0),x.nodes.added.length>0&&(this.generateClickEvent("selectNode",f,c),w=!0),x.edges.added.length>0&&(this.generateClickEvent("selectEdge",f,c),w=!0),!0===w&&this.generateClickEvent("select",f,c)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return(this||b)._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return(this||b)._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var c;return Kf(c=(this||b)._selectionAccumulator.getNodes()).call(c,(function(c){return c.id}))}},{key:"getSelectedEdgeIds",value:function(){var c;return Kf(c=(this||b)._selectionAccumulator.getEdges()).call(c,(function(c){return c.id}))}},{key:"setSelection",value:function(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!c||!c.nodes&&!c.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((f.unselectAll||void 0===f.unselectAll)&&this.unselectAll(),c.nodes){var w,x=HC(c.nodes);try{for(x.s();!(w=x.n()).done;){var _=w.value,O=(this||b).body.nodes[_];if(!O)throw new RangeError('Node with id "'+_+'" not found');this.selectObject(O,f.highlightEdges)}}catch(c){x.e(c)}finally{x.f()}}if(c.edges){var C,T=HC(c.edges);try{for(T.s();!(C=T.n()).done;){var S=C.value,M=(this||b).body.edges[S];if(!M)throw new RangeError('Edge with id "'+S+'" not found');this.selectObject(M)}}catch(c){T.e(c)}finally{T.f()}}(this||b).body.emitter.emit("_requestRedraw"),(this||b)._selectionAccumulator.commit()}},{key:"selectNodes",value:function(c){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!c||void 0===c.length)throw"Selection must be an array with ids";this.setSelection({nodes:c},{highlightEdges:f})}},{key:"selectEdges",value:function(c){if(!c||void 0===c.length)throw"Selection must be an array with ids";this.setSelection({edges:c})}},{key:"updateSelection",value:function(){for(var c in(this||b)._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call((this||b).body.nodes,c.id)||(this||b)._selectionAccumulator.deleteNodes(c);for(var f in(this||b)._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call((this||b).body.edges,f.id)||(this||b)._selectionAccumulator.deleteEdges(f)}},{key:"getClickedItems",value:function(c){for(var f=(this||b).canvas.DOMtoCanvas(c),w=[],x=(this||b).body.nodeIndices,_=(this||b).body.nodes,O=x.length-1;O>=0;O--){var C=_[x[O]].getItemsOnPoint(f);w.push.apply(w,C)}for(var T=(this||b).body.edgeIndices,S=(this||b).body.edges,M=T.length-1;M>=0;M--){var P=S[T[M]].getItemsOnPoint(f);w.push.apply(w,P)}return w}}]),t}(),pT=hd,vT=Math.floor,YC=function(c,f){var b=c.length,w=vT(b/2);return b<8?XC(c,f):KC(c,YC(pT(c,0,w),f),YC(pT(c,w),f),f)},XC=function(c,f){for(var b,w,x=c.length,_=1;_<x;){for(w=_,b=c[_];w&&f(c[w-1],b)>0;)c[w]=c[--w];w!==_++&&(c[w]=b)}return c},KC=function(c,f,b,w){for(var x=f.length,_=b.length,O=0,C=0;O<x||C<_;)c[O+C]=O<x&&C<_?w(f[O],b[C])<=0?f[O++]:b[C++]:O<x?f[O++]:b[C++];return c},gT=YC,yT=Et.match(/firefox\/(\d+)/i),bT=!!yT&&+yT[1],wT=/MSIE|Trident/.test(Et),kT=Et.match(/AppleWebKit\/(\d+)\./),xT=!!kT&&+kT[1],ET=Mi,OT=F,CT=It,TT=$t,ST=Hi,MT=cp,PT=un,DT=s,IT=gT,BT=Hf,FT=bT,zT=wT,NT=Bt,AT=xT,RT=[],jT=OT(RT.sort),LT=OT(RT.push),HT=DT((function(){RT.sort(void 0)})),WT=DT((function(){RT.sort(null)})),VT=BT("sort"),qT=!DT((function(){if(NT)return NT<70;if(!(FT&&FT>3)){if(zT)return!0;if(AT)return AT<603;var c,f,b,w,x="";for(c=65;c<76;c++){switch(f=String.fromCharCode(c),c){case 66:case 69:case 70:case 72:b=3;break;case 68:case 71:b=4;break;default:b=2}for(w=0;w<47;w++)RT.push({k:f+w,v:b})}for(RT.sort((function(c,f){return f.v-c.v})),w=0;w<RT.length;w++)f=RT[w].k.charAt(0),x.charAt(x.length-1)!==f&&(x+=f);return"DGBEFHACIJK"!==x}}));ET({target:"Array",proto:!0,forced:HT||!WT||!VT||!qT},{sort:function(c){void 0!==c&&CT(c);var f=TT(this||b);if(qT)return void 0===c?jT(f):jT(f,c);var w,x,_=[],O=ST(f);for(x=0;x<O;x++)x in f&&LT(_,f[x]);for(IT(_,function(c){return function(f,b){return void 0===b?-1:void 0===f?1:void 0!==c?+c(f,b)||0:PT(f)>PT(b)?1:-1}}(c)),w=ST(_),x=0;x<w;)f[x]=_[x++];for(;x<O;)MT(f,x++);return f}});var UT=zo("Array").sort,YT=_t,XT=UT,KT=Array.prototype,CS=function(c){var f=c.sort;return c===KT||YT(KT,c)&&f===KT.sort?XT:f},GT=o(CS),ZT=It,QT=$t,$T=ct,JT=Hi,tS=TypeError,BS=function(c){return function(f,b,w,x){ZT(b);var _=QT(f),O=$T(_),C=JT(_),T=c?C-1:0,S=c?-1:1;if(w<2)for(;;){if(T in O){x=O[T],T+=S;break}if(T+=S,c?T<0:C<=T)throw new tS("Reduce of empty array with no initial value")}for(;c?T>=0:C>T;T+=S)T in O&&(x=b(x,O[T],T,_));return x}},eS={left:BS(!1),right:BS(!0)},iS="process"===k(x.process),oS=eS.left;Mi({target:"Array",proto:!0,forced:!iS&&Bt>79&&Bt<83||!Hf("reduce")},{reduce:function(c){var f=arguments.length;return oS(this||b,c,f,f>1?arguments[1]:void 0)}});var nS=zo("Array").reduce,rS=_t,sS=nS,aS=Array.prototype,HS=function(c){var f=c.reduce;return c===aS||rS(aS,c)&&f===aS.reduce?sS:f},hS=o(HS);function VS(c){var f=function(){if("undefined"==typeof Reflect||!q_)return!1;if(q_.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(q_(Boolean,[],(function(){}))),!0}catch(c){return!1}}();return function(){var w,x=px(c);if(f){var _=px(this||b).constructor;w=q_(x,arguments,_)}else w=x.apply(this||b,arguments);return ux(this||b,w)}}var dS=function(){function t(){vh(this||b,t)}return wu(t,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(c){return this.fake_use(c),this.abstract()}},{key:"setPosition",value:function(c,f){var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(c,f,b),this.abstract()}},{key:"getTreeSize",value:function(c){return this.fake_use(c),this.abstract()}},{key:"sort",value:function(c){this.fake_use(c),this.abstract()}},{key:"fix",value:function(c,f){this.fake_use(c,f),this.abstract()}},{key:"shift",value:function(c,f){this.fake_use(c,f),this.abstract()}}]),t}(),lS=function(c){cx(i,c);var f=VS(i);function i(c){var w;return vh(this||b,i),(w=f.call(this||b)).layout=c,w}return wu(i,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(c){return c.x}},{key:"setPosition",value:function(c,f){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==w&&(this||b).layout.hierarchical.addToOrdering(c,w),c.x=f}},{key:"getTreeSize",value:function(c){var f=(this||b).layout.hierarchical.getTreeSize((this||b).layout.body.nodes,c);return{min:f.min_x,max:f.max_x}}},{key:"sort",value:function(c){GT(c).call(c,(function(c,f){return c.x-f.x}))}},{key:"fix",value:function(c,f){c.y=(this||b).layout.options.hierarchical.levelSeparation*f,c.options.fixed.y=!0}},{key:"shift",value:function(c,f){(this||b).layout.body.nodes[c].x+=f}}]),i}(dS),cS=function(c){cx(i,c);var f=VS(i);function i(c){var w;return vh(this||b,i),(w=f.call(this||b)).layout=c,w}return wu(i,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(c){return c.y}},{key:"setPosition",value:function(c,f){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==w&&(this||b).layout.hierarchical.addToOrdering(c,w),c.y=f}},{key:"getTreeSize",value:function(c){var f=(this||b).layout.hierarchical.getTreeSize((this||b).layout.body.nodes,c);return{min:f.min_y,max:f.max_y}}},{key:"sort",value:function(c){GT(c).call(c,(function(c,f){return c.y-f.y}))}},{key:"fix",value:function(c,f){c.x=(this||b).layout.options.hierarchical.levelSeparation*f,c.options.fixed.x=!0}},{key:"shift",value:function(c,f){(this||b).layout.body.nodes[c].y+=f}}]),i}(dS),uS=Zd.every;Mi({target:"Array",proto:!0,forced:!Hf("every")},{every:function(c){return uS(this||b,c,arguments.length>1?arguments[1]:void 0)}});var fS=zo("Array").every,pS=_t,vS=fS,gS=Array.prototype,QS=function(c){var f=c.every;return c===gS||pS(gS,c)&&f===gS.every?vS:f},yS=o(QS);function tT(c,f){var b=void 0!==Tf&&Dh(c)||c["@@iterator"];if(!b){if(Wf(c)||(b=function(c,f){var b;if(c){if("string"==typeof c)return eT(c,f);var w=Ff(b=Object.prototype.toString.call(c)).call(b,8,-1);"Object"===w&&c.constructor&&(w=c.constructor.name);return"Map"===w||"Set"===w?hh(c):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?eT(c,f):void 0}}(c))||f&&c&&"number"==typeof c.length){b&&(c=b);var w=0,n=function(){};return{s:n,n:function(){return w>=c.length?{done:!0}:{done:!1,value:c[w++]}},e:function(c){throw c},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var x,_=!0,O=!1;return{s:function(){b=b.call(c)},n:function(){var c=b.next();return _=c.done,c},e:function(c){O=!0,x=c},f:function(){try{_||null==b.return||b.return()}finally{if(O)throw x}}}}function eT(c,f){(null==f||f>c.length)&&(f=c.length);for(var b=0,w=new Array(f);b<f;b++)w[b]=c[b];return w}function iT(c,f){var b=new KO;return vp(c).call(c,(function(c){var f;vp(f=c.edges).call(f,(function(c){c.connected&&b.add(c)}))})),vp(b).call(b,(function(c){var b=c.from.id,w=c.to.id;null==f[b]&&(f[b]=0),(null==f[w]||f[b]>=f[w])&&(f[w]=f[b]+1)})),f}function oT(c,f,b,w){var x,_,O=lg(null),C=hS(x=lf(v_(w).call(w))).call(x,(function(c,f){return c+1+f.edges.length}),0),T=b+"Id",S="to"===b?1:-1,M=tT(w);try{var P,u=function(){var x=df(_.value,2),M=x[0],P=x[1];if(!w.has(M)||!c(P))return 0;O[M]=0;for(var D,I,B=[P],F=0,g=function(){var c,x;if(!w.has(M))return 0;var _=O[D.id]+S;if(vp(c=Cv(x=D.edges).call(x,(function(c){return c.connected&&c.to!==c.from&&c[b]!==D&&w.has(c.toId)&&w.has(c.fromId)}))).call(c,(function(c){var w=c[T],x=O[w];(null==x||f(_,x))&&(O[w]=_,B.push(c[b]))})),F>C)return{v:{v:iT(w,O)}};++F};D=B.pop();)if(0!==(I=g())&&I)return I.v};for(M.s();!(_=M.n()).done;)if(0!==(P=u())&&P)return P.v}catch(c){M.e(c)}finally{M.f()}return O}var mS=function(){function t(){vh(this||b,t),(this||b).childrenReference={},(this||b).parentReference={},(this||b).trees={},(this||b).distributionOrdering={},(this||b).levels={},(this||b).distributionIndex={},(this||b).isTree=!1,(this||b).treeIndex=-1}return wu(t,[{key:"addRelation",value:function(c,f){void 0===(this||b).childrenReference[c]&&((this||b).childrenReference[c]=[]),(this||b).childrenReference[c].push(f),void 0===(this||b).parentReference[f]&&((this||b).parentReference[f]=[]),(this||b).parentReference[f].push(c)}},{key:"checkIfTree",value:function(){for(var c in(this||b).parentReference)if((this||b).parentReference[c].length>1)return void((this||b).isTree=!1);(this||b).isTree=!0}},{key:"numTrees",value:function(){return(this||b).treeIndex+1}},{key:"setTreeIndex",value:function(c,f){void 0!==f&&void 0===(this||b).trees[c.id]&&((this||b).trees[c.id]=f,(this||b).treeIndex=Math.max(f,(this||b).treeIndex))}},{key:"ensureLevel",value:function(c){void 0===(this||b).levels[c]&&((this||b).levels[c]=0)}},{key:"getMaxLevel",value:function(c){var f=this||b,w={};return function t(c){if(void 0!==w[c])return w[c];var b=f.levels[c];if(f.childrenReference[c]){var x=f.childrenReference[c];if(x.length>0)for(var _=0;_<x.length;_++)b=Math.max(b,t(x[_]))}return w[c]=b,b}(c)}},{key:"levelDownstream",value:function(c,f){void 0===(this||b).levels[f.id]&&(void 0===(this||b).levels[c.id]&&((this||b).levels[c.id]=0),(this||b).levels[f.id]=(this||b).levels[c.id]+1)}},{key:"setMinLevelToZero",value:function(c){var f=1e9;for(var w in c)Object.prototype.hasOwnProperty.call(c,w)&&void 0!==(this||b).levels[w]&&(f=Math.min((this||b).levels[w],f));for(var x in c)Object.prototype.hasOwnProperty.call(c,x)&&void 0!==(this||b).levels[x]&&((this||b).levels[x]-=f)}},{key:"getTreeSize",value:function(c,f){var w=1e9,x=-1e9,_=1e9,O=-1e9;for(var C in(this||b).trees)if(Object.prototype.hasOwnProperty.call((this||b).trees,C)&&(this||b).trees[C]===f){var T=c[C];w=Math.min(T.x,w),x=Math.max(T.x,x),_=Math.min(T.y,_),O=Math.max(T.y,O)}return{min_x:w,max_x:x,min_y:_,max_y:O}}},{key:"hasSameParent",value:function(c,f){var w=(this||b).parentReference[c.id],x=(this||b).parentReference[f.id];if(void 0===w||void 0===x)return!1;for(var _=0;_<w.length;_++)for(var O=0;O<x.length;O++)if(w[_]==x[O])return!0;return!1}},{key:"inSameSubNetwork",value:function(c,f){return(this||b).trees[c.id]===(this||b).trees[f.id]}},{key:"getLevels",value:function(){return $f((this||b).distributionOrdering)}},{key:"addToOrdering",value:function(c,f){void 0===(this||b).distributionOrdering[f]&&((this||b).distributionOrdering[f]=[]);var w=!1,x=(this||b).distributionOrdering[f];for(var _ in x)if(x[_]===c){w=!0;break}w||((this||b).distributionOrdering[f].push(c),(this||b).distributionIndex[c.id]=(this||b).distributionOrdering[f].length-1)}}]),t}(),bS=function(){function t(c){vh(this||b,t),(this||b).body=c,this._resetRNG(Math.random()+":"+ip()),(this||b).setPhysics=!1,(this||b).options={},(this||b).optionsBackup={physics:{}},(this||b).defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},No((this||b).options,(this||b).defaultOptions),this.bindEventListeners()}return wu(t,[{key:"bindEventListeners",value:function(){var c=this||b;(this||b).body.emitter.on("_dataChanged",(function(){c.setupHierarchicalLayout()})),(this||b).body.emitter.on("_dataLoaded",(function(){c.layoutNetwork()})),(this||b).body.emitter.on("_resetHierarchicalLayout",(function(){c.setupHierarchicalLayout()})),(this||b).body.emitter.on("_adjustEdgesForHierarchicalLayout",(function(){if(!0===c.options.hierarchical.enabled){var f=c.direction.curveType();c.body.emitter.emit("_forceDisableDynamicCurves",f,!1)}}))}},{key:"setOptions",value:function(c,f){if(void 0!==c){var w=(this||b).options.hierarchical,x=w.enabled;if(Nm(["randomSeed","improvedLayout","clusterThreshold"],(this||b).options,c),Qm((this||b).options,c,"hierarchical"),void 0!==c.randomSeed&&this._resetRNG(c.randomSeed),!0===w.enabled)return!0===x&&(this||b).body.emitter.emit("refresh",!0),"RL"===w.direction||"DU"===w.direction?w.levelSeparation>0&&(w.levelSeparation*=-1):w.levelSeparation<0&&(w.levelSeparation*=-1),this.setDirectionStrategy(),(this||b).body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(f);if(!0===x)return(this||b).body.emitter.emit("refresh"),Rm(f,(this||b).optionsBackup)}return f}},{key:"_resetRNG",value:function(c){(this||b).initialRandomSeed=c,(this||b)._rng=Em((this||b).initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(c){if(!0===(this||b).options.hierarchical.enabled){var f=(this||b).optionsBackup.physics;void 0===c.physics||!0===c.physics?(c.physics={enabled:void 0===f.enabled||f.enabled,solver:"hierarchicalRepulsion"},f.enabled=void 0===f.enabled||f.enabled,f.solver=f.solver||"barnesHut"):"object"===gu(c.physics)?(f.enabled=void 0===c.physics.enabled||c.physics.enabled,f.solver=c.physics.solver||"barnesHut",c.physics.solver="hierarchicalRepulsion"):!1!==c.physics&&(f.solver="barnesHut",c.physics={solver:"hierarchicalRepulsion"});var w=(this||b).direction.curveType();if(void 0===c.edges)(this||b).optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},c.edges={smooth:!1};else if(void 0===c.edges.smooth)(this||b).optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},c.edges.smooth=!1;else if("boolean"==typeof c.edges.smooth)(this||b).optionsBackup.edges={smooth:c.edges.smooth},c.edges.smooth={enabled:c.edges.smooth,type:w};else{var x=c.edges.smooth;void 0!==x.type&&"dynamic"!==x.type&&(w=x.type),(this||b).optionsBackup.edges={smooth:{enabled:void 0===x.enabled||x.enabled,type:void 0===x.type?"dynamic":x.type,roundness:void 0===x.roundness?.5:x.roundness,forceDirection:void 0!==x.forceDirection&&x.forceDirection}},c.edges.smooth={enabled:void 0===x.enabled||x.enabled,type:w,roundness:void 0===x.roundness?.5:x.roundness,forceDirection:void 0!==x.forceDirection&&x.forceDirection}}(this||b).body.emitter.emit("_forceDisableDynamicCurves",w)}return c}},{key:"positionInitially",value:function(c){if(!0!==(this||b).options.hierarchical.enabled){this._resetRNG((this||b).initialRandomSeed);for(var f=c.length+50,w=0;w<c.length;w++){var x=c[w],_=2*Math.PI*this._rng();void 0===x.x&&(x.x=f*Math.cos(_)),void 0===x.y&&(x.y=f*Math.sin(_))}}}},{key:"layoutNetwork",value:function(){if(!0!==(this||b).options.hierarchical.enabled&&!0===(this||b).options.improvedLayout){for(var c=(this||b).body.nodeIndices,f=0,w=0;w<c.length;w++)!0===(this||b).body.nodes[c[w]].predefinedPosition&&(f+=1);if(f<.5*c.length){var x=0,_=(this||b).options.clusterThreshold,O={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(c.length>_){for(var C=c.length;c.length>_&&x<=10;){x+=1;var T=c.length;if(x%3==0?(this||b).body.modules.clustering.clusterBridges(O):(this||b).body.modules.clustering.clusterOutliers(O),T==c.length&&x%3!=0)return this._declusterAll(),(this||b).body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}(this||b).body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*C)})}x>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),(this||b).body.modules.kamadaKawai.solve(c,(this||b).body.edgeIndices,!0),this._shiftToCenter();for(var S=0;S<c.length;S++){var M=(this||b).body.nodes[c[S]];!1===M.predefinedPosition&&(M.x+=70*(.5-this._rng()),M.y+=70*(.5-this._rng()))}this._declusterAll(),(this||b).body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var c=jO.getRangeCore((this||b).body.nodes,(this||b).body.nodeIndices),f=jO.findCenter(c),w=0;w<(this||b).body.nodeIndices.length;w++){var x=(this||b).body.nodes[(this||b).body.nodeIndices[w]];x.x-=f.x,x.y-=f.y}}},{key:"_declusterAll",value:function(){for(var c=!0;!0===c;){c=!1;for(var f=0;f<(this||b).body.nodeIndices.length;f++)!0===(this||b).body.nodes[(this||b).body.nodeIndices[f]].isCluster&&(c=!0,(this||b).body.modules.clustering.openCluster((this||b).body.nodeIndices[f],{},!1));!0===c&&(this||b).body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return(this||b).initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===(this||b).options.hierarchical.enabled&&(this||b).body.nodeIndices.length>0){var c,f,w=!1,x=!1;for(f in(this||b).lastNodeOnLevel={},(this||b).hierarchical=new mS,(this||b).body.nodes)Object.prototype.hasOwnProperty.call((this||b).body.nodes,f)&&(void 0!==(c=(this||b).body.nodes[f]).options.level?(w=!0,(this||b).hierarchical.levels[f]=c.options.level):x=!0);if(!0===x&&!0===w)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===x){var _=(this||b).options.hierarchical.sortMethod;"hubsize"===_?this._determineLevelsByHubsize():"directed"===_?this._determineLevelsDirected():"custom"===_&&this._determineLevelsCustomCallback()}for(var O in(this||b).body.nodes)Object.prototype.hasOwnProperty.call((this||b).body.nodes,O)&&(this||b).hierarchical.ensureLevel(O);var C=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(C),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var c=this||b,f=!1,w={},o=function(f,b){var w=c.hierarchical.trees;for(var x in w)Object.prototype.hasOwnProperty.call(w,x)&&w[x]===f&&c.direction.shift(x,b)},n=function(){for(var f=[],b=0;b<c.hierarchical.numTrees();b++)f.push(c.direction.getTreeSize(b));return f},x=function e(f,b){if(!b[f.id]&&(b[f.id]=!0,c.hierarchical.childrenReference[f.id])){var w=c.hierarchical.childrenReference[f.id];if(w.length>0)for(var x=0;x<w.length;x++)e(c.body.nodes[w[x]],b)}},s=function(f){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e9,w=1e9,x=1e9,_=1e9,O=-1e9;for(var C in f)if(Object.prototype.hasOwnProperty.call(f,C)){var T=c.body.nodes[C],S=c.hierarchical.levels[T.id],M=c.direction.getPosition(T),P=df(c._getSpaceAroundNode(T,f),2),D=P[0],I=P[1];w=Math.min(D,w),x=Math.min(I,x),S<=b&&(_=Math.min(M,_),O=Math.max(M,O))}return[_,O,w,x]},a=function(f,b,w){for(var x=c.hierarchical,_=0;_<b.length;_++){var O=b[_],C=x.distributionOrdering[O];if(C.length>1)for(var T=0;T<C.length-1;T++){var S=C[T],M=C[T+1];x.hasSameParent(S,M)&&x.inSameSubNetwork(S,M)&&f(S,M,w)}}},h=function(b,w){var _=arguments.length>2&&void 0!==arguments[2]&&arguments[2],O=c.direction.getPosition(b),C=c.direction.getPosition(w),T=Math.abs(C-O),S=c.options.hierarchical.nodeSpacing;if(T>S){var M={},P={};x(b,M),x(w,P);var D=function(f,b){var w=c.hierarchical.getMaxLevel(f.id),x=c.hierarchical.getMaxLevel(b.id);return Math.min(w,x)}(b,w),I=s(M,D),B=s(P,D),F=I[1],z=B[0],N=B[2];if(Math.abs(F-z)>S){var A=F-z+S;A<-N+S&&(A=-N+S),A<0&&(c._shiftBlock(w.id,A),f=!0,!0===_&&c._centerParent(w))}}},d=function(b,_){for(var O=_.id,C=_.edges,T=c.hierarchical.levels[_.id],S=c.options.hierarchical.levelSeparation*c.options.hierarchical.levelSeparation,M={},P=[],D=0;D<C.length;D++){var I=C[D];if(I.toId!=I.fromId){var B=I.toId==O?I.from:I.to;M[C[D].id]=B,c.hierarchical.levels[B.id]<T&&P.push(I)}}var g=function(f,b){for(var w=0,x=0;x<b.length;x++)if(void 0!==M[b[x].id]){var _=c.direction.getPosition(M[b[x].id])-f;w+=_/Math.sqrt(_*_+S)}return w},y=function(f,b){for(var w=0,x=0;x<b.length;x++)if(void 0!==M[b[x].id]){var _=c.direction.getPosition(M[b[x].id])-f;w-=S*Math.pow(_*_+S,-1.5)}return w},m=function(f,b){for(var w=c.direction.getPosition(_),x={},O=0;O<f;O++){var C=g(w,b),T=y(w,b);if(void 0!==x[w-=Math.max(-40,Math.min(40,Math.round(C/T)))])break;x[w]=O}return w},F=m(b,P);!function(b){var O=c.direction.getPosition(_);if(void 0===w[_.id]){var C={};x(_,C),w[_.id]=C}var T=s(w[_.id]),S=T[2],M=T[3],P=b-O,D=0;P>0?D=Math.min(P,M-c.options.hierarchical.nodeSpacing):P<0&&(D=-Math.min(-P,S-c.options.hierarchical.nodeSpacing)),0!=D&&(c._shiftBlock(_.id,D),f=!0)}(F),function(b){var w=c.direction.getPosition(_),x=df(c._getSpaceAroundNode(_),2),O=x[0],C=x[1],T=b-w,S=w;T>0?S=Math.min(w+(C-c.options.hierarchical.nodeSpacing),b):T<0&&(S=Math.max(w-(O-c.options.hierarchical.nodeSpacing),b)),S!==w&&(c.direction.setPosition(_,S),f=!0)}(F=m(b,C))};!0===(this||b).options.hierarchical.blockShifting&&(function(b){var w=c.hierarchical.getLevels();w=Ep(w).call(w);for(var x=0;x<b&&(f=!1,a(h,w,!0),!0===f);x++);}(5),function(){for(var f in c.body.nodes)Object.prototype.hasOwnProperty.call(c.body.nodes,f)&&c._centerParent(c.body.nodes[f])}()),!0===(this||b).options.hierarchical.edgeMinimization&&function(b){var w=c.hierarchical.getLevels();w=Ep(w).call(w);for(var x=0;x<b;x++){f=!1;for(var _=0;_<w.length;_++)for(var O=w[_],C=c.hierarchical.distributionOrdering[O],T=0;T<C.length;T++)d(1e3,C[T]);if(!0!==f)break}}(20),!0===(this||b).options.hierarchical.parentCentralization&&function(){var f=c.hierarchical.getLevels();f=Ep(f).call(f);for(var b=0;b<f.length;b++)for(var w=f[b],x=c.hierarchical.distributionOrdering[w],_=0;_<x.length;_++)c._centerParent(x[_])}(),function(){for(var f=n(),b=0,w=0;w<f.length-1;w++)b+=f[w].max-f[w+1].min+c.options.hierarchical.treeSpacing,o(w+1,b)}()}},{key:"_getSpaceAroundNode",value:function(c,f){var w=!0;void 0===f&&(w=!1);var x=(this||b).hierarchical.levels[c.id];if(void 0!==x){var _=(this||b).hierarchical.distributionIndex[c.id],O=(this||b).direction.getPosition(c),C=(this||b).hierarchical.distributionOrdering[x],T=1e9,S=1e9;if(0!==_){var M=C[_-1];(!0===w&&void 0===f[M.id]||!1===w)&&(T=O-(this||b).direction.getPosition(M))}if(_!=C.length-1){var P=C[_+1];if(!0===w&&void 0===f[P.id]||!1===w){var D=(this||b).direction.getPosition(P);S=Math.min(S,D-O)}}return[T,S]}return[0,0]}},{key:"_centerParent",value:function(c){if((this||b).hierarchical.parentReference[c.id])for(var f=(this||b).hierarchical.parentReference[c.id],w=0;w<f.length;w++){var x=f[w],_=(this||b).body.nodes[x],O=(this||b).hierarchical.childrenReference[x];if(void 0!==O){var C=this._getCenterPosition(O),T=(this||b).direction.getPosition(_),S=df(this._getSpaceAroundNode(_),2),M=S[0],P=S[1],D=T-C;(D<0&&Math.abs(D)<P-(this||b).options.hierarchical.nodeSpacing||D>0&&Math.abs(D)<M-(this||b).options.hierarchical.nodeSpacing)&&(this||b).direction.setPosition(_,C)}}}},{key:"_placeNodesByHierarchy",value:function(c){for(var f in(this||b).positionedNodes={},c)if(Object.prototype.hasOwnProperty.call(c,f)){var w,x=$f(c[f]);x=this._indexArrayToNodes(x),GT(w=(this||b).direction).call(w,x);for(var _=0,O=0;O<x.length;O++){var C=x[O];if(void 0===(this||b).positionedNodes[C.id]){var T=(this||b).options.hierarchical.nodeSpacing,S=T*_;_>0&&(S=(this||b).direction.getPosition(x[O-1])+T),(this||b).direction.setPosition(C,S,f),this._validatePositionAndContinue(C,f,S),_++}}}}},{key:"_placeBranchNodes",value:function(c,f){var w,x=(this||b).hierarchical.childrenReference[c];if(void 0!==x){for(var _=[],O=0;O<x.length;O++)_.push((this||b).body.nodes[x[O]]);GT(w=(this||b).direction).call(w,_);for(var C=0;C<_.length;C++){var T=_[C],S=(this||b).hierarchical.levels[T.id];if(!(S>f&&void 0===(this||b).positionedNodes[T.id]))return;var M=(this||b).options.hierarchical.nodeSpacing,P=void 0;P=0===C?(this||b).direction.getPosition((this||b).body.nodes[c]):(this||b).direction.getPosition(_[C-1])+M,(this||b).direction.setPosition(T,P,S),this._validatePositionAndContinue(T,S,P)}var D=this._getCenterPosition(_);(this||b).direction.setPosition((this||b).body.nodes[c],D,f)}}},{key:"_validatePositionAndContinue",value:function(c,f,w){if((this||b).hierarchical.isTree){if(void 0!==(this||b).lastNodeOnLevel[f]){var x=(this||b).direction.getPosition((this||b).body.nodes[(this||b).lastNodeOnLevel[f]]);if(w-x<(this||b).options.hierarchical.nodeSpacing){var _=x+(this||b).options.hierarchical.nodeSpacing-w,O=this._findCommonParent((this||b).lastNodeOnLevel[f],c.id);this._shiftBlock(O.withChild,_)}}(this||b).lastNodeOnLevel[f]=c.id,(this||b).positionedNodes[c.id]=!0,this._placeBranchNodes(c.id,f)}}},{key:"_indexArrayToNodes",value:function(c){for(var f=[],w=0;w<c.length;w++)f.push((this||b).body.nodes[c[w]]);return f}},{key:"_getDistribution",value:function(){var c,f,w={};for(c in(this||b).body.nodes)if(Object.prototype.hasOwnProperty.call((this||b).body.nodes,c)){f=(this||b).body.nodes[c];var x=void 0===(this||b).hierarchical.levels[c]?0:(this||b).hierarchical.levels[c];(this||b).direction.fix(f,x),void 0===w[x]&&(w[x]={}),w[x][c]=f}return w}},{key:"_getActiveEdges",value:function(c){var f=this||b,w=[];return Hm(c.edges,(function(c){var b;-1!==ag(b=f.body.edgeIndices).call(b,c.id)&&w.push(c)})),w}},{key:"_getHubSizes",value:function(){var c=this||b,f={};Hm((this||b).body.nodeIndices,(function(b){var w=c.body.nodes[b],x=c._getActiveEdges(w).length;f[x]=!0}));var w=[];return Hm(f,(function(c){w.push(Number(c))})),GT(w).call(w,(function(c,f){return f-c})),w}},{key:"_determineLevelsByHubsize",value:function(){for(var c=this||b,e=function(f,b){c.hierarchical.levelDownstream(f,b)},f=this._getHubSizes(),o=function(){var b=f[w];if(0===b)return 1;Hm(c.body.nodeIndices,(function(f){var w=c.body.nodes[f];b===c._getActiveEdges(w).length&&c._crawlNetwork(e,f)}))},w=0;w<f.length&&!o();++w);}},{key:"_determineLevelsCustomCallback",value:function(){var c=this||b;this._crawlNetwork((function(f,b,w){var x=c.hierarchical.levels[f.id];void 0===x&&(x=c.hierarchical.levels[f.id]=1e5);var _=(jO.cloneOptions(f,"node"),jO.cloneOptions(b,"node"),void jO.cloneOptions(w,"edge"));c.hierarchical.levels[b.id]=x+_})),(this||b).hierarchical.setMinLevelToZero((this||b).body.nodes)}},{key:"_determineLevelsDirected",value:function(){var c,f=this||b,w=hS(c=(this||b).body.nodeIndices).call(c,(function(c,b){return c.set(b,f.body.nodes[b]),c}),new jk);"roots"===(this||b).options.hierarchical.shakeTowards?(this||b).hierarchical.levels=function(c){return oT((function(f){var b,w;return yS(b=Cv(w=f.edges).call(w,(function(f){return c.has(f.toId)}))).call(b,(function(c){return c.from===f}))}),(function(c,f){return f<c}),"to",c)}(w):(this||b).hierarchical.levels=function(c){return oT((function(f){var b,w;return yS(b=Cv(w=f.edges).call(w,(function(f){return c.has(f.toId)}))).call(b,(function(c){return c.to===f}))}),(function(c,f){return f>c}),"from",c)}(w),(this||b).hierarchical.setMinLevelToZero((this||b).body.nodes)}},{key:"_generateMap",value:function(){var c=this||b;this._crawlNetwork((function(f,b){c.hierarchical.levels[b.id]>c.hierarchical.levels[f.id]&&c.hierarchical.addRelation(f.id,b.id)})),(this||b).hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var c=this||b,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},w=arguments.length>1?arguments[1]:void 0,x={},_=function i(b,w){if(void 0===x[b.id]){var _;c.hierarchical.setTreeIndex(b,w),x[b.id]=!0;for(var O=c._getActiveEdges(b),C=0;C<O.length;C++){var T=O[C];!0===T.connected&&(_=T.toId==b.id?T.from:T.to,b.id!=_.id&&(f(b,_,T),i(_,w)))}}};if(void 0===w)for(var O=0,C=0;C<(this||b).body.nodeIndices.length;C++){var T=(this||b).body.nodeIndices[C];void 0===x[T]&&(_((this||b).body.nodes[T],O),O+=1)}else{var S=(this||b).body.nodes[w];if(void 0===S)return void console.error("Node not found:",w);_(S)}}},{key:"_shiftBlock",value:function(c,f){var w=this||b,x={};!function t(c){if(!x[c]){x[c]=!0,w.direction.shift(c,f);var b=w.hierarchical.childrenReference[c];if(void 0!==b)for(var _=0;_<b.length;_++)t(b[_])}}(c)}},{key:"_findCommonParent",value:function(c,f){var w=this||b,x={};return function t(c,f){var b=w.hierarchical.parentReference[f];if(void 0!==b)for(var x=0;x<b.length;x++){var _=b[x];c[_]=!0,t(c,_)}}(x,c),function t(c,f){var b=w.hierarchical.parentReference[f];if(void 0!==b)for(var x=0;x<b.length;x++){var _=b[x];if(void 0!==c[_])return{foundParent:_,withChild:f};var O=t(c,_);if(null!==O.foundParent)return O}return{foundParent:null,withChild:f}}(x,f)}},{key:"setDirectionStrategy",value:function(){var c="UD"===(this||b).options.hierarchical.direction||"DU"===(this||b).options.hierarchical.direction;(this||b).direction=c?new lS(this||b):new cS(this||b)}},{key:"_getCenterPosition",value:function(c){for(var f=1e9,w=-1e9,x=0;x<c.length;x++){var _=void 0;if(void 0!==c[x].id)_=c[x];else{var O=c[x];_=(this||b).body.nodes[O]}var C=(this||b).direction.getPosition(_);f=Math.min(f,C),w=Math.max(w,C)}return.5*(f+w)}}]),t}();function sT(c,f){var b=void 0!==Tf&&Dh(c)||c["@@iterator"];if(!b){if(Wf(c)||(b=function(c,f){var b;if(c){if("string"==typeof c)return aT(c,f);var w=Ff(b=Object.prototype.toString.call(c)).call(b,8,-1);"Object"===w&&c.constructor&&(w=c.constructor.name);return"Map"===w||"Set"===w?hh(c):"Arguments"===w||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?aT(c,f):void 0}}(c))||f&&c&&"number"==typeof c.length){b&&(c=b);var w=0,n=function(){};return{s:n,n:function(){return w>=c.length?{done:!0}:{done:!1,value:c[w++]}},e:function(c){throw c},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var x,_=!0,O=!1;return{s:function(){b=b.call(c)},n:function(){var c=b.next();return _=c.done,c},e:function(c){O=!0,x=c},f:function(){try{_||null==b.return||b.return()}finally{if(O)throw x}}}}function aT(c,f){(null==f||f>c.length)&&(f=c.length);for(var b=0,w=new Array(f);b<f;b++)w[b]=c[b];return w}var wS=function(){function t(c,f,w,x){var _,O,C=this||b;vh(this||b,t),(this||b).body=c,(this||b).canvas=f,(this||b).selectionHandler=w,(this||b).interactionHandler=x,(this||b).editMode=!1,(this||b).manipulationDiv=void 0,(this||b).editModeDiv=void 0,(this||b).closeDiv=void 0,(this||b)._domEventListenerCleanupQueue=[],(this||b).temporaryUIFunctions={},(this||b).temporaryEventFunctions=[],(this||b).touchTime=0,(this||b).temporaryIds={nodes:[],edges:[]},(this||b).guiEnabled=!1,(this||b).inMode=!1,(this||b).selectedControlNode=void 0,(this||b).options={},(this||b).defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},No((this||b).options,(this||b).defaultOptions),(this||b).body.emitter.on("destroy",(function(){C._clean()})),(this||b).body.emitter.on("_dataChanged",dn(_=(this||b)._restore).call(_,this||b)),(this||b).body.emitter.on("_resetData",dn(O=(this||b)._restore).call(O,this||b))}return wu(t,[{key:"_restore",value:function(){!1!==(this||b).inMode&&(!0===(this||b).options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(c,f,w){void 0!==f&&(void 0!==f.locale?(this||b).options.locale=f.locale:(this||b).options.locale=w.locale,void 0!==f.locales?(this||b).options.locales=f.locales:(this||b).options.locales=w.locales),void 0!==c&&("boolean"==typeof c?(this||b).options.enabled=c:((this||b).options.enabled=!0,Rm((this||b).options,c)),!0===(this||b).options.initiallyActive&&((this||b).editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===(this||b).editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){(this||b).editMode=!0,this._clean(),!0===(this||b).guiEnabled&&((this||b).manipulationDiv.style.display="block",(this||b).closeDiv.style.display="block",(this||b).editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){(this||b).editMode=!1,this._clean(),!0===(this||b).guiEnabled&&((this||b).manipulationDiv.style.display="none",(this||b).closeDiv.style.display="none",(this||b).editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),(this||b).manipulationDOM={},!0===(this||b).guiEnabled){var c,f;(this||b).editMode=!0,(this||b).manipulationDiv.style.display="block",(this||b).closeDiv.style.display="block";var w=(this||b).selectionHandler.getSelectedNodeCount(),x=(this||b).selectionHandler.getSelectedEdgeCount(),_=w+x,O=(this||b).options.locales[(this||b).options.locale],C=!1;!1!==(this||b).options.addNode&&(this._createAddNodeButton(O),C=!0),!1!==(this||b).options.addEdge&&(!0===C?this._createSeperator(1):C=!0,this._createAddEdgeButton(O)),1===w&&"function"==typeof(this||b).options.editNode?(!0===C?this._createSeperator(2):C=!0,this._createEditNodeButton(O)):1===x&&0===w&&!1!==(this||b).options.editEdge&&(!0===C?this._createSeperator(3):C=!0,this._createEditEdgeButton(O)),0!==_&&(w>0&&!1!==(this||b).options.deleteNode||0===w&&!1!==(this||b).options.deleteEdge)&&(!0===C&&this._createSeperator(4),this._createDeleteButton(O)),this._bindElementEvents((this||b).closeDiv,dn(c=(this||b).toggleEditMode).call(c,this||b)),this._temporaryBindEvent("select",dn(f=(this||b).showManipulatorToolbar).call(f,this||b))}(this||b).body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var c;if(!0!==(this||b).editMode&&this.enableEditMode(),this._clean(),(this||b).inMode="addNode",!0===(this||b).guiEnabled){var f,w=(this||b).options.locales[(this||b).options.locale];(this||b).manipulationDOM={},this._createBackButton(w),this._createSeperator(),this._createDescription(w.addDescription||(this||b).options.locales.en.addDescription),this._bindElementEvents((this||b).closeDiv,dn(f=(this||b).toggleEditMode).call(f,this||b))}this._temporaryBindEvent("click",dn(c=(this||b)._performAddNode).call(c,this||b))}},{key:"editNode",value:function(){var c=this||b;!0!==(this||b).editMode&&this.enableEditMode(),this._clean();var f=(this||b).selectionHandler.getSelectedNodes()[0];if(void 0!==f){if((this||b).inMode="editNode","function"!=typeof(this||b).options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==f.isCluster){var w=Rm({},f.options,!1);if(w.x=f.x,w.y=f.y,2!==(this||b).options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");(this||b).options.editNode(w,(function(f){null!=f&&"editNode"===c.inMode&&c.body.data.nodes.getDataSet().update(f),c.showManipulatorToolbar()}))}else alert((this||b).options.locales[(this||b).options.locale].editClusterError||(this||b).options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var c,f,w,x,_;if(!0!==(this||b).editMode&&this.enableEditMode(),this._clean(),(this||b).inMode="addEdge",!0===(this||b).guiEnabled){var O,C=(this||b).options.locales[(this||b).options.locale];(this||b).manipulationDOM={},this._createBackButton(C),this._createSeperator(),this._createDescription(C.edgeDescription||(this||b).options.locales.en.edgeDescription),this._bindElementEvents((this||b).closeDiv,dn(O=(this||b).toggleEditMode).call(O,this||b))}this._temporaryBindUI("onTouch",dn(c=(this||b)._handleConnect).call(c,this||b)),this._temporaryBindUI("onDragEnd",dn(f=(this||b)._finishConnect).call(f,this||b)),this._temporaryBindUI("onDrag",dn(w=(this||b)._dragControlNode).call(w,this||b)),this._temporaryBindUI("onRelease",dn(x=(this||b)._finishConnect).call(x,this||b)),this._temporaryBindUI("onDragStart",dn(_=(this||b)._dragStartEdge).call(_,this||b)),this._temporaryBindUI("onHold",(function(){}))}},{key:"editEdgeMode",value:function(){if(!0!==(this||b).editMode&&this.enableEditMode(),this._clean(),(this||b).inMode="editEdge","object"!==gu((this||b).options.editEdge)||"function"!=typeof(this||b).options.editEdge.editWithoutDrag||((this||b).edgeBeingEditedId=(this||b).selectionHandler.getSelectedEdgeIds()[0],void 0===(this||b).edgeBeingEditedId)){if(!0===(this||b).guiEnabled){var c,f=(this||b).options.locales[(this||b).options.locale];(this||b).manipulationDOM={},this._createBackButton(f),this._createSeperator(),this._createDescription(f.editEdgeDescription||(this||b).options.locales.en.editEdgeDescription),this._bindElementEvents((this||b).closeDiv,dn(c=(this||b).toggleEditMode).call(c,this||b))}if((this||b).edgeBeingEditedId=(this||b).selectionHandler.getSelectedEdgeIds()[0],void 0!==(this||b).edgeBeingEditedId){var w,x,_,O,C=(this||b).body.edges[(this||b).edgeBeingEditedId],T=this._getNewTargetNode(C.from.x,C.from.y),S=this._getNewTargetNode(C.to.x,C.to.y);(this||b).temporaryIds.nodes.push(T.id),(this||b).temporaryIds.nodes.push(S.id),(this||b).body.nodes[T.id]=T,(this||b).body.nodeIndices.push(T.id),(this||b).body.nodes[S.id]=S,(this||b).body.nodeIndices.push(S.id),this._temporaryBindUI("onTouch",dn(w=(this||b)._controlNodeTouch).call(w,this||b)),this._temporaryBindUI("onTap",(function(){})),this._temporaryBindUI("onHold",(function(){})),this._temporaryBindUI("onDragStart",dn(x=(this||b)._controlNodeDragStart).call(x,this||b)),this._temporaryBindUI("onDrag",dn(_=(this||b)._controlNodeDrag).call(_,this||b)),this._temporaryBindUI("onDragEnd",dn(O=(this||b)._controlNodeDragEnd).call(O,this||b)),this._temporaryBindUI("onMouseMove",(function(){})),this._temporaryBindEvent("beforeDrawing",(function(c){var f=C.edgeType.findBorderPositions(c);!1===T.selected&&(T.x=f.from.x,T.y=f.from.y),!1===S.selected&&(S.x=f.to.x,S.y=f.to.y)})),(this||b).body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}else{var M=(this||b).body.edges[(this||b).edgeBeingEditedId];this._performEditEdge(M.from.id,M.to.id)}}},{key:"deleteSelected",value:function(){var c=this||b;!0!==(this||b).editMode&&this.enableEditMode(),this._clean(),(this||b).inMode="delete";var f=(this||b).selectionHandler.getSelectedNodeIds(),w=(this||b).selectionHandler.getSelectedEdgeIds(),x=void 0;if(f.length>0){for(var _=0;_<f.length;_++)if(!0===(this||b).body.nodes[f[_]].isCluster)return void alert((this||b).options.locales[(this||b).options.locale].deleteClusterError||(this||b).options.locales.en.deleteClusterError);"function"==typeof(this||b).options.deleteNode&&(x=(this||b).options.deleteNode)}else w.length>0&&"function"==typeof(this||b).options.deleteEdge&&(x=(this||b).options.deleteEdge);if("function"==typeof x){var O={nodes:f,edges:w};if(2!==x.length)throw new Error("The function for delete does not support two arguments (data, callback)");x(O,(function(f){null!=f&&"delete"===c.inMode?(c.body.data.edges.getDataSet().remove(f.edges),c.body.data.nodes.getDataSet().remove(f.nodes),c.body.emitter.emit("startSimulation"),c.showManipulatorToolbar()):(c.body.emitter.emit("startSimulation"),c.showManipulatorToolbar())}))}else(this||b).body.data.edges.getDataSet().remove(w),(this||b).body.data.nodes.getDataSet().remove(f),(this||b).body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===(this||b).options.enabled?((this||b).guiEnabled=!0,this._createWrappers(),!1===(this||b).editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),(this||b).guiEnabled=!1)}},{key:"_createWrappers",value:function(){var c,f;(void 0===(this||b).manipulationDiv&&((this||b).manipulationDiv=document.createElement("div"),(this||b).manipulationDiv.className="vis-manipulation",!0===(this||b).editMode?(this||b).manipulationDiv.style.display="block":(this||b).manipulationDiv.style.display="none",(this||b).canvas.frame.appendChild((this||b).manipulationDiv)),void 0===(this||b).editModeDiv&&((this||b).editModeDiv=document.createElement("div"),(this||b).editModeDiv.className="vis-edit-mode",!0===(this||b).editMode?(this||b).editModeDiv.style.display="none":(this||b).editModeDiv.style.display="block",(this||b).canvas.frame.appendChild((this||b).editModeDiv)),void 0===(this||b).closeDiv)&&((this||b).closeDiv=document.createElement("button"),(this||b).closeDiv.className="vis-close",(this||b).closeDiv.setAttribute("aria-label",null!==(c=null===(f=(this||b).options.locales[(this||b).options.locale])||void 0===f?void 0:f.close)&&void 0!==c?c:(this||b).options.locales.en.close),(this||b).closeDiv.style.display=(this||b).manipulationDiv.style.display,(this||b).canvas.frame.appendChild((this||b).closeDiv))}},{key:"_getNewTargetNode",value:function(c,f){var w=Rm({},(this||b).options.controlNodeStyle);w.id="targetNode"+yO(),w.hidden=!1,w.physics=!1,w.x=c,w.y=f;var x=(this||b).body.functions.createNode(w);return x.shape.boundingBox={left:c,right:c,top:f,bottom:f},x}},{key:"_createEditButton",value:function(){var c;this._clean(),(this||b).manipulationDOM={},Dm((this||b).editModeDiv);var f=(this||b).options.locales[(this||b).options.locale],w=this._createButton("editMode","vis-edit vis-edit-mode",f.edit||(this||b).options.locales.en.edit);(this||b).editModeDiv.appendChild(w),this._bindElementEvents(w,dn(c=(this||b).toggleEditMode).call(c,this||b))}},{key:"_clean",value:function(){(this||b).inMode=!1,!0===(this||b).guiEnabled&&(Dm((this||b).editModeDiv),Dm((this||b).manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),(this||b).body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var c,f,w=sT(Kp(c=(this||b)._domEventListenerCleanupQueue).call(c,0));try{for(w.s();!(f=w.n()).done;)(0,f.value)()}catch(c){w.e(c)}finally{w.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),Dm((this||b).manipulationDiv),Dm((this||b).editModeDiv),Dm((this||b).closeDiv),(this||b).manipulationDiv&&(this||b).canvas.frame.removeChild((this||b).manipulationDiv),(this||b).editModeDiv&&(this||b).canvas.frame.removeChild((this||b).editModeDiv),(this||b).closeDiv&&(this||b).canvas.frame.removeChild((this||b).closeDiv),(this||b).manipulationDiv=void 0,(this||b).editModeDiv=void 0,(this||b).closeDiv=void 0}},{key:"_createSeperator",value:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(this||b).manipulationDOM["seperatorLineDiv"+c]=document.createElement("div"),(this||b).manipulationDOM["seperatorLineDiv"+c].className="vis-separator-line",(this||b).manipulationDiv.appendChild((this||b).manipulationDOM["seperatorLineDiv"+c])}},{key:"_createAddNodeButton",value:function(c){var f,w=this._createButton("addNode","vis-add",c.addNode||(this||b).options.locales.en.addNode);(this||b).manipulationDiv.appendChild(w),this._bindElementEvents(w,dn(f=(this||b).addNodeMode).call(f,this||b))}},{key:"_createAddEdgeButton",value:function(c){var f,w=this._createButton("addEdge","vis-connect",c.addEdge||(this||b).options.locales.en.addEdge);(this||b).manipulationDiv.appendChild(w),this._bindElementEvents(w,dn(f=(this||b).addEdgeMode).call(f,this||b))}},{key:"_createEditNodeButton",value:function(c){var f,w=this._createButton("editNode","vis-edit",c.editNode||(this||b).options.locales.en.editNode);(this||b).manipulationDiv.appendChild(w),this._bindElementEvents(w,dn(f=(this||b).editNode).call(f,this||b))}},{key:"_createEditEdgeButton",value:function(c){var f,w=this._createButton("editEdge","vis-edit",c.editEdge||(this||b).options.locales.en.editEdge);(this||b).manipulationDiv.appendChild(w),this._bindElementEvents(w,dn(f=(this||b).editEdgeMode).call(f,this||b))}},{key:"_createDeleteButton",value:function(c){var f,w;w=(this||b).options.rtl?"vis-delete-rtl":"vis-delete";var x=this._createButton("delete",w,c.del||(this||b).options.locales.en.del);(this||b).manipulationDiv.appendChild(x),this._bindElementEvents(x,dn(f=(this||b).deleteSelected).call(f,this||b))}},{key:"_createBackButton",value:function(c){var f,w=this._createButton("back","vis-back",c.back||(this||b).options.locales.en.back);(this||b).manipulationDiv.appendChild(w),this._bindElementEvents(w,dn(f=(this||b).showManipulatorToolbar).call(f,this||b))}},{key:"_createButton",value:function(c,f,w){var x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vis-label";return(this||b).manipulationDOM[c+"Div"]=document.createElement("button"),(this||b).manipulationDOM[c+"Div"].className="vis-button "+f,(this||b).manipulationDOM[c+"Label"]=document.createElement("div"),(this||b).manipulationDOM[c+"Label"].className=x,(this||b).manipulationDOM[c+"Label"].innerText=w,(this||b).manipulationDOM[c+"Div"].appendChild((this||b).manipulationDOM[c+"Label"]),(this||b).manipulationDOM[c+"Div"]}},{key:"_createDescription",value:function(c){(this||b).manipulationDOM.descriptionLabel=document.createElement("div"),(this||b).manipulationDOM.descriptionLabel.className="vis-none",(this||b).manipulationDOM.descriptionLabel.innerText=c,(this||b).manipulationDiv.appendChild((this||b).manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(c,f){(this||b).temporaryEventFunctions.push({event:c,boundFunction:f}),(this||b).body.emitter.on(c,f)}},{key:"_temporaryBindUI",value:function(c,f){if(void 0===(this||b).body.eventListeners[c])throw new Error("This UI function does not exist. Typo? You tried: "+c+" possible are: "+fg($f((this||b).body.eventListeners)));(this||b).temporaryUIFunctions[c]=(this||b).body.eventListeners[c],(this||b).body.eventListeners[c]=f}},{key:"_unbindTemporaryUIs",value:function(){for(var c in(this||b).temporaryUIFunctions)Object.prototype.hasOwnProperty.call((this||b).temporaryUIFunctions,c)&&((this||b).body.eventListeners[c]=(this||b).temporaryUIFunctions[c],delete(this||b).temporaryUIFunctions[c]);(this||b).temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var c=0;c<(this||b).temporaryEventFunctions.length;c++){var f=(this||b).temporaryEventFunctions[c].event,w=(this||b).temporaryEventFunctions[c].boundFunction;(this||b).body.emitter.off(f,w)}(this||b).temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(c,f){var w=new Kb(c,{});EO(w,f),(this||b)._domEventListenerCleanupQueue.push((function(){w.destroy()}));var o=function(c){var b=c.keyCode,w=c.key;"Enter"!==w&&" "!==w&&13!==b&&32!==b||f()};c.addEventListener("keyup",o,!1),(this||b)._domEventListenerCleanupQueue.push((function(){c.removeEventListener("keyup",o,!1)}))}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var c=0;c<(this||b).temporaryIds.edges.length;c++){var f;(this||b).body.edges[(this||b).temporaryIds.edges[c]].disconnect(),delete(this||b).body.edges[(this||b).temporaryIds.edges[c]];var w,x=ag(f=(this||b).body.edgeIndices).call(f,(this||b).temporaryIds.edges[c]);-1!==x&&Kp(w=(this||b).body.edgeIndices).call(w,x,1)}for(var _=0;_<(this||b).temporaryIds.nodes.length;_++){var O;delete(this||b).body.nodes[(this||b).temporaryIds.nodes[_]];var C,T=ag(O=(this||b).body.nodeIndices).call(O,(this||b).temporaryIds.nodes[_]);-1!==T&&Kp(C=(this||b).body.nodeIndices).call(C,T,1)}(this||b).temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(c){(this||b).selectionHandler.unselectAll(),(this||b).lastTouch=(this||b).body.functions.getPointer(c.center),(this||b).lastTouch.translation=No({},(this||b).body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var c=(this||b).lastTouch,f=(this||b).selectionHandler._pointerToPositionObject(c),w=(this||b).body.nodes[(this||b).temporaryIds.nodes[0]],x=(this||b).body.nodes[(this||b).temporaryIds.nodes[1]],_=(this||b).body.edges[(this||b).edgeBeingEditedId];(this||b).selectedControlNode=void 0;var O=w.isOverlappingWith(f),C=x.isOverlappingWith(f);!0===O?((this||b).selectedControlNode=w,_.edgeType.from=w):!0===C&&((this||b).selectedControlNode=x,_.edgeType.to=x),void 0!==(this||b).selectedControlNode&&(this||b).selectionHandler.selectObject((this||b).selectedControlNode),(this||b).body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(c){(this||b).body.emitter.emit("disablePhysics");var f=(this||b).body.functions.getPointer(c.center),w=(this||b).canvas.DOMtoCanvas(f);void 0!==(this||b).selectedControlNode?((this||b).selectedControlNode.x=w.x,(this||b).selectedControlNode.y=w.y):(this||b).interactionHandler.onDrag(c),(this||b).body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(c){var f=(this||b).body.functions.getPointer(c.center),w=(this||b).selectionHandler._pointerToPositionObject(f),x=(this||b).body.edges[(this||b).edgeBeingEditedId];if(void 0!==(this||b).selectedControlNode){(this||b).selectionHandler.unselectAll();for(var _=(this||b).selectionHandler._getAllNodesOverlappingWith(w),O=void 0,C=_.length-1;C>=0;C--)if(_[C]!==(this||b).selectedControlNode.id){O=(this||b).body.nodes[_[C]];break}if(void 0!==O&&void 0!==(this||b).selectedControlNode)if(!0===O.isCluster)alert((this||b).options.locales[(this||b).options.locale].createEdgeError||(this||b).options.locales.en.createEdgeError);else{var T=(this||b).body.nodes[(this||b).temporaryIds.nodes[0]];(this||b).selectedControlNode.id===T.id?this._performEditEdge(O.id,x.to.id):this._performEditEdge(x.from.id,O.id)}else x.updateEdgeType(),(this||b).body.emitter.emit("restorePhysics");(this||b).body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(c){if((new Date).valueOf()-(this||b).touchTime>100){(this||b).lastTouch=(this||b).body.functions.getPointer(c.center),(this||b).lastTouch.translation=No({},(this||b).body.view.translation),(this||b).interactionHandler.drag.pointer=(this||b).lastTouch,(this||b).interactionHandler.drag.translation=(this||b).lastTouch.translation;var f=(this||b).lastTouch,w=(this||b).selectionHandler.getNodeAt(f);if(void 0!==w)if(!0===w.isCluster)alert((this||b).options.locales[(this||b).options.locale].createEdgeError||(this||b).options.locales.en.createEdgeError);else{var x=this._getNewTargetNode(w.x,w.y);(this||b).body.nodes[x.id]=x,(this||b).body.nodeIndices.push(x.id);var _=(this||b).body.functions.createEdge({id:"connectionEdge"+yO(),from:w.id,to:x.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});(this||b).body.edges[_.id]=_,(this||b).body.edgeIndices.push(_.id),(this||b).temporaryIds.nodes.push(x.id),(this||b).temporaryIds.edges.push(_.id)}(this||b).touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(c){var f=(this||b).body.functions.getPointer(c.center),w=(this||b).selectionHandler._pointerToPositionObject(f),x=void 0;void 0!==(this||b).temporaryIds.edges[0]&&(x=(this||b).body.edges[(this||b).temporaryIds.edges[0]].fromId);for(var _=(this||b).selectionHandler._getAllNodesOverlappingWith(w),O=void 0,C=_.length-1;C>=0;C--){var T;if(-1===ag(T=(this||b).temporaryIds.nodes).call(T,_[C])){O=(this||b).body.nodes[_[C]];break}}if(c.controlEdge={from:x,to:O?O.id:void 0},(this||b).selectionHandler.generateClickEvent("controlNodeDragging",c,f),void 0!==(this||b).temporaryIds.nodes[0]){var S=(this||b).body.nodes[(this||b).temporaryIds.nodes[0]];S.x=(this||b).canvas._XconvertDOMtoCanvas(f.x),S.y=(this||b).canvas._YconvertDOMtoCanvas(f.y),(this||b).body.emitter.emit("_redraw")}else(this||b).interactionHandler.onDrag(c)}},{key:"_finishConnect",value:function(c){var f=(this||b).body.functions.getPointer(c.center),w=(this||b).selectionHandler._pointerToPositionObject(f),x=void 0;void 0!==(this||b).temporaryIds.edges[0]&&(x=(this||b).body.edges[(this||b).temporaryIds.edges[0]].fromId);for(var _=(this||b).selectionHandler._getAllNodesOverlappingWith(w),O=void 0,C=_.length-1;C>=0;C--){var T;if(-1===ag(T=(this||b).temporaryIds.nodes).call(T,_[C])){O=(this||b).body.nodes[_[C]];break}}this._cleanupTemporaryNodesAndEdges(),void 0!==O&&(!0===O.isCluster?alert((this||b).options.locales[(this||b).options.locale].createEdgeError||(this||b).options.locales.en.createEdgeError):void 0!==(this||b).body.nodes[x]&&void 0!==(this||b).body.nodes[O.id]&&this._performAddEdge(x,O.id)),c.controlEdge={from:x,to:O?O.id:void 0},(this||b).selectionHandler.generateClickEvent("controlNodeDragEnd",c,f),(this||b).body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(c){var f=(this||b).lastTouch;(this||b).selectionHandler.generateClickEvent("dragStart",c,f,void 0,!0)}},{key:"_performAddNode",value:function(c){var f=this||b,w={id:yO(),x:c.pointer.canvas.x,y:c.pointer.canvas.y,label:"new"};if("function"==typeof(this||b).options.addNode){if(2!==(this||b).options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");(this||b).options.addNode(w,(function(c){null!=c&&"addNode"===f.inMode&&f.body.data.nodes.getDataSet().add(c),f.showManipulatorToolbar()}))}else(this||b).body.data.nodes.getDataSet().add(w),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(c,f){var w=this||b,x={from:c,to:f};if("function"==typeof(this||b).options.addEdge){if(2!==(this||b).options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");(this||b).options.addEdge(x,(function(c){null!=c&&"addEdge"===w.inMode&&(w.body.data.edges.getDataSet().add(c),w.selectionHandler.unselectAll(),w.showManipulatorToolbar())}))}else(this||b).body.data.edges.getDataSet().add(x),(this||b).selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(c,f){var w=this||b,x={id:(this||b).edgeBeingEditedId,from:c,to:f,label:(this||b).body.data.edges.get((this||b).edgeBeingEditedId).label},_=(this||b).options.editEdge;if("object"===gu(_)&&(_=_.editWithoutDrag),"function"==typeof _){if(2!==_.length)throw new Error("The function for edit does not support two arguments (data, callback)");_(x,(function(c){null==c||"editEdge"!==w.inMode?(w.body.edges[x.id].updateEdgeType(),w.body.emitter.emit("_redraw"),w.showManipulatorToolbar()):(w.body.data.edges.getDataSet().update(c),w.selectionHandler.unselectAll(),w.showManipulatorToolbar())}))}else(this||b).body.data.edges.getDataSet().update(x),(this||b).selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),t}(),kS="string",xS="boolean",_S="number",ES="array",OS="object",TS=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],SS={borderWidth:{number:_S},borderWidthSelected:{number:_S,undefined:"undefined"},brokenImage:{string:kS,undefined:"undefined"},chosen:{label:{boolean:xS,function:"function"},node:{boolean:xS,function:"function"},__type__:{object:OS,boolean:xS}},color:{border:{string:kS},background:{string:kS},highlight:{border:{string:kS},background:{string:kS},__type__:{object:OS,string:kS}},hover:{border:{string:kS},background:{string:kS},__type__:{object:OS,string:kS}},__type__:{object:OS,string:kS}},opacity:{number:_S,undefined:"undefined"},fixed:{x:{boolean:xS},y:{boolean:xS},__type__:{object:OS,boolean:xS}},font:{align:{string:kS},color:{string:kS},size:{number:_S},face:{string:kS},background:{string:kS},strokeWidth:{number:_S},strokeColor:{string:kS},vadjust:{number:_S},multi:{boolean:xS,string:kS},bold:{color:{string:kS},size:{number:_S},face:{string:kS},mod:{string:kS},vadjust:{number:_S},__type__:{object:OS,string:kS}},boldital:{color:{string:kS},size:{number:_S},face:{string:kS},mod:{string:kS},vadjust:{number:_S},__type__:{object:OS,string:kS}},ital:{color:{string:kS},size:{number:_S},face:{string:kS},mod:{string:kS},vadjust:{number:_S},__type__:{object:OS,string:kS}},mono:{color:{string:kS},size:{number:_S},face:{string:kS},mod:{string:kS},vadjust:{number:_S},__type__:{object:OS,string:kS}},__type__:{object:OS,string:kS}},group:{string:kS,number:_S,undefined:"undefined"},heightConstraint:{minimum:{number:_S},valign:{string:kS},__type__:{object:OS,boolean:xS,number:_S}},hidden:{boolean:xS},icon:{face:{string:kS},code:{string:kS},size:{number:_S},color:{string:kS},weight:{string:kS,number:_S},__type__:{object:OS}},id:{string:kS,number:_S},image:{selected:{string:kS,undefined:"undefined"},unselected:{string:kS,undefined:"undefined"},__type__:{object:OS,string:kS}},imagePadding:{top:{number:_S},right:{number:_S},bottom:{number:_S},left:{number:_S},__type__:{object:OS,number:_S}},label:{string:kS,undefined:"undefined"},labelHighlightBold:{boolean:xS},level:{number:_S,undefined:"undefined"},margin:{top:{number:_S},right:{number:_S},bottom:{number:_S},left:{number:_S},__type__:{object:OS,number:_S}},mass:{number:_S},physics:{boolean:xS},scaling:{min:{number:_S},max:{number:_S},label:{enabled:{boolean:xS},min:{number:_S},max:{number:_S},maxVisible:{number:_S},drawThreshold:{number:_S},__type__:{object:OS,boolean:xS}},customScalingFunction:{function:"function"},__type__:{object:OS}},shadow:{enabled:{boolean:xS},color:{string:kS},size:{number:_S},x:{number:_S},y:{number:_S},__type__:{object:OS,boolean:xS}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:xS,array:ES},borderRadius:{number:_S},interpolation:{boolean:xS},useImageSize:{boolean:xS},useBorderWithImage:{boolean:xS},coordinateOrigin:{string:["center","top-left"]},__type__:{object:OS}},size:{number:_S},title:{string:kS,dom:"dom",undefined:"undefined"},value:{number:_S,undefined:"undefined"},widthConstraint:{minimum:{number:_S},maximum:{number:_S},__type__:{object:OS,boolean:xS,number:_S}},x:{number:_S},y:{number:_S},__type__:{object:OS}},MS={configure:{enabled:{boolean:xS},filter:{boolean:xS,string:kS,array:ES,function:"function"},container:{dom:"dom"},showButton:{boolean:xS},__type__:{object:OS,boolean:xS,string:kS,array:ES,function:"function"}},edges:{arrows:{to:{enabled:{boolean:xS},scaleFactor:{number:_S},type:{string:TS},imageHeight:{number:_S},imageWidth:{number:_S},src:{string:kS},__type__:{object:OS,boolean:xS}},middle:{enabled:{boolean:xS},scaleFactor:{number:_S},type:{string:TS},imageWidth:{number:_S},imageHeight:{number:_S},src:{string:kS},__type__:{object:OS,boolean:xS}},from:{enabled:{boolean:xS},scaleFactor:{number:_S},type:{string:TS},imageWidth:{number:_S},imageHeight:{number:_S},src:{string:kS},__type__:{object:OS,boolean:xS}},__type__:{string:["from","to","middle"],object:OS}},endPointOffset:{from:{number:_S},to:{number:_S},__type__:{object:OS,number:_S}},arrowStrikethrough:{boolean:xS},background:{enabled:{boolean:xS},color:{string:kS},size:{number:_S},dashes:{boolean:xS,array:ES},__type__:{object:OS,boolean:xS}},chosen:{label:{boolean:xS,function:"function"},edge:{boolean:xS,function:"function"},__type__:{object:OS,boolean:xS}},color:{color:{string:kS},highlight:{string:kS},hover:{string:kS},inherit:{string:["from","to","both"],boolean:xS},opacity:{number:_S},__type__:{object:OS,string:kS}},dashes:{boolean:xS,array:ES},font:{color:{string:kS},size:{number:_S},face:{string:kS},background:{string:kS},strokeWidth:{number:_S},strokeColor:{string:kS},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:_S},multi:{boolean:xS,string:kS},bold:{color:{string:kS},size:{number:_S},face:{string:kS},mod:{string:kS},vadjust:{number:_S},__type__:{object:OS,string:kS}},boldital:{color:{string:kS},size:{number:_S},face:{string:kS},mod:{string:kS},vadjust:{number:_S},__type__:{object:OS,string:kS}},ital:{color:{string:kS},size:{number:_S},face:{string:kS},mod:{string:kS},vadjust:{number:_S},__type__:{object:OS,string:kS}},mono:{color:{string:kS},size:{number:_S},face:{string:kS},mod:{string:kS},vadjust:{number:_S},__type__:{object:OS,string:kS}},__type__:{object:OS,string:kS}},hidden:{boolean:xS},hoverWidth:{function:"function",number:_S},label:{string:kS,undefined:"undefined"},labelHighlightBold:{boolean:xS},length:{number:_S,undefined:"undefined"},physics:{boolean:xS},scaling:{min:{number:_S},max:{number:_S},label:{enabled:{boolean:xS},min:{number:_S},max:{number:_S},maxVisible:{number:_S},drawThreshold:{number:_S},__type__:{object:OS,boolean:xS}},customScalingFunction:{function:"function"},__type__:{object:OS}},selectionWidth:{function:"function",number:_S},selfReferenceSize:{number:_S},selfReference:{size:{number:_S},angle:{number:_S},renderBehindTheNode:{boolean:xS},__type__:{object:OS}},shadow:{enabled:{boolean:xS},color:{string:kS},size:{number:_S},x:{number:_S},y:{number:_S},__type__:{object:OS,boolean:xS}},smooth:{enabled:{boolean:xS},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:_S},forceDirection:{string:["horizontal","vertical","none"],boolean:xS},__type__:{object:OS,boolean:xS}},title:{string:kS,undefined:"undefined"},width:{number:_S},widthConstraint:{maximum:{number:_S},__type__:{object:OS,boolean:xS,number:_S}},value:{number:_S,undefined:"undefined"},__type__:{object:OS}},groups:{useDefaultGroups:{boolean:xS},__any__:SS,__type__:{object:OS}},interaction:{dragNodes:{boolean:xS},dragView:{boolean:xS},hideEdgesOnDrag:{boolean:xS},hideEdgesOnZoom:{boolean:xS},hideNodesOnDrag:{boolean:xS},hover:{boolean:xS},keyboard:{enabled:{boolean:xS},speed:{x:{number:_S},y:{number:_S},zoom:{number:_S},__type__:{object:OS}},bindToWindow:{boolean:xS},autoFocus:{boolean:xS},__type__:{object:OS,boolean:xS}},multiselect:{boolean:xS},navigationButtons:{boolean:xS},selectable:{boolean:xS},selectConnectedEdges:{boolean:xS},hoverConnectedEdges:{boolean:xS},tooltipDelay:{number:_S},zoomView:{boolean:xS},zoomSpeed:{number:_S},__type__:{object:OS}},layout:{randomSeed:{undefined:"undefined",number:_S,string:kS},improvedLayout:{boolean:xS},clusterThreshold:{number:_S},hierarchical:{enabled:{boolean:xS},levelSeparation:{number:_S},nodeSpacing:{number:_S},treeSpacing:{number:_S},blockShifting:{boolean:xS},edgeMinimization:{boolean:xS},parentCentralization:{boolean:xS},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:OS,boolean:xS}},__type__:{object:OS}},manipulation:{enabled:{boolean:xS},initiallyActive:{boolean:xS},addNode:{boolean:xS,function:"function"},addEdge:{boolean:xS,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:OS,boolean:xS,function:"function"}},deleteNode:{boolean:xS,function:"function"},deleteEdge:{boolean:xS,function:"function"},controlNodeStyle:SS,__type__:{object:OS,boolean:xS}},nodes:SS,physics:{enabled:{boolean:xS},barnesHut:{theta:{number:_S},gravitationalConstant:{number:_S},centralGravity:{number:_S},springLength:{number:_S},springConstant:{number:_S},damping:{number:_S},avoidOverlap:{number:_S},__type__:{object:OS}},forceAtlas2Based:{theta:{number:_S},gravitationalConstant:{number:_S},centralGravity:{number:_S},springLength:{number:_S},springConstant:{number:_S},damping:{number:_S},avoidOverlap:{number:_S},__type__:{object:OS}},repulsion:{centralGravity:{number:_S},springLength:{number:_S},springConstant:{number:_S},nodeDistance:{number:_S},damping:{number:_S},__type__:{object:OS}},hierarchicalRepulsion:{centralGravity:{number:_S},springLength:{number:_S},springConstant:{number:_S},nodeDistance:{number:_S},damping:{number:_S},avoidOverlap:{number:_S},__type__:{object:OS}},maxVelocity:{number:_S},minVelocity:{number:_S},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:xS},iterations:{number:_S},updateInterval:{number:_S},onlyDynamicEdges:{boolean:xS},fit:{boolean:xS},__type__:{object:OS,boolean:xS}},timestep:{number:_S},adaptiveTimestep:{boolean:xS},wind:{x:{number:_S},y:{number:_S},__type__:{object:OS}},__type__:{object:OS,boolean:xS}},autoResize:{boolean:xS},clickToUse:{boolean:xS},locale:{string:kS},locales:{__any__:{any:"any"},__type__:{object:OS}},height:{string:kS},width:{string:kS},__type__:{object:OS}},PS={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},mT=function(c,f,b){var w;return!(!pv(c).call(c,"physics")||!pv(w=PS.physics.solver).call(w,f)||b.physics.solver===f||"wind"===f)},DS=Object.freeze({__proto__:null,allOptions:MS,configuratorHideOption:mT,configureOptions:PS}),IS=function(){function t(){vh(this||b,t)}return wu(t,[{key:"getDistances",value:function(c,f,b){for(var w={},x=c.edges,_=0;_<f.length;_++){var O={};w[f[_]]=O;for(var C=0;C<f.length;C++)O[f[C]]=_==C?0:1e9}for(var T=0;T<b.length;T++){var S=x[b[T]];!0===S.connected&&void 0!==w[S.fromId]&&void 0!==w[S.toId]&&(w[S.fromId][S.toId]=1,w[S.toId][S.fromId]=1)}for(var M=f.length,P=0;P<M;P++)for(var D=f[P],I=w[D],B=0;B<M-1;B++)for(var F=f[B],z=w[F],N=B+1;N<M;N++){var A=f[N],R=w[A],j=Math.min(z[A],z[D]+I[A]);z[A]=j,R[F]=j}return w}}]),t}(),FS=function(){function t(c,f,w){vh(this||b,t),(this||b).body=c,(this||b).springLength=f,(this||b).springConstant=w,(this||b).distanceSolver=new IS}return wu(t,[{key:"setOptions",value:function(c){c&&(c.springLength&&((this||b).springLength=c.springLength),c.springConstant&&((this||b).springConstant=c.springConstant))}},{key:"solve",value:function(c,f){var w=arguments.length>2&&void 0!==arguments[2]&&arguments[2],x=(this||b).distanceSolver.getDistances((this||b).body,c,f);this._createL_matrix(x),this._createK_matrix(x),this._createE_matrix();for(var _=0,O=Math.max(1e3,Math.min(10*(this||b).body.nodeIndices.length,6e3)),C=1e9,T=0,S=0,M=0,P=0,D=0;C>.01&&_<O;){_+=1;var I=df(this._getHighestEnergyNode(w),4);for(T=I[0],C=I[1],S=I[2],M=I[3],P=C,D=0;P>1&&D<5;){D+=1,this._moveNode(T,S,M);var B=df(this._getEnergy(T),3);P=B[0],S=B[1],M=B[2]}}}},{key:"_getHighestEnergyNode",value:function(c){for(var f=(this||b).body.nodeIndices,w=(this||b).body.nodes,x=0,_=f[0],O=0,C=0,T=0;T<f.length;T++){var S=f[T];if(!0!==w[S].predefinedPosition||!0===w[S].isCluster&&!0===c||!0!==w[S].options.fixed.x||!0!==w[S].options.fixed.y){var M=df(this._getEnergy(S),3),P=M[0],D=M[1],I=M[2];x<P&&(x=P,_=S,O=D,C=I)}}return[_,x,O,C]}},{key:"_getEnergy",value:function(c){var f=df((this||b).E_sums[c],2),w=f[0],x=f[1];return[Math.sqrt(Math.pow(w,2)+Math.pow(x,2)),w,x]}},{key:"_moveNode",value:function(c,f,w){for(var x=(this||b).body.nodeIndices,_=(this||b).body.nodes,O=0,C=0,T=0,S=_[c].x,M=_[c].y,P=(this||b).K_matrix[c],D=(this||b).L_matrix[c],I=0;I<x.length;I++){var B=x[I];if(B!==c){var F=_[B].x,z=_[B].y,N=P[B],A=D[B],R=1/Math.pow(Math.pow(S-F,2)+Math.pow(M-z,2),1.5);O+=N*(1-A*Math.pow(M-z,2)*R),C+=N*(A*(S-F)*(M-z)*R),T+=N*(1-A*Math.pow(S-F,2)*R)}}var j=(f/O+w/C)/(C/O-T/C),H=-(C*j+f)/O;_[c].x+=H,_[c].y+=j,this._updateE_matrix(c)}},{key:"_createL_matrix",value:function(c){var f=(this||b).body.nodeIndices,w=(this||b).springLength;(this||b).L_matrix=[];for(var x=0;x<f.length;x++){(this||b).L_matrix[f[x]]={};for(var _=0;_<f.length;_++)(this||b).L_matrix[f[x]][f[_]]=w*c[f[x]][f[_]]}}},{key:"_createK_matrix",value:function(c){var f=(this||b).body.nodeIndices,w=(this||b).springConstant;(this||b).K_matrix=[];for(var x=0;x<f.length;x++){(this||b).K_matrix[f[x]]={};for(var _=0;_<f.length;_++)(this||b).K_matrix[f[x]][f[_]]=w*Math.pow(c[f[x]][f[_]],-2)}}},{key:"_createE_matrix",value:function(){var c=(this||b).body.nodeIndices,f=(this||b).body.nodes;(this||b).E_matrix={},(this||b).E_sums={};for(var w=0;w<c.length;w++)(this||b).E_matrix[c[w]]=[];for(var x=0;x<c.length;x++){for(var _=c[x],O=f[_].x,C=f[_].y,T=0,S=0,M=x;M<c.length;M++){var P=c[M];if(P!==_){var D=f[P].x,I=f[P].y,B=1/Math.sqrt(Math.pow(O-D,2)+Math.pow(C-I,2));(this||b).E_matrix[_][M]=[(this||b).K_matrix[_][P]*(O-D-(this||b).L_matrix[_][P]*(O-D)*B),(this||b).K_matrix[_][P]*(C-I-(this||b).L_matrix[_][P]*(C-I)*B)],(this||b).E_matrix[P][x]=(this||b).E_matrix[_][M],T+=(this||b).E_matrix[_][M][0],S+=(this||b).E_matrix[_][M][1]}}(this||b).E_sums[_]=[T,S]}}},{key:"_updateE_matrix",value:function(c){for(var f=(this||b).body.nodeIndices,w=(this||b).body.nodes,x=(this||b).E_matrix[c],_=(this||b).K_matrix[c],O=(this||b).L_matrix[c],C=w[c].x,T=w[c].y,S=0,M=0,P=0;P<f.length;P++){var D=f[P];if(D!==c){var I=x[P],B=I[0],F=I[1],z=w[D].x,N=w[D].y,A=1/Math.sqrt(Math.pow(C-z,2)+Math.pow(T-N,2)),R=_[D]*(C-z-O[D]*(C-z)*A),j=_[D]*(T-N-O[D]*(T-N)*A);x[P]=[R,j],S+=R,M+=j;var H=(this||b).E_sums[D];H[0]+=R-B,H[1]+=j-F}}(this||b).E_sums[c]=[S,M]}}]),t}();function _T(c,f,w){var x,_,O,C,T=this||b;if(!((this||b)instanceof _T))throw new SyntaxError("Constructor must be called with the new operator");(this||b).options={},(this||b).defaultOptions={locale:"en",locales:dw,clickToUse:!1},No((this||b).options,(this||b).defaultOptions),(this||b).body={container:c,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:dn(x=(this||b).on).call(x,this||b),off:dn(_=(this||b).off).call(_,this||b),emit:dn(O=(this||b).emit).call(O,this||b),once:dn(C=(this||b).once).call(C,this||b)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),(this||b).images=new cw((function(){return T.body.emitter.emit("_requestRedraw")})),(this||b).groups=new Lk,(this||b).canvas=new qO((this||b).body),(this||b).selectionHandler=new fT((this||b).body,(this||b).canvas),(this||b).interactionHandler=new XO((this||b).body,(this||b).canvas,(this||b).selectionHandler),(this||b).view=new UO((this||b).body,(this||b).canvas),(this||b).renderer=new WO((this||b).body,(this||b).canvas),(this||b).physics=new FO((this||b).body),(this||b).layoutEngine=new bS((this||b).body),(this||b).clustering=new HO((this||b).body),(this||b).manipulation=new wS((this||b).body,(this||b).canvas,(this||b).selectionHandler,(this||b).interactionHandler),(this||b).nodesHandler=new _E((this||b).body,(this||b).images,(this||b).groups,(this||b).layoutEngine),(this||b).edgesHandler=new wO((this||b).body,(this||b).images,(this||b).groups),(this||b).body.modules.kamadaKawai=new FS((this||b).body,150,.05),(this||b).body.modules.clustering=(this||b).clustering,(this||b).canvas._create(),this.setOptions(w),this.setData(f)}fn(_T.prototype),_T.prototype.setOptions=function(c){var f=this||b;if(null===c&&(c=void 0),void 0!==c){!0===Qb.validate(c,MS)&&console.error("%cErrors have been found in the supplied options object.",Zb);if(Nm(["locale","locales","clickToUse"],(this||b).options,c),void 0!==c.locale&&(c.locale=function(c,f){try{var b=df(f.split(/[-_ /]/,2),2),w=b[0],x=b[1],_=null!=w?w.toLowerCase():null,O=null!=x?x.toUpperCase():null;if(_&&O){var C,T=_+"-"+O;if(Object.prototype.hasOwnProperty.call(c,T))return T;console.warn(Bf(C="Unknown variant ".concat(O," of language ")).call(C,_,"."))}if(_){var S=_;if(Object.prototype.hasOwnProperty.call(c,S))return S;console.warn("Unknown language ".concat(_))}return console.warn("Unknown locale ".concat(f,", falling back to English.")),"en"}catch(c){return console.error(c),console.warn("Unexpected error while normalizing locale ".concat(f,", falling back to English.")),"en"}}(c.locales||(this||b).options.locales,c.locale)),c=(this||b).layoutEngine.setOptions(c.layout,c),(this||b).canvas.setOptions(c),(this||b).groups.setOptions(c.groups),(this||b).nodesHandler.setOptions(c.nodes),(this||b).edgesHandler.setOptions(c.edges),(this||b).physics.setOptions(c.physics),(this||b).manipulation.setOptions(c.manipulation,c,(this||b).options),(this||b).interactionHandler.setOptions(c.interaction),(this||b).renderer.setOptions(c.interaction),(this||b).selectionHandler.setOptions(c.interaction),void 0!==c.groups&&(this||b).body.emitter.emit("refreshNodes"),"configure"in c&&((this||b).configurator||((this||b).configurator=new Xb(this||b,(this||b).body.container,PS,(this||b).canvas.pixelRatio,mT)),(this||b).configurator.setOptions(c.configure)),(this||b).configurator&&!0===(this||b).configurator.options.enabled){var w={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Rm(w.nodes,(this||b).nodesHandler.options),Rm(w.edges,(this||b).edgesHandler.options),Rm(w.layout,(this||b).layoutEngine.options),Rm(w.interaction,(this||b).selectionHandler.options),Rm(w.interaction,(this||b).renderer.options),Rm(w.interaction,(this||b).interactionHandler.options),Rm(w.manipulation,(this||b).manipulation.options),Rm(w.physics,(this||b).physics.options),Rm(w.global,(this||b).canvas.options),Rm(w.global,(this||b).options),(this||b).configurator.setModuleOptions(w)}void 0!==c.clickToUse?!0===c.clickToUse?void 0===(this||b).activator&&((this||b).activator=new Ub((this||b).canvas.frame),(this||b).activator.on("change",(function(){f.body.emitter.emit("activate")}))):(void 0!==(this||b).activator&&((this||b).activator.destroy(),delete(this||b).activator),(this||b).body.emitter.emit("activate")):(this||b).body.emitter.emit("activate"),(this||b).canvas.setSize(),(this||b).body.emitter.emit("startSimulation")}},_T.prototype._updateVisibleIndices=function(){var c=(this||b).body.nodes,f=(this||b).body.edges;for(var w in(this||b).body.nodeIndices=[],(this||b).body.edgeIndices=[],c)Object.prototype.hasOwnProperty.call(c,w)&&((this||b).clustering._isClusteredNode(w)||!1!==c[w].options.hidden||(this||b).body.nodeIndices.push(c[w].id));for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)){var _=f[x],O=c[_.fromId],C=c[_.toId],T=void 0!==O&&void 0!==C;!(this||b).clustering._isClusteredEdge(x)&&!1===_.options.hidden&&T&&!1===O.options.hidden&&!1===C.options.hidden&&(this||b).body.edgeIndices.push(_.id)}},_T.prototype.bindEventListeners=function(){var c=this||b;(this||b).body.emitter.on("_dataChanged",(function(){c.edgesHandler._updateState(),c.body.emitter.emit("_dataUpdated")})),(this||b).body.emitter.on("_dataUpdated",(function(){c.clustering._updateState(),c._updateVisibleIndices(),c._updateValueRange(c.body.nodes),c._updateValueRange(c.body.edges),c.body.emitter.emit("startSimulation"),c.body.emitter.emit("_requestRedraw")}))},_T.prototype.setData=function(c){if((this||b).body.emitter.emit("resetPhysics"),(this||b).body.emitter.emit("_resetData"),(this||b).selectionHandler.unselectAll(),c&&c.dot&&(c.nodes||c.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(c&&c.options),c&&c.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var f=qb(c.dot);this.setData(f)}else if(c&&c.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var w=Yb(c.gephi);this.setData(w)}else(this||b).nodesHandler.setData(c&&c.nodes,!0),(this||b).edgesHandler.setData(c&&c.edges,!0),(this||b).body.emitter.emit("_dataChanged"),(this||b).body.emitter.emit("_dataLoaded"),(this||b).body.emitter.emit("initPhysics")},_T.prototype.destroy=function(){for(var c in(this||b).body.emitter.emit("destroy"),(this||b).body.emitter.off(),this.off(),delete(this||b).groups,delete(this||b).canvas,delete(this||b).selectionHandler,delete(this||b).interactionHandler,delete(this||b).view,delete(this||b).renderer,delete(this||b).physics,delete(this||b).layoutEngine,delete(this||b).clustering,delete(this||b).manipulation,delete(this||b).nodesHandler,delete(this||b).edgesHandler,delete(this||b).configurator,delete(this||b).images,(this||b).body.nodes)Object.prototype.hasOwnProperty.call((this||b).body.nodes,c)&&delete(this||b).body.nodes[c];for(var f in(this||b).body.edges)Object.prototype.hasOwnProperty.call((this||b).body.edges,f)&&delete(this||b).body.edges[f];Dm((this||b).body.container)},_T.prototype._updateValueRange=function(c){var f,b=void 0,w=void 0,x=0;for(f in c)if(Object.prototype.hasOwnProperty.call(c,f)){var _=c[f].getValue();void 0!==_&&(b=void 0===b?_:Math.min(_,b),w=void 0===w?_:Math.max(_,w),x+=_)}if(void 0!==b&&void 0!==w)for(f in c)Object.prototype.hasOwnProperty.call(c,f)&&c[f].setValueRange(b,w,x)},_T.prototype.isActive=function(){return!(this||b).activator||(this||b).activator.active},_T.prototype.setSize=function(){return(this||b).canvas.setSize.apply((this||b).canvas,arguments)},_T.prototype.canvasToDOM=function(){return(this||b).canvas.canvasToDOM.apply((this||b).canvas,arguments)},_T.prototype.DOMtoCanvas=function(){return(this||b).canvas.DOMtoCanvas.apply((this||b).canvas,arguments)},_T.prototype.findNode=function(){return(this||b).clustering.findNode.apply((this||b).clustering,arguments)},_T.prototype.isCluster=function(){return(this||b).clustering.isCluster.apply((this||b).clustering,arguments)},_T.prototype.openCluster=function(){return(this||b).clustering.openCluster.apply((this||b).clustering,arguments)},_T.prototype.cluster=function(){return(this||b).clustering.cluster.apply((this||b).clustering,arguments)},_T.prototype.getNodesInCluster=function(){return(this||b).clustering.getNodesInCluster.apply((this||b).clustering,arguments)},_T.prototype.clusterByConnection=function(){return(this||b).clustering.clusterByConnection.apply((this||b).clustering,arguments)},_T.prototype.clusterByHubsize=function(){return(this||b).clustering.clusterByHubsize.apply((this||b).clustering,arguments)},_T.prototype.updateClusteredNode=function(){return(this||b).clustering.updateClusteredNode.apply((this||b).clustering,arguments)},_T.prototype.getClusteredEdges=function(){return(this||b).clustering.getClusteredEdges.apply((this||b).clustering,arguments)},_T.prototype.getBaseEdge=function(){return(this||b).clustering.getBaseEdge.apply((this||b).clustering,arguments)},_T.prototype.getBaseEdges=function(){return(this||b).clustering.getBaseEdges.apply((this||b).clustering,arguments)},_T.prototype.updateEdge=function(){return(this||b).clustering.updateEdge.apply((this||b).clustering,arguments)},_T.prototype.clusterOutliers=function(){return(this||b).clustering.clusterOutliers.apply((this||b).clustering,arguments)},_T.prototype.getSeed=function(){return(this||b).layoutEngine.getSeed.apply((this||b).layoutEngine,arguments)},_T.prototype.enableEditMode=function(){return(this||b).manipulation.enableEditMode.apply((this||b).manipulation,arguments)},_T.prototype.disableEditMode=function(){return(this||b).manipulation.disableEditMode.apply((this||b).manipulation,arguments)},_T.prototype.addNodeMode=function(){return(this||b).manipulation.addNodeMode.apply((this||b).manipulation,arguments)},_T.prototype.editNode=function(){return(this||b).manipulation.editNode.apply((this||b).manipulation,arguments)},_T.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),(this||b).manipulation.editNode.apply((this||b).manipulation,arguments)},_T.prototype.addEdgeMode=function(){return(this||b).manipulation.addEdgeMode.apply((this||b).manipulation,arguments)},_T.prototype.editEdgeMode=function(){return(this||b).manipulation.editEdgeMode.apply((this||b).manipulation,arguments)},_T.prototype.deleteSelected=function(){return(this||b).manipulation.deleteSelected.apply((this||b).manipulation,arguments)},_T.prototype.getPositions=function(){return(this||b).nodesHandler.getPositions.apply((this||b).nodesHandler,arguments)},_T.prototype.getPosition=function(){return(this||b).nodesHandler.getPosition.apply((this||b).nodesHandler,arguments)},_T.prototype.storePositions=function(){return(this||b).nodesHandler.storePositions.apply((this||b).nodesHandler,arguments)},_T.prototype.moveNode=function(){return(this||b).nodesHandler.moveNode.apply((this||b).nodesHandler,arguments)},_T.prototype.getBoundingBox=function(){return(this||b).nodesHandler.getBoundingBox.apply((this||b).nodesHandler,arguments)},_T.prototype.getConnectedNodes=function(c){return void 0!==(this||b).body.nodes[c]?(this||b).nodesHandler.getConnectedNodes.apply((this||b).nodesHandler,arguments):(this||b).edgesHandler.getConnectedNodes.apply((this||b).edgesHandler,arguments)},_T.prototype.getConnectedEdges=function(){return(this||b).nodesHandler.getConnectedEdges.apply((this||b).nodesHandler,arguments)},_T.prototype.startSimulation=function(){return(this||b).physics.startSimulation.apply((this||b).physics,arguments)},_T.prototype.stopSimulation=function(){return(this||b).physics.stopSimulation.apply((this||b).physics,arguments)},_T.prototype.stabilize=function(){return(this||b).physics.stabilize.apply((this||b).physics,arguments)},_T.prototype.getSelection=function(){return(this||b).selectionHandler.getSelection.apply((this||b).selectionHandler,arguments)},_T.prototype.setSelection=function(){return(this||b).selectionHandler.setSelection.apply((this||b).selectionHandler,arguments)},_T.prototype.getSelectedNodes=function(){return(this||b).selectionHandler.getSelectedNodeIds.apply((this||b).selectionHandler,arguments)},_T.prototype.getSelectedEdges=function(){return(this||b).selectionHandler.getSelectedEdgeIds.apply((this||b).selectionHandler,arguments)},_T.prototype.getNodeAt=function(){var c=(this||b).selectionHandler.getNodeAt.apply((this||b).selectionHandler,arguments);return void 0!==c&&void 0!==c.id?c.id:c},_T.prototype.getEdgeAt=function(){var c=(this||b).selectionHandler.getEdgeAt.apply((this||b).selectionHandler,arguments);return void 0!==c&&void 0!==c.id?c.id:c},_T.prototype.selectNodes=function(){return(this||b).selectionHandler.selectNodes.apply((this||b).selectionHandler,arguments)},_T.prototype.selectEdges=function(){return(this||b).selectionHandler.selectEdges.apply((this||b).selectionHandler,arguments)},_T.prototype.unselectAll=function(){(this||b).selectionHandler.unselectAll.apply((this||b).selectionHandler,arguments),(this||b).selectionHandler.commitWithoutEmitting.apply((this||b).selectionHandler),this.redraw()},_T.prototype.redraw=function(){return(this||b).renderer.redraw.apply((this||b).renderer,arguments)},_T.prototype.getScale=function(){return(this||b).view.getScale.apply((this||b).view,arguments)},_T.prototype.getViewPosition=function(){return(this||b).view.getViewPosition.apply((this||b).view,arguments)},_T.prototype.fit=function(){return(this||b).view.fit.apply((this||b).view,arguments)},_T.prototype.moveTo=function(){return(this||b).view.moveTo.apply((this||b).view,arguments)},_T.prototype.focus=function(){return(this||b).view.focus.apply((this||b).view,arguments)},_T.prototype.releaseNode=function(){return(this||b).view.releaseNode.apply((this||b).view,arguments)},_T.prototype.getOptionsFromConfigurator=function(){var c={};return(this||b).configurator&&(c=(this||b).configurator.getOptions.apply((this||b).configurator)),c};var zS=qb;c.Network=_T,c.NetworkImages=cw,c.networkDOTParser=aw,c.networkGephiParser=hw,c.networkOptions=DS,c.parseDOTNetwork=zS,c.parseGephiNetwork=Yb}));export{w as default};

